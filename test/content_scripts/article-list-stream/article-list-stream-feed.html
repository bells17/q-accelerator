<html xmlns:og="http://ogp.me/ns#"><head><meta charset="UTF-8"><title>ホーム - Qiita</title><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="Qiitaは、プログラマのための技術情報共有サービスです。 プログラミングに関するTips、ノウハウ、メモを簡単に記録 &amp;amp; 公開することができます。" name="description"><meta content="summary" name="twitter:card"><meta content="@Qiita" name="twitter:site"><meta content="ホーム - Qiita" property="og:title"><meta content="website" property="og:type"><meta content="http://qiita.com/" property="og:url"><meta content="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" property="og:image"><meta content="Qiitaは、プログラマのための技術情報共有サービスです。 プログラミングに関するTips、ノウハウ、メモを簡単に記録 &amp;amp; 公開することができます。" property="og:description"><meta content="Qiita" property="og:site_name"><meta content="564524038" property="fb:admins"><link rel="shortcut icon" type="image/x-icon" href="http://cdn.qiita.com/assets/favicons/public/production-4ff10c1e1e2b5fcb353ff9cafdd56c70.ico"><link rel="apple-touch-icon" type="image/png" href="http://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png"><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml"><link rel="stylesheet" media="all" href="http://cdn.qiita.com/assets/public-d59f1d079544834f9742667c45f5b2a0.min.css"><meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="OfuNX8OCS7kkADNF2DfJS+dwM4N93z/xvKQZNqs/SjL/G7jeaSMTrKBZaZ3dmq5D4Df3/uukbu0BjtsvgZ6Giw=="><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head><body class=" with-js" id=""><noscript>&lt;iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-TBQWPN" style="display:none;visibility:hidden" width="0"&gt;&lt;/iframe&gt;</noscript><script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.eY01mKC_upg.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=AQ/rs=AGLTcCO6Rpz4bNsJKoxktucPXBZsKfVbUQ/cb=gapi.loaded_0" async=""></script><script async="" src="//www.googletagmanager.com/gtm.js?id=GTM-TBQWPN"></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script async="" src="//cdn.optimizely.com/js/52738645.js" id="optimizely-jssdk"></script><script async="" src="http://www.google-analytics.com/ga.js" id="google-analytics-jssdk"></script><script async="" src="//platform.twitter.com/widgets.js" id="twitter-jssdk"></script><script async="" src="//connect.facebook.net/en_US/all.js#xfbml=1&amp;appId=222621691108322" id="facebook-jssdk"></script><script async="" src="//apis.google.com/js/plusone.js" id="google-plusone-jssdk" gapi_processed="true"></script><script async="" src="//widgets.getpocket.com/v1/j/btn.js?v=1" id="pocket-btn-js"></script><script>
  document.body.className = document.body.className.replace('without-js', '') + ' with-js';
  window.Qiita = {"asset_host":"cdn.qiita.com","TLD":"com","controller_path":"public/home","controller_action":"public/home#index","controller":"home","action":"index","env":"production","flash":{},"is_landing_page":false,"is_team_page":false,"root_domain":"qiita.com","variant":null,"config":{"mixpanel":{"career":"dd35af27e959781713d63fd7ca898a8d","per_team":"c0a2116368b33b44b5029ebd2cc9b094","public":"be87616606b0e26a87689099aab2c4e5","team":"b7c0342acba2dbc8742484d98788efb3"},"default_locale":"ja","locale":"ja"},"team":null,"user":{"id":35595,"url_name":"howdy39","profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/35595/profile-images/1473686778","email":"tatsuya.howdy@gmail.com","staff":false},"GIT_BRANCH":null,"DEBUG":false};

  /* You are logged in */
</script>
<div class="headerContainer headerContainer-public" role="navigation"><div data-react-class="T.HeaderContainer" data-react-props="{&quot;user&quot;:{&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/35595/profile-images/1473686778&quot;,&quot;team_only&quot;:false,&quot;teams&quot;:[],&quot;url_name&quot;:&quot;howdy39&quot;},&quot;team&quot;:null,&quot;news&quot;:{&quot;type&quot;:&quot;募集&quot;,&quot;content&quot;:&quot;QiitaやQiita:Teamを良くしたいエンジニア&quot;,&quot;url&quot;:&quot;http://increments.co.jp/jobs/engineers?utm_source=qiita\u0026utm_medium=header_news&quot;},&quot;initial_unread_count&quot;:0,&quot;siteid_image&quot;:&quot;http://cdn.qiita.com/siteid-reverse.png&quot;,&quot;is_team_page&quot;:false,&quot;on_team_setting&quot;:false,&quot;show_post_menu&quot;:true,&quot;show_search_menu&quot;:true,&quot;is_fluid&quot;:false,&quot;locale&quot;:&quot;ja&quot;}"><header data-reactroot="" class="sharedHeader sharedHeader-public"><div class="sharedHeader_inner"><div class="sharedHeader_left"><span class="sharedHeader_logo open"><a class="sharedHeader_logo_main" href="/"><span class="sharedHeader_logo_figure"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75 26"><title>Qiita</title><path d="M24.6 12.2C24.6 6.2 20 0 12.2 0 6.2 0 0 4.6 0 12.4c0 6 4.6 12.2 12.4 12.2 2.5 0 5-.8 7.1-2.3l3.6 3.6 1.6-1.6-3.4-3.4c2.1-2.3 3.3-5.3 3.3-8.7zm-12.4-10c5.7 0 10.2 4.4 10.2 10.1 0 4.9-3.8 10.1-10.1 10.1s-10.1-5.1-10.1-10c0-6.4 5.1-10.2 10-10.2zM30.5 7.1h2.1v17h-2.1zM31.5 4.8c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8 1.8.8 1.8 1.8-.8 1.8-1.8 1.8zM40 4.8c-1 0-1.8-.8-1.8-1.8S39 1.2 40 1.2s1.8.8 1.8 1.8S41 4.8 40 4.8zM39 7.1h2.1v17H39zM53.7 24.4c-3.9 0-6.2-3-6.2-6v-16h2.1v4.7H57v2.1h-7.4v9.3c0 1.9 1.5 3.9 4.1 3.9.7 0 1.4-.2 2-.6l.2-.1 1 1.8-.2.1c-.9.5-2 .8-3 .8zM67.6 24.5c-5.7 0-9.1-4.5-9.1-8.9 0-5.7 4.5-9.1 8.9-9.1 2.3 0 4.1.8 5.4 2.3V7.1h2.1v17h-2.1v-1.9c-1.2 1.5-3 2.3-5.2 2.3zm-.2-15.9c-3.4 0-6.8 2.6-6.8 7 0 3.4 2.6 6.8 7 6.8 2 0 4-.9 5.3-2.5v-8.8c-1.4-1.6-3.3-2.5-5.5-2.5z"></path></svg></span></a></span><form class="navbar-form navbar-left searchForm" action="/search" method="get"><div class="searchForm_queryWrapper"><input class="form-control searchForm_query" placeholder="キーワードを入力" autocomplete="off" name="q" value=""><div class="searchForm_wiseSearchButton"><i class="fa fa-caret-down"></i></div></div></form><div class="navbar-text headerNews hidden-xs hidden-sm"><div class="headerNews_label label label-warning">募集</div><a class="navbar-link" target="_blank" href="http://increments.co.jp/jobs/engineers?utm_source=qiita&amp;utm_medium=header_news">QiitaやQiita:Teamを良くしたいエンジニア</a></div></div><div class="sharedHeader_right"><div class="sharedHeader_searchIcon"><a data-toggle="modal" data-target="#js-searchModal"><i class="fa fa-search"></i></a></div><div class="sharedHeader_searchModal in modal fade" aria-hidden="false" id="js-searchModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><form action="/search" method="get"><input type="hidden" name="sort" id="sort" value="rel"><div class="row"><div class="col-xs-9"><input type="text" name="q" id="q" class="form-control"></div><div class="col-xs-3"><input type="submit" name="commit" value="Search" class="btn btn-default btn-sm"></div></div></form></div></div></div></div><div class="sharedHeader_newItem btn-group"><a class="sharedHeader_newItem_btn sharedHeader_newItem_post btn" href="/drafts/new"><i class="fa fa-lg fa-edit"></i><!-- react-text: 36 -->投稿する<!-- /react-text --></a><a class="sharedHeader_newItem_btn dropdown-toggle btn"><i class="fa fa-caret-down"></i><span class="sharedHeader_newItem_xsEdit"><i class="fa fa-edit"></i></span></a></div><div class="sharedHeader_stockItems"><a href="/howdy39/stock">ストック一覧</a></div><div class="sharedHeader_stockItems_xsStock"><a href="/howdy39/stock" title="ストック一覧"><i class="fa fa-folder"></i></a></div><div class="sharedHeader_notifications"><div class="globalNotifications open active"><div class="globalNotifications__surface"><div class="globalNotifications_count">0</div></div></div></div><div class="sharedHeader_user open"><a class="sharedHeader_user_clickable"><img class="sharedHeader_user_image" src="https://qiita-image-store.s3.amazonaws.com/0/35595/profile-images/1473686778" width="32" height="32"></a></div></div></div></header></div></div><div id="main"><div class="container feedPage"><div class="row"><div class="col-sm-9"><div class="feedPage_header"><h2>プログラミング知識を共有しよう。</h2><a class="btn btn-primary" track="click" data-label="HomeIndexToItemsNew" href="/drafts/new">ノウハウ・Tipsを投稿する</a></div><div class="streamContainer"><nav><ul class="nav nav-tabs streamContainer_tabs"><li class="following-tab active" data-type="following"><a href="/">フィード</a></li><li class="public-tab" data-type="public"><a href="/items">すべての投稿</a></li><li class="mine-tab pull-right" data-type="mine"><a href="/mine">自分の投稿 <span class="label label-info">19</span></a></li><li class="stock-tab pull-right" data-type="stock"><a href="/stock">ストック</a></li></ul></nav><div class="streamContainer_streams feedActivities"><div class="following-stream active"><div><div class="flush-button"></div>
<div class="activities"><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/Kurowasi/items/b0123d20e052cb0bff44" title="CompositeパターンをJavaScriptとJavaのコードを比較して理解する">
            CompositeパターンをJavaScriptとJavaのコードを比較して理解する
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/java">
                Java
              </a>
            </li>
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/%e3%83%87%e3%82%b6%e3%82%a4%e3%83%b3%e3%83%91%e3%82%bf%e3%83%bc%e3%83%b3">
                デザインパターン
              </a>
            </li>
          
            <li>
              <a href="/tags/gof">
                GoF
              </a>
            </li>
          
            <li>
              <a href="/tags/composite">
                Composite
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/Kurowasi/items/b0123d20e052cb0bff44#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-b0123d20e052cb0bff44" class="item-body markdownContent bordered">
        
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>詳しいことや他のパターンは<strong><a href="http://qiita.com/Kurowasi/items/106ebd0f553d8a2f95bb" id="reference-5abbf721f1be086c40cb">デザインパターンをJavaScriptとJavaでの実装を比較して理解する</a></strong>に書いていきます。<br>
JavaScriptの例はJavaのを見て書きました。<br>
クラス型・プロトタイプ型、型付の強弱、アクセス修飾子など特徴の違いなどは活かしていません。<br>
ご了承ください。</p>

<h1>
<span id="compositeパターン" class="fragment"></span><a href="#composite%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>Compositeパターン</h1>

<p>コンピュータのファイルシステムには「ディレクトリ」というものがある<br>
ディレクトリの中には別のディレクトリやファイルが入っている<br>
ディレクトリはそのような「入れ子」になった構造、再帰的な構造を作り出す</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/130026/f0aa4316-c0e3-2334-c055-19ffd4453775.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/130026/f0aa4316-c0e3-2334-c055-19ffd4453775.png" alt="qiita1.PNG"></a><br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/130026/305e6b8a-a859-ba01-5d21-14f74c684aba.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/130026/305e6b8a-a859-ba01-5d21-14f74c684aba.png" alt="qiita2.PNG"></a></p>

<p>ディレクトリとファイルをまとめてディレクトリエントリとして扱うように、<br>
容器と中身を同じ種類のものとして扱うと便利な場合がある</p>

<p>容器と中身を同一視し、再帰的な構造を作るパターンをCompositeパターンと呼ぶ<br>
compositeは「混合物」「複合物」という意味</p>

<h2>
<span id="javaでの実装例" class="fragment"></span><a href="#java%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E4%BE%8B"><i class="fa fa-link"></i></a>Javaでの実装例</h2>

<p>ファイルとディレクトリを模式的に表現したプログラム</p>

<h3>
<span id="クラス図" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E5%9B%B3"><i class="fa fa-link"></i></a>クラス図</h3>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/130026/d282e4e1-9b42-170e-fd2a-1d3851519972.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/130026/d282e4e1-9b42-170e-fd2a-1d3851519972.png" alt="Composite.png"></a></p>

<h3>
<span id="コード" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>コード</h3>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">Main.java</span></div>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Making root entries..."</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">rootdir</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"root"</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">bindir</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"bin"</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">tmpdir</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"tmp"</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">usrdir</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"usr"</span><span class="o">);</span>
            <span class="n">rootdir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bindir</span><span class="o">);</span>
            <span class="n">rootdir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tmpdir</span><span class="o">);</span>
            <span class="n">rootdir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">usrdir</span><span class="o">);</span>
            <span class="n">bindir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"vi"</span><span class="o">,</span> <span class="mi">10000</span><span class="o">));</span>
            <span class="n">bindir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"latex"</span><span class="o">,</span> <span class="mi">20000</span><span class="o">));</span>
            <span class="n">rootdir</span><span class="o">.</span><span class="na">printList</span><span class="o">();</span>

            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Making user entries..."</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">yuki</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"yuki"</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">hanako</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"hanako"</span><span class="o">);</span>
            <span class="n">Directory</span> <span class="n">tomura</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directory</span><span class="o">(</span><span class="s">"tomura"</span><span class="o">);</span>
            <span class="n">usrdir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">yuki</span><span class="o">);</span>
            <span class="n">usrdir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">hanako</span><span class="o">);</span>
            <span class="n">usrdir</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tomura</span><span class="o">);</span>
            <span class="n">yuki</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"diary.html"</span><span class="o">,</span> <span class="mi">100</span><span class="o">));</span>
            <span class="n">yuki</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"Composite.java"</span><span class="o">,</span> <span class="mi">200</span><span class="o">));</span>
            <span class="n">hanako</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"memo.tex"</span><span class="o">,</span> <span class="mi">300</span><span class="o">));</span>
            <span class="n">tomura</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"game.doc"</span><span class="o">,</span> <span class="mi">400</span><span class="o">));</span>
            <span class="n">tomura</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"junk.mail"</span><span class="o">,</span> <span class="mi">500</span><span class="o">));</span>
            <span class="n">rootdir</span><span class="o">.</span><span class="na">printList</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileTreatmentException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">Entry.java</span></div>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="nf">getSize</span><span class="o">();</span>
    <span class="kd">public</span> <span class="n">Entry</span> <span class="nf">add</span><span class="o">(</span><span class="n">Entry</span> <span class="n">entry</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileTreatmentException</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">FileTreatmentException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printList</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">printList</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">printList</span><span class="o">(</span><span class="n">String</span> <span class="n">prefix</span><span class="o">);</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" ("</span> <span class="o">+</span> <span class="n">getSize</span><span class="o">()</span> <span class="o">+</span> <span class="s">")"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">Directory.java</span></div>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.util.Iterator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Directory</span> <span class="kd">extends</span> <span class="n">Entry</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;</span> <span class="n">directory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Entry</span><span class="o">&gt;();</span>

    <span class="kd">public</span> <span class="nf">Directory</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">directory</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">Entry</span> <span class="n">entry</span> <span class="o">=</span> <span class="o">(</span><span class="n">Entry</span><span class="o">)</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="n">size</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getSize</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Entry</span> <span class="nf">add</span><span class="o">(</span><span class="n">Entry</span> <span class="n">entry</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">directory</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">printList</span><span class="o">(</span><span class="n">String</span> <span class="n">prefix</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="k">this</span><span class="o">);</span>
        <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">directory</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">Entry</span> <span class="n">entry</span> <span class="o">=</span> <span class="o">(</span><span class="n">Entry</span><span class="o">)</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="n">entry</span><span class="o">.</span><span class="na">printList</span><span class="o">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">File.java</span></div>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">File</span> <span class="kd">extends</span> <span class="n">Entry</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">File</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">printList</span><span class="o">(</span><span class="n">String</span> <span class="n">prefix</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">FileTreatmentException.java</span></div>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileTreatmentException</span> <span class="kd">extends</span> <span class="n">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">FileTreatmentException</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">FileTreatmentException</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<h2>
<span id="javascriptでの実装例" class="fragment"></span><a href="#javascript%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E4%BE%8B"><i class="fa fa-link"></i></a>JavaScriptでの実装例</h2>

<h3>
<span id="コード-1" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89-1"><i class="fa fa-link"></i></a>コード</h3>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">index.html</span></div>
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Composite<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"Main.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"Directory.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"File.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">Main.js</span></div>
<div class="highlight"><pre><span class="nx">MAIN</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">MAIN</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Making root entries..."</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">rootdir</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"root"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">bindir</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"bin"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">tmpdir</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"tmp"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">usrdir</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"usr"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">rootdir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">MAIN</span><span class="p">.</span><span class="nx">bindir</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">rootdir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">MAIN</span><span class="p">.</span><span class="nx">tmpdir</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">rootdir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">MAIN</span><span class="p">.</span><span class="nx">usrdir</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">bindir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"vi"</span><span class="p">,</span> <span class="mi">10000</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">bindir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"latex"</span><span class="p">,</span> <span class="mi">20000</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">rootdir</span><span class="p">.</span><span class="nx">printList</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Making user entries..."</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">yuki</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"yuki"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">hanako</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"hanako"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">tomura</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Directory</span><span class="p">(</span><span class="s2">"tomura"</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">usrdir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">MAIN</span><span class="p">.</span><span class="nx">yuki</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">usrdir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">MAIN</span><span class="p">.</span><span class="nx">hanako</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">usrdir</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">MAIN</span><span class="p">.</span><span class="nx">tomura</span><span class="p">);</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">yuki</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"diary.html"</span><span class="p">,</span> <span class="mi">100</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">yuki</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"Composite.java"</span><span class="p">,</span> <span class="mi">200</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">hanako</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"memo.tex"</span><span class="p">,</span> <span class="mi">300</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">tomura</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"game.doc"</span><span class="p">,</span> <span class="mi">400</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">tomura</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="s2">"junk.mail"</span><span class="p">,</span> <span class="mi">500</span><span class="p">));</span>
    <span class="nx">MAIN</span><span class="p">.</span><span class="nx">rootdir</span><span class="p">.</span><span class="nx">printList</span><span class="p">();</span>
<span class="p">};</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"load"</span><span class="p">,</span> <span class="nx">MAIN</span><span class="p">.</span><span class="nx">init</span><span class="p">);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">Directory.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Directory</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">directory</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">};</span>

<span class="nx">Directory</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="nx">Directory</span><span class="p">,</span>

    <span class="nx">getName</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">size</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getSize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">add</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">printList</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prefix</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"/"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" ("</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">()</span> <span class="o">+</span> <span class="s2">")"</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">printList</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" ("</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">()</span> <span class="o">+</span> <span class="s2">")"</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">directory</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">printList</span><span class="p">(</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">File.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">File</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">size</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">File</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="nx">File</span><span class="p">,</span>

    <span class="nx">getName</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">printList</span><span class="p">(</span><span class="nx">prefix</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" ("</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">()</span> <span class="o">+</span> <span class="s2">")"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

</pre></div>
</div>

<h2>
<span id="compositeパターンの登場人物" class="fragment"></span><a href="#composite%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E7%99%BB%E5%A0%B4%E4%BA%BA%E7%89%A9"><i class="fa fa-link"></i></a>Compositeパターンの登場人物</h2>

<h3>
<span id="leaf葉の役" class="fragment"></span><a href="#leaf%E8%91%89%E3%81%AE%E5%BD%B9"><i class="fa fa-link"></i></a><strong>Leaf(葉)の役</strong>
</h3>

<p>「中身」を表す役<br>
この役の中には、他のものを入れることができない<br>
サンプルプログラム⇒File(class)</p>

<h3>
<span id="composite集合体の役" class="fragment"></span><a href="#composite%E9%9B%86%E5%90%88%E4%BD%93%E3%81%AE%E5%BD%B9"><i class="fa fa-link"></i></a><strong>Composite(集合体)の役</strong>
</h3>

<p>「容器」を表す役<br>
Leaf役やComposite役を入れることができる<br>
サンプルプログラム⇒Directory(class)</p>

<h3>
<span id="componentの役" class="fragment"></span><a href="#component%E3%81%AE%E5%BD%B9"><i class="fa fa-link"></i></a><strong>Componentの役</strong>
</h3>

<p>Leaf役とComposite役を同一視するための役<br>
Component役は、Leaf役とComposite役に共通のスーパークラスとして表現する<br>
サンプルプログラム⇒Entry(abstract class)</p>

<h3>
<span id="client依頼者の役" class="fragment"></span><a href="#client%E4%BE%9D%E9%A0%BC%E8%80%85%E3%81%AE%E5%BD%B9"><i class="fa fa-link"></i></a><strong>Client(依頼者)の役</strong>
</h3>

<p>Compositeパターンの利用者<br>
サンプルプログラム⇒Main(class)</p>

<h2>
<span id="compositeパターンのクラス図" class="fragment"></span><a href="#composite%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E5%9B%B3"><i class="fa fa-link"></i></a>Compositeパターンのクラス図</h2>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/130026/699c69ca-a522-eaab-d0a0-1bbfcfa52d82.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/130026/699c69ca-a522-eaab-d0a0-1bbfcfa52d82.png" alt="test.png"></a></p>

<h2>
<span id="compositeパターンの必要性" class="fragment"></span><a href="#composite%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E5%BF%85%E8%A6%81%E6%80%A7"><i class="fa fa-link"></i></a>Compositeパターンの必要性</h2>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">Sample.java</span></div>
<div class="highlight"><pre><span class="c1">// Directory</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="n">Iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">directory</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
  <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">Entry</span> <span class="n">entry</span> <span class="o">=</span> <span class="o">(</span><span class="n">Entry</span><span class="o">)</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">size</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getSize</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// File</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>

<p>どちらの場合でも、同じメソッドgetSizeでサイズを得ることができます。<br>
これがCompositeパターンの特徴、「容器と中身を同じものとみなす」ことの現れです。</p>

<p>木構造を再帰的に呼び出してサイズを取得することができる</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/130026/2359cd14-4e32-bfb0-6920-c32421d258f5.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/130026/2359cd14-4e32-bfb0-6920-c32421d258f5.png" alt="qiita3.PNG"></a></p>

<p>一般に木構造になるデータ構造はCompositeパターンに当てはまる</p>

<ul>
<li>ディレクトリシステム</li>
<li>ウィンドウシステム</li>
<li>箇条書きの中に箇条書き</li>
<li>マクロコマンド</li>
</ul>

<h2>
<span id="compositeパターンの使い時" class="fragment"></span><a href="#composite%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E4%BD%BF%E3%81%84%E6%99%82"><i class="fa fa-link"></i></a>Compositeパターンの使い時</h2>

<p>テストプログラムでCompositeパターンなどが使われる</p>

<ul>
<li>キーボードからの入力テスト</li>
<li>ファイルからの入力テスト</li>
<li>ネットワークからの入力テスト</li>
</ul>

<p>これらの３つを入力テストとしたいときにCompositeパターンを使うことができる</p>

<h2>
<span id="関連しているパターン" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>関連しているパターン</h2>

<ul>
<li>Commandパターン</li>
<li>Visitorパターン</li>
<li>Decoratorパターン</li>
</ul>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<p><a href="https://www.amazon.co.jp/%E5%A2%97%E8%A3%9C%E6%94%B9%E8%A8%82%E7%89%88Java%E8%A8%80%E8%AA%9E%E3%81%A7%E5%AD%A6%E3%81%B6%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%85%A5%E9%96%80-%E7%B5%90%E5%9F%8E-%E6%B5%A9/dp/4797327030" rel="nofollow noopener" target="_blank">増補改訂版Java言語で学ぶデザインパターン入門</a></p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-stock unstock"></i>
      </div>
    
    <a href="http://qiita.com/soundTricker" title="soundTricker">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/2965/profile-images/1473682415" class="user-icon" title="soundTricker">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/soundTricker">
            soundTricker
          </a>
        </span>
        
            が<span>ストック</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905" title="外部テストパッケージの利用ケース #golang">
            外部テストパッケージの利用ケース #golang
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/go">
                Go
              </a>
            </li>
          
            <li>
              <a href="/tags/golang">
                golang
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            4
          </li>
          <li>
            <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-5f491994647aa4a8a905" class="item-body markdownContent bordered">
        <p><a href="http://golang-jp.org/cmd/go/#hdr-Go________" rel="nofollow noopener" target="_blank">go list</a>の、-fフラグで指定できるstruct fieldに</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>XTestGoFiles []string // パッケージ外の_test.goファイル
XTestImports []string // XTestGoFilesからのインポート
</pre></div></div>

<p>というものがあるのに気付いて、「これなんだろ？」と思って調べました。</p>

<p>テストコードのパッケージを<code>xxx_test</code>という様にサフィックス<code>_test</code>くっつけておくと外部テストパッケージ（external test package）というものになるらしい。</p>

<h2>
<span id="例" class="fragment"></span><a href="#%E4%BE%8B"><i class="fa fa-link"></i></a>例</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>src
└── hoge
    ├── hoge.go
    └── hoge_test.go
</pre></div></div>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge</span>

<span class="c1">// Hoge returns hoge!!</span>
<span class="kd">func</span> <span class="nx">Hoge</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"hoge!!"</span>
<span class="p">}</span>

</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">TestHoge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">()</span> <span class="o">!=</span> <span class="s">"hoge!!"</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">"expected:hoge!! but was:%v"</span><span class="p">,</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>通常パッケージディレクトリ内に複数パッケージを宣言することはできないですが、外部テストパッケージ<code>{package name}_test</code>は例外で、そこに書かれたテストはhogeパッケージとは別のパッケージ扱いになるとのこと。<br>
<br>
↑の例でも、hoge_testはhogeパッケージと同じディレクトリにありながら、hogeパッケージの関数を呼ぶときはhogeをimportしてパッケージプレフィクス付きで関数呼ぶ必要があります。</p>

<p>検索してもあまり情報ひっかからないのでマイナーな機能なのかな？と思っていたのですが、標準パッケージのコード見てるとめっちゃ使われてました。</p>

<p>数えてみました↓↓<br>
通常パッケージの<code>_test.go</code>ファイル: 317<br>
外部テストパッケージの<code>_test.go</code>ファイル: 234</p>

<h2>
<span id="どういうときに使用する" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>どういうときに使用する？</h2>

<h3>
<span id="exampleテスト" class="fragment"></span><a href="#example%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>Exampleテスト</h3>

<p>FYI: <a href="https://golang.org/pkg/testing/#hdr-Examples" class="autolink" rel="nofollow noopener" target="_blank">https://golang.org/pkg/testing/#hdr-Examples</a></p>

<p>テストコードでExampleXxxという関数を書いておくと、標準出力をassertionするテストと、godocでのExample表示を同時に行ってくれます。<br>
Exampleテストを記述するときには基本的に外部テストパッケージを使用します。</p>

<p>例:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">ExampleHoge</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>

    <span class="c1">// Output:</span>
    <span class="c1">// hoge!!</span>
<span class="p">}</span>
</pre></div></div>

<p>godoc:</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.39.34.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png"></a></p>

<p>外部テストパッケージでない通常のパッケージでも記述することは出来ますが、そうするとテスト対象と同じパッケージになってしまうので、godocで表示されるExampleもパッケージプレフィクスなしのコードになってしまいます↓↓</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png" target="_blank" rel="nofollow noopener"><img width="362" alt="スクリーンショット 2016-12-29 9.17.52.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png"></a></p>

<p>これだと利用者がサンプルをそのまま実行できなくなります。外部テストパッケージを利用することでユーザーが外部のパッケージから利用する場合のコードをExampleに出力することができる様になります。</p>

<p>あと、余談ですが、godocの<code>-play</code>オプションつけた場合に、自前パッケージのExampleにもplaygroundが表示されます（外部テストパッケージを使用しないと表示されません）。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.59.00.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png"></a></p>

<p>でもRunするとエラーになっちゃいました・・・(´･ω･`)<br>
これ実行出来ている人いたら教えてくださいm(_ _)m</p>

<h3>
<span id="他のパッケージから使用されるケースのテスト" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%8B%E3%82%89%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>他のパッケージから使用されるケースのテスト</h3>

<p>これは必須ではないのですが、標準ライブラリの外部テストパッケージの使われ方を見ていて自分が感じたことです。</p>

<p>たとえば自分のパッケージでencoding/jsonのMarshaller/Unmarshallerインターフェースを実装している場合など、外部のパッケージ経由で呼び出されるケースのテストで使用します。</p>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">type</span> <span class="nx">Fuga</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Value</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Fuga</span><span class="p">)</span> <span class="nx">MarshalJSON</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">`{"value":%d}`</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">Value</span><span class="p">)),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">func</span> <span class="nx">TestFugaMarshal</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fuga</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Fuga</span><span class="p">{</span><span class="mi">999</span><span class="p">}</span>
    <span class="nx">jsn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">fuga</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">)</span> <span class="o">!=</span> <span class="s">`{"value":999}`</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">`expected: {"value":999}, but was:%s`</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>外部テストパッケージを使用することで、hogeパッケージがjson/encodingパッケージに依存しなくなります。</p>

<p>↑の例ではもともと依存関係がありませんでしたが、たとえばhogeパッケージに依存するパッケージpiyoがあったとして、piyoパッケージ経由でhogeが呼び出されるテストも記述することが出来ます。<br>
通常パッケージのテストだと循環依存になって実行することが出来ません。</p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>外部テストパッケージの利用方針に関して、公式ドキュメントの類があまり見当たりませんでした。<br>
どなたか情報ありましたら教えてくださいm(_ _)m</p>

<p>あと、逆に通常テストパッケージを利用する意義が自分の中で曖昧になりました。。<br>
テストは全部外部テストパッケージでいいのでは・・<br>
unexportedな関数や変数をテストしたい場合・・・などかな？</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track hidden"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-like unlike"></i>
      </div>
    
    <a href="http://qiita.com/soundTricker" title="soundTricker">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/2965/profile-images/1473682415" class="user-icon" title="soundTricker">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/soundTricker">
            soundTricker
          </a>
        </span>
        
            が<span>いいね</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905" title="外部テストパッケージの利用ケース #golang">
            外部テストパッケージの利用ケース #golang
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/go">
                Go
              </a>
            </li>
          
            <li>
              <a href="/tags/golang">
                golang
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            4
          </li>
          <li>
            <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-5f491994647aa4a8a905" class="item-body markdownContent bordered">
        <p><a href="http://golang-jp.org/cmd/go/#hdr-Go________" rel="nofollow noopener" target="_blank">go list</a>の、-fフラグで指定できるstruct fieldに</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>XTestGoFiles []string // パッケージ外の_test.goファイル
XTestImports []string // XTestGoFilesからのインポート
</pre></div></div>

<p>というものがあるのに気付いて、「これなんだろ？」と思って調べました。</p>

<p>テストコードのパッケージを<code>xxx_test</code>という様にサフィックス<code>_test</code>くっつけておくと外部テストパッケージ（external test package）というものになるらしい。</p>

<h2>
<span id="例" class="fragment"></span><a href="#%E4%BE%8B"><i class="fa fa-link"></i></a>例</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>src
└── hoge
    ├── hoge.go
    └── hoge_test.go
</pre></div></div>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge</span>

<span class="c1">// Hoge returns hoge!!</span>
<span class="kd">func</span> <span class="nx">Hoge</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"hoge!!"</span>
<span class="p">}</span>

</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">TestHoge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">()</span> <span class="o">!=</span> <span class="s">"hoge!!"</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">"expected:hoge!! but was:%v"</span><span class="p">,</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>通常パッケージディレクトリ内に複数パッケージを宣言することはできないですが、外部テストパッケージ<code>{package name}_test</code>は例外で、そこに書かれたテストはhogeパッケージとは別のパッケージ扱いになるとのこと。<br>
<br>
↑の例でも、hoge_testはhogeパッケージと同じディレクトリにありながら、hogeパッケージの関数を呼ぶときはhogeをimportしてパッケージプレフィクス付きで関数呼ぶ必要があります。</p>

<p>検索してもあまり情報ひっかからないのでマイナーな機能なのかな？と思っていたのですが、標準パッケージのコード見てるとめっちゃ使われてました。</p>

<p>数えてみました↓↓<br>
通常パッケージの<code>_test.go</code>ファイル: 317<br>
外部テストパッケージの<code>_test.go</code>ファイル: 234</p>

<h2>
<span id="どういうときに使用する" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>どういうときに使用する？</h2>

<h3>
<span id="exampleテスト" class="fragment"></span><a href="#example%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>Exampleテスト</h3>

<p>FYI: <a href="https://golang.org/pkg/testing/#hdr-Examples" class="autolink" rel="nofollow noopener" target="_blank">https://golang.org/pkg/testing/#hdr-Examples</a></p>

<p>テストコードでExampleXxxという関数を書いておくと、標準出力をassertionするテストと、godocでのExample表示を同時に行ってくれます。<br>
Exampleテストを記述するときには基本的に外部テストパッケージを使用します。</p>

<p>例:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">ExampleHoge</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>

    <span class="c1">// Output:</span>
    <span class="c1">// hoge!!</span>
<span class="p">}</span>
</pre></div></div>

<p>godoc:</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.39.34.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png"></a></p>

<p>外部テストパッケージでない通常のパッケージでも記述することは出来ますが、そうするとテスト対象と同じパッケージになってしまうので、godocで表示されるExampleもパッケージプレフィクスなしのコードになってしまいます↓↓</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png" target="_blank" rel="nofollow noopener"><img width="362" alt="スクリーンショット 2016-12-29 9.17.52.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png"></a></p>

<p>これだと利用者がサンプルをそのまま実行できなくなります。外部テストパッケージを利用することでユーザーが外部のパッケージから利用する場合のコードをExampleに出力することができる様になります。</p>

<p>あと、余談ですが、godocの<code>-play</code>オプションつけた場合に、自前パッケージのExampleにもplaygroundが表示されます（外部テストパッケージを使用しないと表示されません）。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.59.00.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png"></a></p>

<p>でもRunするとエラーになっちゃいました・・・(´･ω･`)<br>
これ実行出来ている人いたら教えてくださいm(_ _)m</p>

<h3>
<span id="他のパッケージから使用されるケースのテスト" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%8B%E3%82%89%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>他のパッケージから使用されるケースのテスト</h3>

<p>これは必須ではないのですが、標準ライブラリの外部テストパッケージの使われ方を見ていて自分が感じたことです。</p>

<p>たとえば自分のパッケージでencoding/jsonのMarshaller/Unmarshallerインターフェースを実装している場合など、外部のパッケージ経由で呼び出されるケースのテストで使用します。</p>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">type</span> <span class="nx">Fuga</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Value</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Fuga</span><span class="p">)</span> <span class="nx">MarshalJSON</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">`{"value":%d}`</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">Value</span><span class="p">)),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">func</span> <span class="nx">TestFugaMarshal</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fuga</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Fuga</span><span class="p">{</span><span class="mi">999</span><span class="p">}</span>
    <span class="nx">jsn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">fuga</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">)</span> <span class="o">!=</span> <span class="s">`{"value":999}`</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">`expected: {"value":999}, but was:%s`</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>外部テストパッケージを使用することで、hogeパッケージがjson/encodingパッケージに依存しなくなります。</p>

<p>↑の例ではもともと依存関係がありませんでしたが、たとえばhogeパッケージに依存するパッケージpiyoがあったとして、piyoパッケージ経由でhogeが呼び出されるテストも記述することが出来ます。<br>
通常パッケージのテストだと循環依存になって実行することが出来ません。</p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>外部テストパッケージの利用方針に関して、公式ドキュメントの類があまり見当たりませんでした。<br>
どなたか情報ありましたら教えてくださいm(_ _)m</p>

<p>あと、逆に通常テストパッケージを利用する意義が自分の中で曖昧になりました。。<br>
テストは全部外部テストパッケージでいいのでは・・<br>
unexportedな関数や変数をテストしたい場合・・・などかな？</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/may88seiji/items/497555d098b630d01bcb" title="js オブジェクトの配列から一致するペアを返す">
            js オブジェクトの配列から一致するペアを返す
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/may88seiji/items/497555d098b630d01bcb#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-497555d098b630d01bcb" class="item-body markdownContent bordered">
        
<h2>
<span id="お題" class="fragment"></span><a href="#%E3%81%8A%E9%A1%8C"><i class="fa fa-link"></i></a>お題</h2>

<p>配列のオブジェクト（最初の引数）を調べ、一致するプロパティと値のペア（2番目の引数）を持つすべてのオブジェクトを持つ配列を返す関数を作る。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">findPair</span><span class="p">(</span><span class="nx">collection</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">return</span> <span class="nx">arr</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">findPair</span><span class="p">([{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">"Romeo"</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">"Montague"</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">"Mercutio"</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="kc">null</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">"Tybalt"</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">"Capulet"</span> <span class="p">}],</span> <span class="p">{</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">"Capulet"</span> <span class="p">});</span>
<span class="c1">//[{ first: "Tybalt", last: "Capulet" }]</span>

</pre></div></div>

<h2>
<span id="出力結果" class="fragment"></span><a href="#%E5%87%BA%E5%8A%9B%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>出力結果</h2>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="nx">whatIsInAName</span><span class="p">([{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}],</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span> <span class="p">})</span> <span class="c1">// [{ "a": 1 }, { "a": 1 }, { "a": 1, "b": 2 }]</span>
<span class="nx">whatIsInAName</span><span class="p">([{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"c"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}],</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">})</span> <span class="c1">// [{ "a": 1, "b": 2 }, { "a": 1, "b": 2, "c": 2 }]</span>
<span class="nx">whatIsInAName</span><span class="p">([{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"c"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}],</span> <span class="p">{</span> <span class="s2">"a"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"c"</span><span class="o">:</span> <span class="mi">2</span> <span class="p">})</span> <span class="c1">// [{ "a": 1, "b": 2, "c": 2 }]</span>
</pre></div></div>

<h2>
<span id="使ったもの" class="fragment"></span><a href="#%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>使ったもの</h2>

<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" rel="nofollow noopener" target="_blank">Object.keys()</a><br>
<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty" rel="nofollow noopener" target="_blank">hasOwnProperty()</a><br>
filter()<br>
every()</p>

<h2>
<span id="考え方" class="fragment"></span><a href="#%E8%80%83%E3%81%88%E6%96%B9"><i class="fa fa-link"></i></a>考え方</h2>

<p>・obj.keys()をつかって第二引数の配列のプロパティを新しい配列にいれる。<br>
・fliter()で第一引数から第二引数のプロパティをもたない要素を取り除く。<br>
・hasOwnProperty()で第二引数のプロパティを持ち、値が同じオブジェクトを返しておわり</p>

<h2>
<span id="コード" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>コード</h2>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">whatIsInAName</span><span class="p">(</span><span class="nx">collection</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
 <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span><span class="c1">// ["last"]</span>
  <span class="nx">arr</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">===</span> <span class="nx">source</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
    <span class="p">});</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">arr</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">whatIsInAName</span><span class="p">([{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">"Romeo"</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">"Montague"</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">"Mercutio"</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="kc">null</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">"Tybalt"</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">"Capulet"</span> <span class="p">}],</span> <span class="p">{</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">"Capulet"</span> <span class="p">});</span>
</pre></div></div>

<h3>
<span id="他にもコードが浮かんだ方コメントお待ちしております" class="fragment"></span><a href="#%E4%BB%96%E3%81%AB%E3%82%82%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8C%E6%B5%AE%E3%81%8B%E3%82%93%E3%81%A0%E6%96%B9%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%8A%E5%BE%85%E3%81%A1%E3%81%97%E3%81%A6%E3%81%8A%E3%82%8A%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>他にもコードが浮かんだ方、コメントお待ちしております。</h3>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/kuniatsu/items/0e11332893e3744eb442" title="多次元配列の宣言 Javaの問題をTypeScriptにしてみる 4-4">
            多次元配列の宣言 Javaの問題をTypeScriptにしてみる 4-4
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/java">
                Java
              </a>
            </li>
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/typescript">
                TypeScript
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/kuniatsu/items/0e11332893e3744eb442#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-0e11332893e3744eb442" class="item-body markdownContent bordered">
        <p>この中からコンパイルエラーになるコードを全て選びなさい</p>

<p>A. int a[] = new int[2][3]<br>
B.int[] b = new int[2.3]<br>
C.int c[] = new int[2*3]<br>
D.int x = 2 , y=3;<br>
    int[] d = new int[x*y];<br>
E.int[][] e = new int[2][];<br>
F.int f[][] = new int[][3];</p>

<p>答えはABFです。</p>

<p>Aは、<br>
左辺１次元配列に右辺の２次元配列を代入しようとしているためコンパイルエラーとなります。</p>

<p>Bは、<br>
配列のインデックスに実数は使えません。よってコンパイルエラーとなります。</p>

<p>Fは、<br>
２次元目の要素を指定しているのに、１次元目の用を数を指定していないためコンパイルエラーになります。</p>

<p>これをそのままTypeScriptにすることはできません。<br>
jsの配列は実質javaのList構造で出来ているため、２次元配列の要素を確保して宣言することができません。</p>

<p>1次元配列であれば、new Array(1);のような形で宣言することができますが、２次元配列を作ることはできないため、<br>
var array:any = new Array(3);<br>
 for (var i = 0; i &lt; 3; i++) { <br>
    array[i] = new Array(2); <br>
}<br>
とすれば、3×2の２次元配列を作ることはできます。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/boomin/items/d4b4e1b5258a63fd6dd2" title="jsのグラフライブラリ52選 その2">
            jsのグラフライブラリ52選 その2
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/d3.js">
                d3.js
              </a>
            </li>
          
            <li>
              <a href="/tags/googlechartapi">
                GoogleChartAPI
              </a>
            </li>
          
            <li>
              <a href="/tags/graph">
                graph
              </a>
            </li>
          
            <li>
              <a href="/tags/c3.js">
                c3.js
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            1
          </li>
          <li>
            <a href="http://qiita.com/boomin/items/d4b4e1b5258a63fd6dd2#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-d4b4e1b5258a63fd6dd2" class="item-body markdownContent bordered">
        <p>だいぶほったらかしにしていましたが(^^;、気を取り直して、その2を書いてみたいと思います。</p>

<p><a href="http://qiita.com/yasaito/items/c08e5281b1a69dc4f6cf" id="reference-530b235e30817445f6d7">前回の記事</a>でも書きましたが、<strong>個人で触るので無料で使えるもの</strong> をコンセプトにして、<br>
触ってみたライブラリにコメントしていきたいと思います。</p>

<h2>
<span id="google-chart-api" class="fragment"></span><a href="#google-chart-api"><i class="fa fa-link"></i></a><a href="https://developers.google.com/chart/" rel="nofollow noopener" target="_blank">Google Chart API</a>
</h2>

<h3>
<span id="良かった点" class="fragment"></span><a href="#%E8%89%AF%E3%81%8B%E3%81%A3%E3%81%9F%E7%82%B9"><i class="fa fa-link"></i></a>良かった点</h3>

<h4>
<span id="商用でも無料" class="fragment"></span><a href="#%E5%95%86%E7%94%A8%E3%81%A7%E3%82%82%E7%84%A1%E6%96%99"><i class="fa fa-link"></i></a>商用でも無料</h4>

<p>言わずもがな、です。<br>
カッコいいグラフを描くとき、試してみたら有料だった。。。なんて話は、実際にありましたからね。</p>

<h4>
<span id="導入は容易" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5%E3%81%AF%E5%AE%B9%E6%98%93"><i class="fa fa-link"></i></a>導入は容易</h4>

<h3>
<span id="微妙な点" class="fragment"></span><a href="#%E5%BE%AE%E5%A6%99%E3%81%AA%E7%82%B9"><i class="fa fa-link"></i></a>微妙な点</h3>

<h4>
<span id="とにかく重い" class="fragment"></span><a href="#%E3%81%A8%E3%81%AB%E3%81%8B%E3%81%8F%E9%87%8D%E3%81%84"><i class="fa fa-link"></i></a>とにかく重い</h4>

<p>描画が重い！<br>
もちろん、使ったライブラリのVersionやらブラウザの種類、ブラウザのversion、一概には言えませんが、筆者の環境では描画がえらく重かったです。</p>

<h4>
<span id="アニメーションがなかった" class="fragment"></span><a href="#%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%8C%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a><strong><em>アニメーションがなかった</em></strong>
</h4>

<p>jsでグラフ描くなら、アニメーションをつけたかったな・・・・・<br>
最新のversionには入っているのかな。。。。？</p>

<h2>
<span id="d3js" class="fragment"></span><a href="#d3js"><i class="fa fa-link"></i></a><a href="https://d3js.org/" rel="nofollow noopener" target="_blank">D3.js</a>
</h2>

<h3>
<span id="良かった点-1" class="fragment"></span><a href="#%E8%89%AF%E3%81%8B%E3%81%A3%E3%81%9F%E7%82%B9-1"><i class="fa fa-link"></i></a>良かった点</h3>

<h4>
<span id="とにかく高機能" class="fragment"></span><a href="#%E3%81%A8%E3%81%AB%E3%81%8B%E3%81%8F%E9%AB%98%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>とにかく高機能</h4>

<p><a href="https://d3js.org/" rel="nofollow noopener" target="_blank">D3.js</a>のポイントは、これに尽きると言って過言ではないのではないでしょうか。<br>
書けるグラフの種類や、細かなチューニング。何でもできちゃいそうです。</p>

<h4>
<span id="導入に何も考えない" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5%E3%81%AB%E4%BD%95%E3%82%82%E8%80%83%E3%81%88%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>導入に何も考えない</h4>

<p>htmlファイルにこれだけ書けば、書きたい全てのグラフが描けます。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://d3js.org/d3.v4.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div></div>

<p>他のライブラリだと、書きたい機能によってjsファイルを事細かにimportしないと行けなかったりしますが、<br>
この一行で一通り使えるというのは気が楽ですね。</p>

<h3>
<span id="微妙な点-1" class="fragment"></span><a href="#%E5%BE%AE%E5%A6%99%E3%81%AA%E7%82%B9-1"><i class="fa fa-link"></i></a>微妙な点</h3>

<h4>
<span id="学習コストの高さ" class="fragment"></span><a href="#%E5%AD%A6%E7%BF%92%E3%82%B3%E3%82%B9%E3%83%88%E3%81%AE%E9%AB%98%E3%81%95"><i class="fa fa-link"></i></a>学習コストの高さ</h4>

<p>ちょっとグラフを描ければいい。。。。と思っているだけなら、<br>
<a href="https://d3js.org/" rel="nofollow noopener" target="_blank">D3.js</a>より他のライブラリのほうが導入が簡単な面があります。<br>
要するに、よほど確信をもって<a href="https://d3js.org/" rel="nofollow noopener" target="_blank">D3.js</a>のこのグラフを描きたいんだ！と思わないと、大変かも。</p>

<p>でも、グラフはカッコいいよね。。。</p>

<h4>
<span id="無駄に奇麗なサンプル" class="fragment"></span><a href="#%E7%84%A1%E9%A7%84%E3%81%AB%E5%A5%87%E9%BA%97%E3%81%AA%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a><a href="https://github.com/d3/d3/wiki/Gallery" rel="nofollow noopener" target="_blank">無駄に奇麗なサンプル</a>
</h4>

<p>こんなの描くことあるかな・・・・というサンプルたち。<br>
それよりも、動かすための実際のコードと並べておいてほしい。</p>

<h2>
<span id="c3js" class="fragment"></span><a href="#c3js"><i class="fa fa-link"></i></a><a href="http://c3js.org/" rel="nofollow noopener" target="_blank">C3.js</a>
</h2>

<h3>
<span id="良かった点-2" class="fragment"></span><a href="#%E8%89%AF%E3%81%8B%E3%81%A3%E3%81%9F%E7%82%B9-2"><i class="fa fa-link"></i></a>良かった点</h3>

<h4>
<span id="d3をお手軽に使える" class="fragment"></span><a href="#d3%E3%82%92%E3%81%8A%E6%89%8B%E8%BB%BD%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>D3をお手軽に使える</h4>

<p>D3.jsは敷居が高いな・・・と思ったら<a href="http://c3js.org/" rel="nofollow noopener" target="_blank">C3.js</a>ですね。<br>
D3.jsの機能を全部使えるわけではないですが、わかりやすい使い方で、使い始める敷居が低くなります。</p>

<h3>
<span id="微妙な点-2" class="fragment"></span><a href="#%E5%BE%AE%E5%A6%99%E3%81%AA%E7%82%B9-2"><i class="fa fa-link"></i></a>微妙な点</h3>

<h4>
<span id="d3jsの機能をすべて使えるわけではない" class="fragment"></span><a href="#d3js%E3%81%AE%E6%A9%9F%E8%83%BD%E3%82%92%E3%81%99%E3%81%B9%E3%81%A6%E4%BD%BF%E3%81%88%E3%82%8B%E3%82%8F%E3%81%91%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>D3.jsの機能をすべて使えるわけではない。</h4>

<p>不勉強だったら申し訳ないのですが、D3.jsのいろいろな種類のグラフ、<br>
全てを使えるわけではなさそうでした。</p>

<p>今日はここまで。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-like unlike"></i>
      </div>
    
    <a href="http://qiita.com/ossan-engineer" title="ossan-engineer">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/18685/profile-images/1473682498" class="user-icon" title="ossan-engineer">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/ossan-engineer">
            ossan-engineer
          </a>
        </span>
        
            が<span>いいね</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/itagakishintaro/items/bfc7d1d332935b380c46" title="SPAをつくるために使ったものたち">
            SPAをつくるために使ったものたち
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/react">
                React
              </a>
            </li>
          
            <li>
              <a href="/tags/material-ui">
                material-ui
              </a>
            </li>
          
            <li>
              <a href="/tags/googlesheetsapi">
                GoogleSheetsAPI
              </a>
            </li>
          
            <li>
              <a href="/tags/googlevisionapi">
                GoogleVisionAPI
              </a>
            </li>
          
            <li>
              <a href="/tags/progressivewebapps">
                ProgressiveWebApps
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            28
          </li>
          <li>
            <a href="http://qiita.com/itagakishintaro/items/bfc7d1d332935b380c46#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-bfc7d1d332935b380c46" class="item-body markdownContent bordered">
        
<h1>
<span id="つくっているspa" class="fragment"></span><a href="#%E3%81%A4%E3%81%8F%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bspa"><i class="fa fa-link"></i></a>つくっているSPA</h1>

<p><a href="https://sakepedia.herokuapp.com/" rel="nofollow noopener" target="_blank">Sakepedia</a>という日本酒の情報検索・登録・共有サイトです。<br>
OSSのSPA(Single Page Application)で、コンセプトとかソースはGitHubをみてください。</p>

<p><a href="https://github.com/itagakishintaro/Sakepedia" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/itagakishintaro/Sakepedia</a></p>

<p>ここでは、使っているものとその用途を使ってみた感想とともに簡単に紹介しようと思います。</p>

<h2>
<span id="spaとは" class="fragment"></span><a href="#spa%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>SPAとは</h2>

<p>SPAとはSingle Page Applicationのことで、私は2014年のJolt Awardsをとった書籍「<a href="http://amzn.asia/7M9OjCb" rel="nofollow noopener" target="_blank">シングルページWebアプリケーション</a>」で知りました。<br>
この本を読んで最初につくったのは、<a href="http://s-ita.net/99colors/" rel="nofollow noopener" target="_blank">99colors</a>というカラーコードを共有するWebアプリ。<br>
SPA用のフレームワークとかはなかった（ように思う）ので、特にフレームワークは使っていませんが、<a href="https://sakepedia.herokuapp.com/" rel="nofollow noopener" target="_blank">Sakepedia</a>では、フレームワークを使っています。</p>

<h2>
<span id="アプリの構成概要" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E6%A7%8B%E6%88%90%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>アプリの構成概要</h2>

<p>サーバーサイドはRESTのWeb APIでデータの操作を提供するだけです。<br>
Node.js, Express, MongoDBを使っています。</p>

<p>クライアントサイドは、React/Reduxを使っていて、UIはmaterial-uiを使っています。</p>

<p>その他、Google Vision APIで画像から文字おこしをしたり、Google Sheets APIを使ってGoogle Spread SheetsをDBのように使っています。<br>
あと、まだ途中ですが、Googleが提唱しているProgressive Web Appsにしたいと思っています。</p>

<h1>
<span id="使っているものたち" class="fragment"></span><a href="#%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%82%82%E3%81%AE%E3%81%9F%E3%81%A1"><i class="fa fa-link"></i></a>使っているものたち</h1>

<h2>
<span id="インフラ" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9"><i class="fa fa-link"></i></a>インフラ</h2>

<h3>
<span id="github" class="fragment"></span><a href="#github"><i class="fa fa-link"></i></a><a href="https://github.com/" rel="nofollow noopener" target="_blank">GitHub</a>
</h3>

<p>いわずもがなのGitのクラウドサービス。<br>
もはや、これがなくなると本当に困ってしまう。<br>
HTML5だけでつくったものは、<a href="https://pages.github.com/" rel="nofollow noopener" target="_blank">GitHub Pages</a>で公開していますが、今回はサーバーサイドがあるので次に紹介するHerokuで公開しています。</p>

<h3>
<span id="heroku" class="fragment"></span><a href="#heroku"><i class="fa fa-link"></i></a><a href="https://www.heroku.com" rel="nofollow noopener" target="_blank">Heroku</a>
</h3>

<p>SalesForceに買収された最も有名なPaaSの1つです。<br>
採用理由は、単純に、無料で使えて昔から使っていたからです。<br>
個人的な注意点としては、次の点です。</p>

<ul>
<li><p><a href="https://www.heroku.com/pricing" rel="nofollow noopener" target="_blank">無料枠</a><br>
すべてのアプリ合計で1000時間/月まで無料。<br>
私の場合は、今のところ1つのアプリだけを公開しているので無料枠で十分です。</p></li>
<li><p>アクセスしないと寝る<br>
一定時間アクセスしないと、サーバーが寝てしまい、寝てしまった後の最初のアクセスが遅くなるので困ります。<br>
しかし、常に起こしておくための方法があって、ググればすぐにできるので困りません。</p></li>
</ul>

<h2>
<span id="サーバーサイド" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%B5%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>サーバーサイド</h2>

<p>サーバーサイドはRESTのWeb APIだけなので薄いです。<br>
<a href="http://qiita.com/itagakishintaro/items/a1519998a91061cbfb1e" id="reference-f59e6865afff2f786074">Node.js+Express+MongoDBでREST APIをつくる</a>をみていただければ、初心者でもつくれると思います。</p>

<h3>
<span id="nodejs" class="fragment"></span><a href="#nodejs"><i class="fa fa-link"></i></a><a href="https://nodejs.org" rel="nofollow noopener" target="_blank">Node.js</a>
</h3>

<p>私の場合、Node.js(+Express), PHP(CakePHP), Ruby(on Rails)が選択肢としてあったのですが、今回はRESTのWeb APIだけなので、サーバーサイドは薄いし、クライアントがJavaScriptなので、一番楽だろうという判断でNode.jsにしました。</p>

<h3>
<span id="express" class="fragment"></span><a href="#express"><i class="fa fa-link"></i></a><a href="http://expressjs.com/" rel="nofollow noopener" target="_blank">Express</a>
</h3>

<p>正直、Node.jsをはじめたときにセットで入れていたので、どこからがExpressなのかという感じです。<br>
express-generatorを使ってベースを作れるのが便利。</p>

<h3>
<span id="mongodb" class="fragment"></span><a href="#mongodb"><i class="fa fa-link"></i></a><a href="http://www.mongodb.org/" rel="nofollow noopener" target="_blank">MongoDB</a>
</h3>

<p>MongoDBのよいところはスキーマレスなところ。<br>
仕様なんてなく、思いつきで開発するため、かっちりとしたDBだと色々と面倒なので、自由度が高いMongoDBにしました。<br>
そういう理由なので、Mongooseは使っていません。<br>
使ってみた感想としては、SQLだと簡単なことが調べないとできなかったり、<a href="https://mongodb.github.io/node-mongodb-native/" rel="nofollow noopener" target="_blank">MongoDB Node.JS Driver</a>がMongoDBでできることが全てできるわけじゃなかったり（たぶん）するのが困りました。<br>
仕様変更は楽だけど、ちょっと複雑なクエリーを使いたいときは、ちょっと大変という感じです。</p>

<h2>
<span id="クライアントサイド" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>クライアントサイド</h2>

<p>クライアントサイドのフレームワークは色々でていますが、コンポーネント志向という点では共通しているので、どれかを学ぶと他も使えるようになるという感じがしました。<br>
今回はReactを使いましたが、Angular, Polymer, Vue.js, Riot.jsのどれかを学ぶと、他も入りやすくなるはずです。<br>
どれもさわってみた程度ですが、個人的には次の印象です。</p>

<ul>
<li>React: Facebookが開発しているので安心できるし、思想もしっかりしている。</li>
<li>Angular: Googleなので安心。1系は思想が新しくないので、古いエンジニアにはかえってなじみやすい。2系はTypeScriptが基本になっているので、個人的に敬遠した（ES6がいい派）。</li>
<li>Vue.js: ライトウェイトでよい。でも、使いこんでいって、込み入ったことをしたいときに大丈夫かちょっと心配（杞憂か？）。</li>
<li>Riot.js: 個人的にはこれが一番バランスがいいと思う。ReactはCSSコーダーと分業しにくい問題が解決できるので、こっちにしておけばよかったかなぁと思っている。</li>
</ul>

<h3>
<span id="react" class="fragment"></span><a href="#react"><i class="fa fa-link"></i></a><a href="https://facebook.github.io/react/" rel="nofollow noopener" target="_blank">React</a>
</h3>

<p>Angular 1系を使ったことがあったので、最初はAngular 1系か、がんばって2系にするか悩んでいたのですが、ちょうどそのとき、「これからはReactで決まり！」的な記事をいろいろ見てしまったのでReactにしました。<br>
使ってみた感想は次のとおりです。</p>

<ul>
<li>webpackとかの開発環境準備がめんどくさい</li>
<li>JSXがはじめは気持ち悪い</li>
<li>ライフサイクルとVirtual DOMをちゃんと理解できてない（あれ、と思うことがたまにある）</li>
</ul>

<p>開発環境は<a href="https://www.reactstarterkit.com/" rel="nofollow noopener" target="_blank">react starter kit</a>がでたりしているので、JSXが大丈夫なら、とてもよいと思います。</p>

<h3>
<span id="redux" class="fragment"></span><a href="#redux"><i class="fa fa-link"></i></a><a href="https://github.com/reactjs/redux" rel="nofollow noopener" target="_blank">Redux</a>
</h3>

<p>正直、Reactとセット的な感覚で使ってしまいました。<br>
今思うと、ReduxなしでReactだけでもできたのかな？と思ったりもします。<br>
使ってみた感想は次のとおりです。</p>

<ul>
<li>ComponentとContainerの違いがピンとこなかった</li>
<li>コンポーネント間でのデータの受け渡しでとまどった</li>
</ul>

<h3>
<span id="material-ui" class="fragment"></span><a href="#material-ui"><i class="fa fa-link"></i></a><a href="http://www.material-ui.com/" rel="nofollow noopener" target="_blank">material-ui</a>
</h3>

<p>Reactで使えるCSSフレームワークを探して、よさそうだったので採用しました。<br>
使ってみた感想は、次のとおり。</p>

<ul>
<li>CSS in JSではなく、CSS Modulesベースにしてほしかった</li>
<li>スマホ前提的な感じだけど、PCでも使うので、レスポンシブにしてほしかった</li>
</ul>

<p>CSS in JSは慣れると気にならないのですが、なんとなく罪悪感があります。。。</p>

<h2>
<span id="サービスapi" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9api"><i class="fa fa-link"></i></a>サービス、API</h2>

<h3>
<span id="google-vision-api" class="fragment"></span><a href="#google-vision-api"><i class="fa fa-link"></i></a><a href="https://cloud.google.com/vision/?hl=ja&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=2015-q1-cloud-japac-jp-vision-bkws-freetrial-jap&amp;utm_term=%2Bgoogle%20%2Bvision%20%2Bapi&amp;gclid=Cj0KEQiAsf_BBRDMpoOHw4aSq4QBEiQAPm7DL9ZL6ehV-rbrVKn8TmzPoDCwPE4Qq9i67Fb3il5FTj8aAg7y8P8HAQ" rel="nofollow noopener" target="_blank">Google Vision API</a>
</h3>

<p>HTML5カンファレンスで知ったので、使ってみました。<br>
用途は日本酒のラベルから文字おこしをするというもの。<br>
日本酒のラベルに書いてある説明を入力するのは結構手間なので、使ってみると結構便利でした。<br>
1000回/月まで無料なので、本当にありがたい。</p>

<h3>
<span id="google-sheets-api" class="fragment"></span><a href="#google-sheets-api"><i class="fa fa-link"></i></a><a href="https://developers.google.com/sheets/?hl=ja" rel="nofollow noopener" target="_blank">Google Sheets API</a>
</h3>

<p>ITに詳しくない人も含めて、みんなで編集したいし、みんなに使ってほしいデータ。<br>
データの量はそれほど多くないけど、画面のUIで操作するのは大変。<br>
そんなときはやっぱりスプレッドシートですよね。<br>
Google Docsには「提案-&gt;承認」の機能があるのですが、Spread Sheetにはないので、次のようにして手動で「提案-&gt;承認」を実現しています。</p>

<ul>
<li>みんなが編集できるように公開したブックは、編集があるとメールで通知するようにする</li>
<li>アプリで使うものは、公開用とは別にプライベートにして、みんなの編集が変なものでなければ手動で反映する。</li>
</ul>

<p>あと、V4になってAPIを使うのが面倒になった気がしました。<br>
今回は、APIは単純なgetしか使わないのに、OAuth認証が面倒で、以外に時間がかかりました。<br>
V3のURLたたくだけのAPIも使えるのですが、そのうち使えなくなったら嫌なのでV4のAPIを使いました。</p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<h3>
<span id="progressive-web-apps" class="fragment"></span><a href="#progressive-web-apps"><i class="fa fa-link"></i></a><a href="https://developers.google.com/web/fundamentals/getting-started/codelabs/your-first-pwapp/?hl=ja" rel="nofollow noopener" target="_blank">Progressive Web Apps</a>
</h3>

<p>Googleが提唱しているHTML5のService Workerを使ったネイティブアプリのようにWebアプリを使えるようにする考え方です。<br>
HTML5カンファレンスで知りました。<br>
Chromeしか完全には対応していないので、まだまだですが、これらが普通になるとかなりいいと思います。</p>

<p>実際にやってみたのは次。</p>

<ul>
<li>ホームに追加</li>
<li>Cache（オフラインで使えるように）</li>
</ul>

<p>ホームに追加は簡単なのでおすすめです。<br>
Cacheは実装はそれほど難しくないですが、どの<a href="https://github.com/kuu/the-offline-cookbook-ja/blob/master/ja.md" rel="nofollow noopener" target="_blank">戦略</a>にするべきか結構悩みます。<br>
あと、テストもしにくいし、対応していないブラウザが多いので、正直、今時点ではあまり使えないという印象。</p>

<p>これから取り入れたいと思っているのは次。</p>

<ul>
<li>Push通知</li>
</ul>

<h3>
<span id="phonegap" class="fragment"></span><a href="#phonegap"><i class="fa fa-link"></i></a><a href="http://phonegap.com/" rel="nofollow noopener" target="_blank">PhoneGap</a>
</h3>

<p>今は使ってませんが、前に使って便利だったので、そのうち使ってモバイルアプリにしてもいいかなと思っています。</p>

<p><a href="http://qiita.com/itagakishintaro/items/60dc2138a6b64e4dda89" id="reference-e5a6c767fbdcd413efaf">PhoneGap Builderを使ってHTMLでモバイルアプリを作る</a></p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/eiei19/items/b2ec92d07ed3fad78053" title="30 Days of React を意訳していく Day7 - Lifecycle Hooks">
            30 Days of React を意訳していく Day7 - Lifecycle Hooks
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/reactjs">
                reactjs
              </a>
            </li>
          
            <li>
              <a href="/tags/react">
                React
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/eiei19/items/b2ec92d07ed3fad78053#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-b2ec92d07ed3fad78053" class="item-body markdownContent bordered">
        
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p><a href="https://www.fullstackreact.com/30-days-of-react/" rel="nofollow noopener" target="_blank">Fullstack React: 30 Days of React</a> の意訳です。</p>

<p>ちょいちょい読んでるのでせっかくなので訳そうと思った次第。飽きるまで続きます。かなり意訳です。</p>

<ul>
<li><a href="http://qiita.com/eiei19/items/933870b8a1d746a279f7" id="reference-ba9910772e7509275ab7">Day1 - What is React?</a></li>
<li><a href="http://qiita.com/eiei19/items/fd95b38ca62fbea38e7d" id="reference-9cc22e4e4e2f2ac69bb5">Day2 - What is JSX?</a></li>
<li><a href="http://qiita.com/eiei19/items/e0aea709bcfd74fccc3a" id="reference-b4611d8d759238b90465">Day3 - Our First Components</a></li>
<li><a href="http://qiita.com/eiei19/items/a0cce56572d65cf35794" id="reference-6e58811a255291bd240f">Day4 - Complex Components</a></li>
<li><a href="http://qiita.com/eiei19/items/b5c7c98943bfe78b8d79#_reference-585457072224a707cafd" id="reference-22abb81bcdb69be8f69f">Day5 - Data-Driven Components</a></li>
<li><a href="http://qiita.com/eiei19/items/fe6915d276bf840cb3ed#_reference-91300993aeab89e9c2e2" id="reference-75bc80893ba7a715e4a0">Day6 - State</a></li>
</ul>

<p>※補足: ってなってるのは、私の補足や思ったことなどです</p>

<h1>
<span id="本編" class="fragment"></span><a href="#%E6%9C%AC%E7%B7%A8"><i class="fa fa-link"></i></a>本編</h1>

<p><a href="https://www.fullstackreact.com/30-days-of-react/day-7/" class="autolink" rel="nofollow noopener" target="_blank">https://www.fullstackreact.com/30-days-of-react/day-7/</a></p>

<h2>
<span id="lifecycle-hooks" class="fragment"></span><a href="#lifecycle-hooks"><i class="fa fa-link"></i></a>Lifecycle Hooks</h2>

<p>Day7ではReactで使えるLifecycle Hooksについて見ていきます。これらがなぜ便利なのか、どんなときに使うべきなのを説明していきます。</p>

<p>Day6まででいろいろなことを学びReactの基礎は習得できたと思います。今回は実装から少し離れて、コンポーネントがアプリの中でどのように生きているのか、つまり、コンポーネントのライフサイクルについて説明します。</p>

<p>Reactがアプリをマウントするとき、様々なタイミングで実行されるフックを提供してくれます。フックを使うためには、コンポーネント上に適切な関数を定義する必要があります。それでは見ていきましょう。<br>
※補足: 他のフレームワークでもある、will(before)XXXX、did(after)XXXX、のようなフックの話です。</p>

<h2>
<span id="componentwillmount--componentdidmount" class="fragment"></span><a href="#componentwillmount--componentdidmount"><i class="fa fa-link"></i></a>componentWillMount() / componentDidMount()</h2>

<p>Reactでは仮想DOMを使っているので、ページロード直後にDOM Readyになっている想定で処理を書くことができません。マウント前後に実行したい処理がある場合は、２つの関数 <code>componentWillMount() / componentDidMount()</code> が使えます。</p>

<blockquote>
<p>マウントとは？<br>
Reactでは実際のDOMではなく仮想表現によってDOMを扱っていて、Reactの管理しているメモリ内にそれらを管理しています。私たちがマウントという言葉を使う時は、この仮想DOMを実際のDOMに変換する作業のことを指します。</p>
</blockquote>

<p>これはデータを取得して表示するようなコンポーネントを作るときに役立ちます。ずっと使ってきたアクティビティトラッカーを使って、githubのアクティビティを表示してみましょう。コンポーネントが表示さえるときだけに、データがロードされるようにしたいですよね。</p>

<p>アクティビティリストのコードを思い出してください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Content extends React.Component {
  render() {
    const {activities} = this.props; // ES6 destructuring

    return (
      &lt;div className="content"&gt;
        &lt;div className="line"&gt;&lt;/div&gt;

        {/* Timeline item */}
        {activities.map((activity) =&gt; (
          &lt;ActivityItem
            activity={activity} /&gt;
        ))}

      &lt;/div&gt;
    )
  }
}
</pre></div></div>

<p>github.com events api からデータを取得して、stateにデータをいれてそれらを表示するようにContentコンポーネントを改良してみましょう。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/4547/6e417c85-9cba-e965-e467-497710565346.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/4547/6e417c85-9cba-e965-e467-497710565346.png" alt="4836c34636f46f40f29f6d7cce40c049.png"></a></p>

<p>Day6でやったように、stateを使ってコンポーネントをステートフルにしていきます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Content extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      activities: []
    }
  }

  // ...
}
</pre></div></div>

<p>ここで、コンポーネントの準備が整ったら、HTTPリクエストを飛ばしたいと思うはずです。<code>componentWillMount（）</code>（または<code>componentDidMount（）</code>）をコンポーネントに定義することによって、ReactはDOMにマウントする直前にメソッドを実行します。これはGETリクエストするのにベストな場所です。</p>

<p>ではHTTPリクエストを飛ばすようにコンポーネントを更新しましょう。小さなリストを表示したいだけなので、4つだけ取得します。</p>

<blockquote>
<p>数日後にAJAXリクエストについては学ぶので、いったん静的なjsonデータがあるものとして、実装に集中しましょう。</p>
</blockquote>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Content extends React.Component {
  // ...
  componentWillMount() {
    this.setState({activities: data});
  }
  // ...
}
</pre></div></div>

<p>コンポーネントから何も変更を加えなくても動作することに気をつけてください。</p>

<h2>
<span id="componentwillupdate--componentdidupdate" class="fragment"></span><a href="#componentwillupdate--componentdidupdate"><i class="fa fa-link"></i></a>componentWillUpdate() / componentDidUpdate()</h2>

<p>レンダリングの直前もしくは直後になにかしらの処理を行いたい場合があります。例えば、コンポーネントのpropsが変更されたときに、特定の関数セットを実行したいときなどです。そのような場合に、<code>componentWillUpdate()</code>は適切なフックです。（内部で<code>this.setState()</code>を呼び出すと無限ループになるので注意）</p>

<h2>
<span id="componentwillreceiveprops" class="fragment"></span><a href="#componentwillreceiveprops"><i class="fa fa-link"></i></a>componentWillReceiveProps()</h2>

<p>新しいpropsを受け取ったときに呼ばれるメソッドです。これはコンポーネントが新しいpropsを受け取ったときに呼ばれる最初のメソッドです。特定のpropsに基づいてstateの値を設定したり更新したりするのに使うことができます。</p>

<blockquote>
<p>ここで注意すべきは、 componentWillReceiveProps() が呼ばれてもpropsの値が変更されているとは限らないというこです。値が変更されているかチェックするのはよい考えです。</p>
</blockquote>

<p>例として、リフレッシュボタンをContentコンポーネントに追加してみましょう。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/4547/e8aa26e5-5b92-cbe7-93cf-ebd6a566fbb2.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/4547/e8aa26e5-5b92-cbe7-93cf-ebd6a566fbb2.png" alt="787c6badf389dfa54bb52149666c9390.png"></a></p>

<p>componentWillReceiveProps() を使ってデータの再読込をコンポーネントに依頼します。このコンポーネントはステートフルなので、コンポーネントのpropsを更新するのではなく、stateを使って更新するようにしたいです。componentWillReceiveProps()を使ってデータを更新したいことがコンポーネントに伝えることができます。</p>

<p>コンテンツ要素を更新するように指示する、requestRefreshとうboolean props をContentコンポーネントに渡すボタンを追加してみましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Container extends React.Component {
  constructor(props) {
    super(props);

    this.state = {refreshing: false}
  }

  // Bound to the refresh button
  refresh() {
    this.setState({refreshing: true})
  }

  // Callback from the `Content` component
  onComponentRefresh() {
    this.setState({refreshing: false});
  }

  render() {
    const {refreshing} = this.state;
    return (
      &lt;Panel&gt;
        &lt;Header title="Github activity" /&gt;
        {/* refreshing is the component's state */}
        &lt;Content
          onComponentRefresh={this.onComponentRefresh.bind(this)}
          requestRefresh={refreshing}
          fetchData={fetchEvents} /&gt;
        {/* A container for styling */}
        &lt;Footer&gt;
          &lt;button onClick={this.refresh.bind(this)}&gt;
            &lt;i className="fa fa-refresh" /&gt;
            Refresh
          &lt;/button&gt;
        &lt;/Footer&gt;
      &lt;/Panel&gt;
    )
  }
}
</pre></div></div>

<p>新しい<code>requestRefresh</code>プロパティを使って、値を更新することができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Content extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      loading: false, // &lt;~ set loading to false
      activities: []
    }
  }

  // Update the data when the component mounts
  componentDidMount() {
    this.updateData();
  }

  componentWillReceiveProps(nextProps) {
    // Check to see if the requestRefresh prop has changed
    if (nextProps.requestRefresh !== this.props.requestRefresh) {
      this.setState({loading: true}, this.updateData);
    }
  }

  // Call out to github data and refresh directory
  updateData() {
    this.setState({
      loading: false,
      activities: data
    }, this.props.onComponentRefresh);
  }

  render() {
    const {loading, activities} = this.state;

    return (
      &lt;div className="content"&gt;
        &lt;div className="line"&gt;&lt;/div&gt;
        {/* Show loading message if loading */}
        {loading &amp;&amp; &lt;div&gt;Loading&lt;/div&gt;}
        {/* Timeline item */}
        {activities.map((activity) =&gt; (
          &lt;ActivityItem
            activity={activity} /&gt;
        ))}

      &lt;/div&gt;
    )
  }
}
</pre></div></div>

<p>※補足1： ちょっとずつソースが長くなって混乱してくると思いますが、要は親コンポーネントから子コンポーネントに何か伝える場合は必ずpropsを使えという思想で、そのpropsの変化に呼応して、子コンポーネントのstateを変化させる場合に上記のコールバックを使えってことです。</p>

<p>※補足2: さらっと書かれていますが、<code>onComponentRefresh</code>という子コンポーネントから呼ばれる、コールバック関数が導入されてます。propsで値を子に私、何か子から返したい場合は、コールバック関数を使うという感じっぽいですね。</p>

<h2>
<span id="componentwillunmount" class="fragment"></span><a href="#componentwillunmount"><i class="fa fa-link"></i></a>componentWillUnmount()</h2>

<p>コンポーネントがアンマウントされる前に、ReactはcomponentWillUnmount（）を呼び出します。 ここで、タイムアウトのクリア、データのクリア、Webソケットの切断など、必要な可能性のあるクリーンアップ処理を実行すると良いでしょう。</p>

<p>例えば、前回のクロックコンポーネントでは、毎秒呼び出されるタイムアウトを設定しました。 コンポーネントがアンマウントする準備ができたら、このタイムアウトをクリアして、すでに存在しないコンポーネントのタイムアウトを継続しないようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Clock extends React.Component {
  constructor(props) {
    super(props);
    this.state = this.getTime();
  }

  componentDidMount() {
    this.setTimer();
  }

  setTimer() {
    this.timeout = setTimeout(this.updateClock.bind(this), 1000);
  }

  updateClock() {
    this.setState(this.getTime, this.setTimer);
  }

  getTime() {
    const currentTime = new Date();
    return {
      hours: currentTime.getHours(),
      minutes: currentTime.getMinutes(),
      seconds: currentTime.getSeconds(),
      ampm: currentTime.getHours() &gt;= 12 ? 'pm' : 'am'
    }
  }

  // ...
}
</pre></div></div>

<p>クロックコンポーネントがアンマウントされるとき、コンポーネントで設定したsetTimer（）をクリアします。 componentWillUnmount（）で、このクリーンアップを処理しましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>class Clock extends React.Component {
  // ...
  componentWillUnmount() {
    if (this.timeout) {
      clearTimeout(this.timeout);
    }
  }
  // ...
}
</pre></div></div>

<p>いくつかのライフサイクルフックについて説明しました。実際にアプリを作る際に、これらを良く使うことになるので、これらのメソッドについてよく知り、Reactアプリの中でどのような役割をしていくのかを良く知っておくと良いでしょう。</p>

<p>このセクションでは、Reactのコールバックとそれにこじつけ子コンポーネントから呼ばれる親コンポーネントのコールバックについて学びました。Day8では、チームやアプリケーション間でコンポーネントを共有するときの、コンポーネントのprops APIを文書化する方法を見ていきます。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-like unlike"></i>
      </div>
    
    <a href="http://qiita.com/ossan-engineer" title="ossan-engineer">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/18685/profile-images/1473682498" class="user-icon" title="ossan-engineer">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/ossan-engineer">
            ossan-engineer
          </a>
        </span>
        
            が<span>いいね</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/soyanchu/items/f940a9c86b3122f99c41" title="Web API: The Good Partsを読んだので「レスポンスデータの設計」についてまとめた">
            Web API: The Good Partsを読んだので「レスポンスデータの設計」についてまとめた
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/api">
                api
              </a>
            </li>
          
            <li>
              <a href="/tags/json">
                JSON
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            126
          </li>
          <li>
            <a href="http://qiita.com/soyanchu/items/f940a9c86b3122f99c41#comments">
              <i class="fa fa-comment-o"></i>
              3
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-f940a9c86b3122f99c41" class="item-body markdownContent bordered">
        
<h2>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h2>

<p>APIの勉強のために、<a href="http://www.amazon.co.jp/Web-API-The-Good-Parts/dp/4873116864" rel="nofollow noopener" target="_blank">Web API: The Good Parts</a>を読みました。平易な日本語で書いてあるので、読みやすかったです。<br>
とはいえ、何度も本を読み返すのは大変なので、自分用まとめも兼ねて書こうと思った次第です。</p>

<p>1個1個まとめていくと結構な量があるので今回は「レスポンスデータの設計」についてまとめました。<br>
本でいうと3章に書いてあります。</p>

<h2>
<span id="この記事も参考に" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%82%82%E5%8F%82%E8%80%83%E3%81%AB"><i class="fa fa-link"></i></a>この記事も参考に</h2>

<p>Web API: The Good Partsの他のまとめ記事もここに載せておきます。</p>

<ul>
<li>2.2: <a href="http://qiita.com/soyanchu/items/5ca902a7353bb08b7f12" id="reference-1d27b4e668bd8e08d65b">Web API: The Good Partsを読んだので「良いURI」についてまとめた</a>
</li>
<li>2.6: <a href="http://qiita.com/soyanchu/items/244ab3a35acf4dbf0030" id="reference-2328a1b0dd567eb933e9">Web API: The Good Partsを読んだので「OAuthの仕組み」についてまとめた</a>
</li>
<li>4章: <a href="http://qiita.com/soyanchu/items/e2989c0f40fd79169bf6" id="reference-905e31ad274581e3a8ef">Web API: The Good Partsを読んだので「HTTPの仕様」についてまとめた</a>
</li>
<li>5章: <a href="http://qiita.com/soyanchu/items/34f8e164c24f044e80a3" id="reference-5d5682d201db0ffe4fde">Web API: The Good Partsを読んだので「設計変更しやすいWeb API」についてまとめた</a>
</li>
</ul>

<p>記事を書く順番は章ごとではなく結構バラバラです。</p>

<h2>
<span id="レスポンスデータはプログラムで処理しやすいものにする" class="fragment"></span><a href="#%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%A7%E5%87%A6%E7%90%86%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E3%82%82%E3%81%AE%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>レスポンスデータはプログラムで処理しやすいものにする</h2>

<p>Web APIはHTMLの代わりによりプログラムで処理をしやすいデータ形式を返すWebページの一種なので、レスポンスデータはできるかぎりプログラムで処理をしやすいものにする必要があります。<br>
どうすればよりプログラムで処理をしやすいレスポンスデータとなるか(設計)についてまとめていきます。</p>

<h2>
<span id="データフォーマット" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>データフォーマット</h2>

<p>まずどういうデータフォーマットにするか考えます。<br>
具体的に言うとJSONやXMLのことですね。</p>

<p>実際のところ昨今はJSONにデフォルトで対応し、需要や必要があればXMLに対応するというのがスタンダードのようです。<br>
JSONがデータフォーマットのデファクトスタンダードになっていて、主要なWebサービスでもJSONのみ対応か、JSON+XMLがほとんどになっています。</p>

<p>JSONがXMLより広まった主な理由は</p>

<ul>
<li>JSONのほうがシンプルで同じデータを表すのにサイズが小さくてすむ</li>
<li>Webの世界においてはクライアントのデフォルト言語であるJavaScriptとの相性がとてもよい</li>
</ul>

<p>といった理由があげられます。個人的には特に後者はJavaScriptJSONのほうがXMLより扱いやすかったので非常に納得がいくものです。</p>

<h3>
<span id="指定方法" class="fragment"></span><a href="#%E6%8C%87%E5%AE%9A%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>指定方法</h3>

<p>データフォーマットの指定方法には一般的に3つの方法が使われています。</p>

<ul>
<li>クエリパラメータを使う</li>
<li>拡張子を使う</li>
<li>リクエストヘッダでメディアタイプを指定する</li>
</ul>

<p>具体的には以下の様な形式です。</p>

<div class="code-frame" data-lang="クエリパラメータ"><div class="highlight"><pre>https://api.example.com/v1/users?format=xml
</pre></div></div>

<div class="code-frame" data-lang="拡張子"><div class="highlight"><pre>https://api.example.com/v1/users.json
</pre></div></div>

<div class="code-frame" data-lang="リクエストヘッダ"><div class="highlight"><pre>GET /v1/users
HOST: api.example.com
Accept: application/json
</pre></div></div>

<p>どれを採用するかは好みによります。<br>
リクエストヘッダが一番行儀の良い書き方となりますが、やや敷居が高いという点があります。<br>
主要なWeb ServicesでのAPIの使われた方を見てみると、リクエストヘッダはほぼ採用されず、クエリパラメータを使う方法が最もよく使われています。</p>

<p>筆者によれば、1つだけを選ぶならURIでクエリパラメータを使う方法、複数選ぶならクエリパラメータを使う方法とリクエストヘッダでメディアタイプを指定する方法をサポートするそうです。<br>
理由には、クエリパラメータは初心者にもやさしい方法かつ省略可能という点、URIをリソースとしてみなした時にもあっているということがあげられます。</p>

<h2>
<span id="データの内部構造の考え方" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%86%85%E9%83%A8%E6%A7%8B%E9%80%A0%E3%81%AE%E8%80%83%E3%81%88%E6%96%B9"><i class="fa fa-link"></i></a>データの内部構造の考え方</h2>

<p>データのフォーマットを決めたら、どんなデータを返すかを決めていきます。<br>
まず考えるべきことは、 <strong>APIのアクセス回数がなるべく減るようにすること</strong> です。そのためにはそれぞれのAPIの利用場面(ユースケース)をきちんと考えることが重要になります。</p>

<p>例えば、ソーシャルネットワークの友人一覧を取得するAPIについて考えてみます。<br>
その時APIの返す結果が以下の様だったらどうでしょうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>{
    "friends": [
        100,
        500,
        700,
        ...
    ]
}
</pre></div></div>

<p>友達のIDだけを返しているので、データサイズは確かに小さくなっています。<br>
しかし実際の利用場面を考えてみましょう。<br>
クライアント側ではIDだけ表示したいということはないでしょう。<br>
名前やサムネイル画像、性別などの情報が必要になると思います。<br>
もしAPIがIDだけを返すようなものだったら、最低2回APIにアクセスする必要が出てきてしまいます。</p>

<p>ですので、例えば以下のようにすると使いやすいでしょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>{
    "friends": [
        {
            "id": 200,
            "name": "Taro Tanaka",
            "profileIcon": "http://image.example.com/profile/200.png",
            ...
        },
        {
            "id": 400,
            "name": "Hanako Yamada"
            "profileIcon": "http://image.example.com/profile/400.png",
            ...
        }
    ]
}
</pre></div></div>

<p>WebAPIはその名の通りアプリケーションのインターフェイスであるので、特性を踏まえた上で利用者が使いやすい構造を検討するべきです。<br>
できるかぎり少ないアクセス回数ですむAPI設計を心がけるようにしましょう。</p>

<h3>
<span id="レスポンスの内容をユーザーが選べるようにする" class="fragment"></span><a href="#%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%AE%E5%86%85%E5%AE%B9%E3%82%92%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%8C%E9%81%B8%E3%81%B9%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>レスポンスの内容をユーザーが選べるようにする</h3>

<p>先ほどの良い例のようにすれば何度も叩く必要はなくなりますが、今度は必要以上に大量のデータをクライアントが受け取らなくてはならなくなってしまいます。<br>
たとえば情報として、ユーザーの名前とアイコンだけ必要としているのに、他の情報(職歴や出身地など)も一緒にとってきたらその分データが大きくなってしまいます。</p>

<p>この時によく取られる手法が、取得する項目を <strong>利用者が選択可能</strong>にするというものです。クエリパラメータを使って、たとえばユーザー情報のうち名前と年齢を取得したい、といったことを指定することができるようにします。</p>

<div class="code-frame" data-lang="ex"><div class="highlight"><pre><span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">api</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="mi">123</span><span class="sc">?f</span><span class="n">ields</span><span class="p">=</span><span class="n">name</span><span class="p">,</span><span class="n">age</span>
</pre></div></div>

<p>さまざまなAPIがこのようなフィールド名に対応していて、クエリパラメータを省略した場合は全部返すようになっていたりもします。<br>
あらかじめいくつかの取得する項目の量の異なるセットを用意しておいて、その名前を指定させるという方法があります。<br>
このセットのことをレスポンスグループとAmazonのProduct Advertising APIでは呼んでいます。</p>

<h3>
<span id="エンベロープ" class="fragment"></span><a href="#%E3%82%A8%E3%83%B3%E3%83%99%E3%83%AD%E3%83%BC%E3%83%97"><i class="fa fa-link"></i></a>エンベロープ</h3>

<p>続いてデータ全体の構造について考えます。<br>
直訳すると封筒のことですが、APIのデータ構造の文脈で言うと、すべてのデータ(レスポンスやリクエスト)を同じ構造でくるむことをいいます。<br>
例えば以下のような感じです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>{
    "header": {
        "status": "success",
        "errorCode": 0
    },
    "response": {

    }
}
</pre></div></div>

<h3>
<span id="データ構造をどうするか階層的-or-フラット" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0%E3%82%92%E3%81%A9%E3%81%86%E3%81%99%E3%82%8B%E3%81%8B%E9%9A%8E%E5%B1%A4%E7%9A%84-or-%E3%83%95%E3%83%A9%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>データ構造をどうするか(階層的 or フラット)</h3>

<p>JSON(やXML)では階層構造を表すことができるので、同じデータでもフラットに表すことも階層的にあらわすこともできます。<br>
例えば2人でのメッセージのやりとりを表現するデータがあったとして、階層的にもフラットにも表せます。</p>

<div class="code-frame" data-lang="階層的"><div class="highlight"><pre>{
    "id": 111,
    "message": "Hi",
    "sender": {
        "id", 1234,
        "name", "Taro"
    },
    "receiver": {
        "id", 3456,
        "name", "Kenji"
    }
}
</pre></div></div>

<div class="code-frame" data-lang="フラット"><div class="highlight"><pre>{
    "id": 111,
    "message": "Hi",
    "sender_id": 1234,
    "sender_name": "Taro",
    "receiver_id": 3456,
    "receiver_name": "Kenji",
    ...
}

</pre></div></div>

<p>どちらがいいかは状況次第のようです。<br>
<a href="https://google.github.io/styleguide/jsoncstyleguide.xml?showone=Flattened_data_vs_Structured_Hierarchy#Flattened_data_vs_Structured_Hierarchy" rel="nofollow noopener" target="_blank">Google JSON Style Guide</a>でも「なるべくフラットにしたほうがよいけど、階層構造を持ったほうがわかりやすい場合もある」とやや曖昧な表記になっています。上記の例だったら階層構造にしたほうがわかりやすいかもしれません。</p>

<p>一方、以下のような場合はどうでしょう。</p>

<div class="code-frame" data-lang="階層的"><div class="highlight"><pre>{
    "id": 123,
    "name": "Taro",
    "profile": {
        "birthday": 0410,
        "gender": "male",
        "languages": [ "ja", "en" ]
    }
}
</pre></div></div>

<p>これはprofileと単に複数項目をまとめたいだけなのに階層構造にしてしまっています。見た目にもあまり違いはないので、これはフラットで表現したほうがいいでしょう。</p>

<div class="code-frame" data-lang="フラット"><div class="highlight"><pre>{
    "id": 123,
    "name": "Taro",
    "birthday": 0410,
    "gender": "male",
    "languages": [ "ja", "en" ]
}
</pre></div></div>

<h3>
<span id="配列とフォーマット" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%A8%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>配列とフォーマット</h3>

<p>JSONはトップレベルに配列もオブジェクトのどちらも置けます。<br>
そこまで大きな差はないといえますが、筆者はオブジェクトのほうがおすすめとのこと。主張は以下のとおり。</p>

<p>メリット</p>

<ul>
<li>レスポンスデータが何を示しているものかがわかりやすくなる</li>
<li>レスポンスデータをオブジェクトに統一することができる</li>
<li>セキュリティ上のリスクを避けることができる</li>
</ul>

<p>1番目はキーがあることで何のことか分かりやすくなるということで、2番目はルールを統一しておいたほうがいいということですね。<br>
3番目はJSONインジェクションという脆弱に対するリスクへの回避のためのようです。(配列の場合はリスクが高まる)</p>

<h3>
<span id="配列の件数続きがある場合の対応" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AE%E4%BB%B6%E6%95%B0%E7%B6%9A%E3%81%8D%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AE%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>配列の件数、続きがある場合の対応</h3>

<p>ページネーションがある場合、続きがあるかどうかを知りたい時があると思います。<br>
続きがあるのかという情報を例えば「hasNext」といった名前でいれてあげれば、必ずしも全体件数を知る必要はないでしょう。</p>

<h2>
<span id="各データのフォーマット" class="fragment"></span><a href="#%E5%90%84%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>各データのフォーマット</h2>

<h3>
<span id="各データの名前" class="fragment"></span><a href="#%E5%90%84%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%90%8D%E5%89%8D"><i class="fa fa-link"></i></a>各データの名前</h3>

<p>命名の考え方は以下のとおりです。</p>

<ul>
<li>多くのAPIで同じ意味に利用されている一般的な単語を用いる</li>
<li>なるべく少ない単語数で表現する</li>
<li>複数の単語を連結する場合、その連結方法はAPI全体を通して統一する</li>
<li>変な省略形は極力利用しない</li>
<li>単数形／複数形に気をつける</li>
</ul>

<p>これは2.2の<a href="http://qiita.com/soyanchu/items/5ca902a7353bb08b7f12">Web API: The Good Partsを読んだので「良いURI」についてまとめた</a>の命名にも書いたとおりです。<br>
実際の事例を見るために、<a href="http://www.programmableweb.com" rel="nofollow noopener" target="_blank">Programmable Web</a>も参考になると思います。</p>

<h2>
<span id="レスポンスデータの設計" class="fragment"></span><a href="#%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%A8%AD%E8%A8%88"><i class="fa fa-link"></i></a>レスポンスデータの設計</h2>

<p>既に述べたように、APIは内部で持っているDBのテーブル構造をそのまま反映する必要はありません。利用場面を考えてシンプルな設計を目指す必要があります。</p>

<h2>
<span id="エラーの表現" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E8%A1%A8%E7%8F%BE"><i class="fa fa-link"></i></a>エラーの表現</h2>

<p>APIではエラーに対する処理をして上げる必要があります。もしAPIでエラーが出ない場合は原因も分からず、使いづらいAPIとなってしまうでしょう。</p>

<h3>
<span id="ステータスコードでエラーを表現する" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A7%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A1%A8%E7%8F%BE%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ステータスコードでエラーを表現する</h3>

<p>ステータスコードについては<a href="http://qiita.com/soyanchu/items/e2989c0f40fd79169bf6">Web API: The Good Partsを読んだので「HTTPの仕様」についてまとめた</a>を参考にしてみてください。</p>

<p>成功した場合しか200番台を返してはいけないなど基本的なルールをおさえることが大事です。</p>

<h3>
<span id="エラーの詳細をクライアントに返す" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E8%A9%B3%E7%B4%B0%E3%82%92%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%81%AB%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>エラーの詳細をクライアントに返す</h3>

<p>ステータスコードでエラーを返せば十分かというとそうではありません。実際にエラーの詳細がわからないと結局どうすればいいんだよ、となってしまうからです。<br>
エラーの内容を返す方法は大きく分けて2つあります。</p>

<ul>
<li>HTTPのレスポンスヘッダに入れて返す方法</li>
<li>レスポンスボディで返す方法</li>
</ul>

<p>です。</p>

<p>レスポンスヘッダには独自定義したヘッダ項目にエラー内容を書いておき、レスポンスボディにはエラー情報を以下のように格納しておくというものです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>    "error": {
        "code": 2013,
        "message": "bad authentication token",
        "info": "http:example.com/api/v1/authentication"
    }
</pre></div></div>

<p>実際にサービスの例を見てみるとほとんどはレスポンスボディにいれているので、基本的にレスポンスボディにデータを入れる方法で問題ないでしょう。</p>

<h3>
<span id="エラー詳細情報は何を入れるか" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E8%A9%B3%E7%B4%B0%E6%83%85%E5%A0%B1%E3%81%AF%E4%BD%95%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B%E3%81%8B"><i class="fa fa-link"></i></a>エラー詳細情報は何を入れるか</h3>

<p>エラー情報として返すべき情報として、</p>

<ul>
<li>エラーの詳細コード(API提供側で独自にエラーコードに提供したコード)</li>
<li>詳細情報へのリンク</li>
</ul>

<p>があれば、最低限利用者に情報を伝えることが出来ます。</p>

<h3>
<span id="エラーのときにhtmlが返ることを防ぐ" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E3%81%A8%E3%81%8D%E3%81%ABhtml%E3%81%8C%E8%BF%94%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E9%98%B2%E3%81%90"><i class="fa fa-link"></i></a>エラーのときにHTMLが返ることを防ぐ</h3>

<p>リクエストボディがHTMLにならないように注意しましょう。<br>
404,500,503でよく見られるようです。<br>
適切なフォーマットで返るようにしておくのがいいでしょう。</p>

<h3>
<span id="メンテナンスとステータスコード" class="fragment"></span><a href="#%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9%E3%81%A8%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>メンテナンスとステータスコード</h3>

<p>APIをメンテナンスで止めるのは第三者への影響も多く極力避けるべきでしょう。<br>
ですが、どうしてもメンテナンスしなくてはいけないときはステータスコードとして503を返し、サービスが停止していることを伝える必要があります。<br>
そのときは予期しないサービス停止ではなく、スケジュールされたものであり、終了予想時刻がわかっているならそれを伝えるべきです。</p>

<p>エラーコードとエラーメッセージを返すだけでなく、Retry-AfterというHTTPヘッダを使っていつメンテナンスが終わるのかを示します。<br>
Retry-Afterの値には、具体的な日付か、現在時刻からアクセス可能になるまでの秒数が入ります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>503 Servicee Temporary Unavailable
Retry-After: Mon, 2, Dec 2013 03:00:00 GMT
</pre></div></div>

<h3>
<span id="意図的に不正確な情報を返したい場合" class="fragment"></span><a href="#%E6%84%8F%E5%9B%B3%E7%9A%84%E3%81%AB%E4%B8%8D%E6%AD%A3%E7%A2%BA%E3%81%AA%E6%83%85%E5%A0%B1%E3%82%92%E8%BF%94%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>意図的に不正確な情報を返したい場合</h3>

<p>セキュリティやその他の理由でエラーを曖昧にしたいケースがあるでしょう。<br>
たとえばSNSでブロックされた場合。<br>
正確にエラーを返すなら、認可のエラーで403になりますがそれだと相手にブロックされたことがわかっていまいますよね。<br>
したがってそういうときは、「ブロックされた側から見るとブロックした側はもはや存在しないと同義」とみなして404を返すといったことも可能です。</p>

<p>他にもログインの際にメールアドレスとパスワードを送信する際に、間違った時に詳細にエラーを返しすぎると、悪意を持った不正ユーザーに親切な情報を与えることになってしまいます。</p>

<p>ここはユーザー体験の向上にも重なる部分なので、仕様を決めるときにどうすればいいのか決めるべきでしょう。<br>
なお開発時にはあいまいにする必要がないので、正確な情報を返し、本番環境ではあえて曖昧な答えを返すというのもありでしょう。</p>

<h2>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h2>

<p>レスポンスデータの設計についてどうやってすすめていけばいいかまとめていきました。<br>
設計、命名、データ構造、エラー処理など基本的な考え方をまとめました。<br>
特にJSONをどういう風な構造にしていけばいいかというのは参考になりました(以前の私に教えてあげたい・・)。<br>
もし、参考になるところがありましたら幸いです。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-like unlike"></i>
      </div>
    
    <a href="http://qiita.com/ossan-engineer" title="ossan-engineer">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/18685/profile-images/1473682498" class="user-icon" title="ossan-engineer">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/ossan-engineer">
            ossan-engineer
          </a>
        </span>
        
            が<span>いいね</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/togana/items/e739e1ec943862a71757" title="Reactでaタグの中にtarget='_blank'を書いたらESLintに怒られた話">
            Reactでaタグの中にtarget='_blank'を書いたらESLintに怒られた話
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/jsx">
                JSX
              </a>
            </li>
          
            <li>
              <a href="/tags/reactjs">
                reactjs
              </a>
            </li>
          
            <li>
              <a href="/tags/eslint">
                ESLint
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            30
          </li>
          <li>
            <a href="http://qiita.com/togana/items/e739e1ec943862a71757#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-e739e1ec943862a71757" class="item-body markdownContent bordered">
        
<h2>
<span id="経緯" class="fragment"></span><a href="#%E7%B5%8C%E7%B7%AF"><i class="fa fa-link"></i></a>経緯</h2>

<p>適当に別タブを開くリンクをjsxで書いたら <code>eslint-plugin-react</code> の <code>jsx-no-target-blank</code> で怒られいました。<br>
ほんとに知らなかったし、気軽にできちゃうからやばいな。っと思ったのでメモしておきます。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">'react-dom'</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">Index</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">a</span>
        <span class="nx">href</span><span class="o">=</span><span class="s2">"http://example.com"</span>
        <span class="nx">target</span><span class="o">=</span><span class="s2">"_blank"</span>
      <span class="o">&gt;</span>
        <span class="err">アンカーリンク</span>
      <span class="o">&lt;</span><span class="err">/a&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Index</span> <span class="o">/&gt;</span><span class="p">,</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'root'</span><span class="p">)</span>
<span class="p">);</span>
</pre></div></div>

<h2>
<span id="エラーを見る" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>エラーを見る</h2>

<p>セキュリティーリスクがあるだと。。。</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">原文</span></div>
<div class="highlight"><pre>Using target="_blank" without rel="noopener noreferrer" is a security risk: see https://mathiasbynens.github.io/rel-noopener/
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">意訳</span></div>
<div class="highlight"><pre>rel="noopener noreferrer"つけないでtarget="_blank" 使うとセキュリティーリスクあるからやめろ！
(https://mathiasbynens.github.io/rel-noopener/)を参照しなさいっ！
</pre></div>
</div>

<h2>
<span id="攻撃方法を調べた" class="fragment"></span><a href="#%E6%94%BB%E6%92%83%E6%96%B9%E6%B3%95%E3%82%92%E8%AA%BF%E3%81%B9%E3%81%9F"><i class="fa fa-link"></i></a>攻撃方法を調べた</h2>

<p>ざっくりいうと</p>

<ul>
<li>悪さするリンクをpwを盗みたいサイトに貼る</li>
<li>ユーザーがリンクを踏む</li>
<li>別のタブが開き今まで見てたタブが裏に隠れる</li>
<li>裏に隠れたタブに戻るとログイン画面になっている(実際はログインページではなくフィッシングサイトにリダイレクトされている)</li>
<li>ユーザーがid/pwを入力してログインしたらもとのページにリダイレクトする</li>
</ul>

<p>これ最近のサイト裏でセッション切れたかなにかでログインページに飛ばされてることあったりして普通に入力してしまいませんか？？？</p>

<p>攻撃する方が準備するのは</p>

<ul>
<li>ログインページ(ほぼトレースで作れるから数秒で作れちゃうはず)</li>
<li>id/pwを送ってもらうサーバー(適当でいいなら数時間かかる？ぐらい)</li>
<li>リンク先のページ(<code>window.opener.location = "http://example.com";</code>が実行できればどんなページでも良さそう)</li>
<li>狙ってるサイトにリンクを配置する</li>
</ul>

<p>めっちゃかんたん。あとは勘違いしてユーザーにログインしてもらうだけ。かなりまずい気がする。</p>

<h2>
<span id="対策" class="fragment"></span><a href="#%E5%AF%BE%E7%AD%96"><i class="fa fa-link"></i></a>対策</h2>

<ul>
<li>サイトにリンクを貼らせない(ほぼ無理)</li>
<li>ユーザーにurl変わってないか判断してもらう(かなり無理)</li>
<li>rel="noopener noreferrer"を指定する</li>
</ul>

<h2>
<span id="relnoopener-noreferrerとは" class="fragment"></span><a href="#relnoopener-noreferrer%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>rel="noopener noreferrer"とは</h2>

<h3>
<span id="noopenerとは" class="fragment"></span><a href="#noopener%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>noopenerとは</h3>

<p>そもそもwindow.opener.locationを書き換えられなくする！<br>
ただし対応ブラウザが少なめ。</p>

<p>参考サイト<br>
<a href="https://html.spec.whatwg.org/multipage/semantics.html#link-type-noopener" class="autolink" rel="nofollow noopener" target="_blank">https://html.spec.whatwg.org/multipage/semantics.html#link-type-noopener</a></p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">抜粋</span></div>
<div class="highlight"><pre>its window.opener property will be null.
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">意訳</span></div>
<div class="highlight"><pre>window.opener プロパティnullにするよ
</pre></div>
</div>

<h3>
<span id="noreferrerとは" class="fragment"></span><a href="#noreferrer%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>noreferrerとは</h3>

<p>そもそもリンクたどるときリファラー情報見れなくする!<br>
古いブラウザでも対応してる。<br>
別の所で情報見れなくてこまることもありそう。<br>
noreferrerを当てるだけでESlintのエラーに対応できそうですが、 <code>noreferrer noopener</code> としっかり書かないとだめみたいです。</p>

<p>参考サイト<br>
<a href="https://html.spec.whatwg.org/multipage/semantics.html#link-type-noreferrer" class="autolink" rel="nofollow noopener" target="_blank">https://html.spec.whatwg.org/multipage/semantics.html#link-type-noreferrer</a></p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">抜粋</span></div>
<div class="highlight"><pre>It indicates that no referrer information is to be leaked when following the link.
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">意訳</span></div>
<div class="highlight"><pre>
リンクをたどるときにリファラー情報漏らさないよ
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">抜粋</span></div>
<div class="highlight"><pre>&lt;a href="..." rel="noreferrer" target="_blank"&gt; has the same behavior as &lt;a href="..." rel="noreferrer noopener" target="_blank"&gt;.
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">意訳</span></div>
<div class="highlight"><pre>noreferrerとnoreferrer noopenerは同じ
</pre></div>
</div>

<h2>
<span id="セキュリティーリスクを回避してeslintのエラー修正" class="fragment"></span><a href="#%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%BC%E3%83%AA%E3%82%B9%E3%82%AF%E3%82%92%E5%9B%9E%E9%81%BF%E3%81%97%E3%81%A6eslint%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E4%BF%AE%E6%AD%A3"><i class="fa fa-link"></i></a>セキュリティーリスクを回避してESlintのエラー修正</h2>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre>import React from 'react';
import ReactDOM from 'react-dom';

class Index extends React.Component {
  render() {
    return (
      &lt;a
        href="http://example.com"
        target="_blank"
<span class="gi">+       rel="noreferrer noopener"</span>
      &gt;
        アンカーリンク
      &lt;/a&gt;
    );
  }
}

ReactDOM.render(
  &lt;Index /&gt;,
  document.getElementById('root')
);
</pre></div></div>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>普段そこまでセキュリティー意識してなくてすいません。って気持ちになりました。<br>
ESlintさまさまです。よくわからないエラーが出てたらちゃんと分かるまで調べましょうね。</p>

<p>僕から以上。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track hidden"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-like unlike"></i>
      </div>
    
    <a href="http://qiita.com/sinmetal" title="sinmetal">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/15640/profile-images/1474548897" class="user-icon" title="sinmetal">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/sinmetal">
            sinmetal
          </a>
        </span>
        
            が<span>いいね</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905" title="外部テストパッケージの利用ケース #golang">
            外部テストパッケージの利用ケース #golang
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/go">
                Go
              </a>
            </li>
          
            <li>
              <a href="/tags/golang">
                golang
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            4
          </li>
          <li>
            <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-5f491994647aa4a8a905" class="item-body markdownContent bordered">
        <p><a href="http://golang-jp.org/cmd/go/#hdr-Go________" rel="nofollow noopener" target="_blank">go list</a>の、-fフラグで指定できるstruct fieldに</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>XTestGoFiles []string // パッケージ外の_test.goファイル
XTestImports []string // XTestGoFilesからのインポート
</pre></div></div>

<p>というものがあるのに気付いて、「これなんだろ？」と思って調べました。</p>

<p>テストコードのパッケージを<code>xxx_test</code>という様にサフィックス<code>_test</code>くっつけておくと外部テストパッケージ（external test package）というものになるらしい。</p>

<h2>
<span id="例" class="fragment"></span><a href="#%E4%BE%8B"><i class="fa fa-link"></i></a>例</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>src
└── hoge
    ├── hoge.go
    └── hoge_test.go
</pre></div></div>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge</span>

<span class="c1">// Hoge returns hoge!!</span>
<span class="kd">func</span> <span class="nx">Hoge</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"hoge!!"</span>
<span class="p">}</span>

</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">TestHoge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">()</span> <span class="o">!=</span> <span class="s">"hoge!!"</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">"expected:hoge!! but was:%v"</span><span class="p">,</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>通常パッケージディレクトリ内に複数パッケージを宣言することはできないですが、外部テストパッケージ<code>{package name}_test</code>は例外で、そこに書かれたテストはhogeパッケージとは別のパッケージ扱いになるとのこと。<br>
<br>
↑の例でも、hoge_testはhogeパッケージと同じディレクトリにありながら、hogeパッケージの関数を呼ぶときはhogeをimportしてパッケージプレフィクス付きで関数呼ぶ必要があります。</p>

<p>検索してもあまり情報ひっかからないのでマイナーな機能なのかな？と思っていたのですが、標準パッケージのコード見てるとめっちゃ使われてました。</p>

<p>数えてみました↓↓<br>
通常パッケージの<code>_test.go</code>ファイル: 317<br>
外部テストパッケージの<code>_test.go</code>ファイル: 234</p>

<h2>
<span id="どういうときに使用する" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>どういうときに使用する？</h2>

<h3>
<span id="exampleテスト" class="fragment"></span><a href="#example%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>Exampleテスト</h3>

<p>FYI: <a href="https://golang.org/pkg/testing/#hdr-Examples" class="autolink" rel="nofollow noopener" target="_blank">https://golang.org/pkg/testing/#hdr-Examples</a></p>

<p>テストコードでExampleXxxという関数を書いておくと、標準出力をassertionするテストと、godocでのExample表示を同時に行ってくれます。<br>
Exampleテストを記述するときには基本的に外部テストパッケージを使用します。</p>

<p>例:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">ExampleHoge</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>

    <span class="c1">// Output:</span>
    <span class="c1">// hoge!!</span>
<span class="p">}</span>
</pre></div></div>

<p>godoc:</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.39.34.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png"></a></p>

<p>外部テストパッケージでない通常のパッケージでも記述することは出来ますが、そうするとテスト対象と同じパッケージになってしまうので、godocで表示されるExampleもパッケージプレフィクスなしのコードになってしまいます↓↓</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png" target="_blank" rel="nofollow noopener"><img width="362" alt="スクリーンショット 2016-12-29 9.17.52.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png"></a></p>

<p>これだと利用者がサンプルをそのまま実行できなくなります。外部テストパッケージを利用することでユーザーが外部のパッケージから利用する場合のコードをExampleに出力することができる様になります。</p>

<p>あと、余談ですが、godocの<code>-play</code>オプションつけた場合に、自前パッケージのExampleにもplaygroundが表示されます（外部テストパッケージを使用しないと表示されません）。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.59.00.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png"></a></p>

<p>でもRunするとエラーになっちゃいました・・・(´･ω･`)<br>
これ実行出来ている人いたら教えてくださいm(_ _)m</p>

<h3>
<span id="他のパッケージから使用されるケースのテスト" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%8B%E3%82%89%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>他のパッケージから使用されるケースのテスト</h3>

<p>これは必須ではないのですが、標準ライブラリの外部テストパッケージの使われ方を見ていて自分が感じたことです。</p>

<p>たとえば自分のパッケージでencoding/jsonのMarshaller/Unmarshallerインターフェースを実装している場合など、外部のパッケージ経由で呼び出されるケースのテストで使用します。</p>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">type</span> <span class="nx">Fuga</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Value</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Fuga</span><span class="p">)</span> <span class="nx">MarshalJSON</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">`{"value":%d}`</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">Value</span><span class="p">)),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">func</span> <span class="nx">TestFugaMarshal</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fuga</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Fuga</span><span class="p">{</span><span class="mi">999</span><span class="p">}</span>
    <span class="nx">jsn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">fuga</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">)</span> <span class="o">!=</span> <span class="s">`{"value":999}`</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">`expected: {"value":999}, but was:%s`</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>外部テストパッケージを使用することで、hogeパッケージがjson/encodingパッケージに依存しなくなります。</p>

<p>↑の例ではもともと依存関係がありませんでしたが、たとえばhogeパッケージに依存するパッケージpiyoがあったとして、piyoパッケージ経由でhogeが呼び出されるテストも記述することが出来ます。<br>
通常パッケージのテストだと循環依存になって実行することが出来ません。</p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>外部テストパッケージの利用方針に関して、公式ドキュメントの類があまり見当たりませんでした。<br>
どなたか情報ありましたら教えてくださいm(_ _)m</p>

<p>あと、逆に通常テストパッケージを利用する意義が自分の中で曖昧になりました。。<br>
テストは全部外部テストパッケージでいいのでは・・<br>
unexportedな関数や変数をテストしたい場合・・・などかな？</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track hidden"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-stock unstock"></i>
      </div>
    
    <a href="http://qiita.com/sinmetal" title="sinmetal">
      <img src="https://qiita-image-store.s3.amazonaws.com/0/15640/profile-images/1474548897" class="user-icon" title="sinmetal">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/sinmetal">
            sinmetal
          </a>
        </span>
        
            が<span>ストック</span>しました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905" title="外部テストパッケージの利用ケース #golang">
            外部テストパッケージの利用ケース #golang
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/go">
                Go
              </a>
            </li>
          
            <li>
              <a href="/tags/golang">
                golang
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            4
          </li>
          <li>
            <a href="http://qiita.com/hogedigo/items/5f491994647aa4a8a905#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-5f491994647aa4a8a905" class="item-body markdownContent bordered">
        <p><a href="http://golang-jp.org/cmd/go/#hdr-Go________" rel="nofollow noopener" target="_blank">go list</a>の、-fフラグで指定できるstruct fieldに</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>XTestGoFiles []string // パッケージ外の_test.goファイル
XTestImports []string // XTestGoFilesからのインポート
</pre></div></div>

<p>というものがあるのに気付いて、「これなんだろ？」と思って調べました。</p>

<p>テストコードのパッケージを<code>xxx_test</code>という様にサフィックス<code>_test</code>くっつけておくと外部テストパッケージ（external test package）というものになるらしい。</p>

<h2>
<span id="例" class="fragment"></span><a href="#%E4%BE%8B"><i class="fa fa-link"></i></a>例</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>src
└── hoge
    ├── hoge.go
    └── hoge_test.go
</pre></div></div>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge</span>

<span class="c1">// Hoge returns hoge!!</span>
<span class="kd">func</span> <span class="nx">Hoge</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"hoge!!"</span>
<span class="p">}</span>

</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">TestHoge</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">()</span> <span class="o">!=</span> <span class="s">"hoge!!"</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">"expected:hoge!! but was:%v"</span><span class="p">,</span> <span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>通常パッケージディレクトリ内に複数パッケージを宣言することはできないですが、外部テストパッケージ<code>{package name}_test</code>は例外で、そこに書かれたテストはhogeパッケージとは別のパッケージ扱いになるとのこと。<br>
<br>
↑の例でも、hoge_testはhogeパッケージと同じディレクトリにありながら、hogeパッケージの関数を呼ぶときはhogeをimportしてパッケージプレフィクス付きで関数呼ぶ必要があります。</p>

<p>検索してもあまり情報ひっかからないのでマイナーな機能なのかな？と思っていたのですが、標準パッケージのコード見てるとめっちゃ使われてました。</p>

<p>数えてみました↓↓<br>
通常パッケージの<code>_test.go</code>ファイル: 317<br>
外部テストパッケージの<code>_test.go</code>ファイル: 234</p>

<h2>
<span id="どういうときに使用する" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>どういうときに使用する？</h2>

<h3>
<span id="exampleテスト" class="fragment"></span><a href="#example%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>Exampleテスト</h3>

<p>FYI: <a href="https://golang.org/pkg/testing/#hdr-Examples" class="autolink" rel="nofollow noopener" target="_blank">https://golang.org/pkg/testing/#hdr-Examples</a></p>

<p>テストコードでExampleXxxという関数を書いておくと、標準出力をassertionするテストと、godocでのExample表示を同時に行ってくれます。<br>
Exampleテストを記述するときには基本的に外部テストパッケージを使用します。</p>

<p>例:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kn">package</span> <span class="nx">hoge_test</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"hoge"</span>
    <span class="s">"testing"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">ExampleHoge</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Hoge</span><span class="p">())</span>

    <span class="c1">// Output:</span>
    <span class="c1">// hoge!!</span>
<span class="p">}</span>
</pre></div></div>

<p>godoc:</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.39.34.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/e2c6c27d-c9b3-fdd5-bdcb-3725ae772ffc.png"></a></p>

<p>外部テストパッケージでない通常のパッケージでも記述することは出来ますが、そうするとテスト対象と同じパッケージになってしまうので、godocで表示されるExampleもパッケージプレフィクスなしのコードになってしまいます↓↓</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png" target="_blank" rel="nofollow noopener"><img width="362" alt="スクリーンショット 2016-12-29 9.17.52.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/a2e1191a-182f-d9cd-ffe7-a3d59663e8ed.png"></a></p>

<p>これだと利用者がサンプルをそのまま実行できなくなります。外部テストパッケージを利用することでユーザーが外部のパッケージから利用する場合のコードをExampleに出力することができる様になります。</p>

<p>あと、余談ですが、godocの<code>-play</code>オプションつけた場合に、自前パッケージのExampleにもplaygroundが表示されます（外部テストパッケージを使用しないと表示されません）。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png" target="_blank" rel="nofollow noopener"><img width="250" alt="スクリーンショット 2016-12-29 8.59.00.png" src="https://qiita-image-store.s3.amazonaws.com/0/31437/79765f86-77ad-2540-1b5b-42b268e8c0b7.png"></a></p>

<p>でもRunするとエラーになっちゃいました・・・(´･ω･`)<br>
これ実行出来ている人いたら教えてくださいm(_ _)m</p>

<h3>
<span id="他のパッケージから使用されるケースのテスト" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%8B%E3%82%89%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>他のパッケージから使用されるケースのテスト</h3>

<p>これは必須ではないのですが、標準ライブラリの外部テストパッケージの使われ方を見ていて自分が感じたことです。</p>

<p>たとえば自分のパッケージでencoding/jsonのMarshaller/Unmarshallerインターフェースを実装している場合など、外部のパッケージ経由で呼び出されるケースのテストで使用します。</p>

<p>hoge.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">type</span> <span class="nx">Fuga</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Value</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">Fuga</span><span class="p">)</span> <span class="nx">MarshalJSON</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">`{"value":%d}`</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">Value</span><span class="p">)),</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div></div>

<p>hoge_test.go:</p>

<div class="code-frame" data-lang="go"><div class="highlight"><pre><span class="kd">func</span> <span class="nx">TestFugaMarshal</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fuga</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">hoge</span><span class="p">.</span><span class="nx">Fuga</span><span class="p">{</span><span class="mi">999</span><span class="p">}</span>
    <span class="nx">jsn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">fuga</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">)</span> <span class="o">!=</span> <span class="s">`{"value":999}`</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">Fatalf</span><span class="p">(</span><span class="s">`expected: {"value":999}, but was:%s`</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">jsn</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<p>外部テストパッケージを使用することで、hogeパッケージがjson/encodingパッケージに依存しなくなります。</p>

<p>↑の例ではもともと依存関係がありませんでしたが、たとえばhogeパッケージに依存するパッケージpiyoがあったとして、piyoパッケージ経由でhogeが呼び出されるテストも記述することが出来ます。<br>
通常パッケージのテストだと循環依存になって実行することが出来ません。</p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>外部テストパッケージの利用方針に関して、公式ドキュメントの類があまり見当たりませんでした。<br>
どなたか情報ありましたら教えてくださいm(_ _)m</p>

<p>あと、逆に通常テストパッケージを利用する意義が自分の中で曖昧になりました。。<br>
テストは全部外部テストパッケージでいいのでは・・<br>
unexportedな関数や変数をテストしたい場合・・・などかな？</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/kaihar4/items/c09a6d73e190ab0b9b01" title="Service Worker Offline Cache Techniques">
            Service Worker Offline Cache Techniques
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/serviceworker">
                ServiceWorker
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            2
          </li>
          <li>
            <a href="http://qiita.com/kaihar4/items/c09a6d73e190ab0b9b01#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-c09a6d73e190ab0b9b01" class="item-body markdownContent bordered">
        <p>今回はService Workerを用いたオフラインキャッシュとそのテクニックについて紹介していきます。</p>

<p>Service Workerを用いたオフラインキャッシュを実装することで、インターネットに繋がっていない状態でWebページが閲覧可能になったり、高速でWebページを表示することが可能となります。</p>

<p>それでは順を追って解説していきましょう。</p>

<h2>
<span id="service-workerとは" class="fragment"></span><a href="#service-worker%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Service Workerとは</h2>

<p>まずはじめに<a href="http://www.w3.org/TR/service-workers/" rel="nofollow noopener" target="_blank">Service Worker</a>とは、ブラウザとは別スレッドで動作するイベント駆動型のJavascript Workerのひとつです。</p>

<p>httpsプロトコルでしか利用できないものの、最近ではブラウザの実装も進み、広く利用され始めてきています。</p>

<p>元々は<a href="http://www.w3.org/TR/2011/WD-html5-20110525/offline.html#appcache" rel="nofollow noopener" target="_blank">AppCache</a>の代替として、プログラマブルにキャッシュを扱えるAPIを目指して開発が始められました。<br>
AppCacheには様々な実装上の問題点や<a href="http://blog.andlabs.org/2010/06/chrome-and-safari-users-open-to-stealth.html" rel="nofollow noopener" target="_blank">セキュリティ上の問題</a>があり、その解決をモチベーションとしてService Workerが生まれました。<br>
そうして開発が進められたのち仕様に落とし込まれ、その後<a href="https://w3c.github.io/push-api/" rel="nofollow noopener" target="_blank">Push API</a>などの追加を経て現在の形に至ります。</p>

<p>今回利用するのは、その中でもService Workerの花形ともいえるキャッシュを扱う<a href="http://www.w3.org/TR/service-workers/#cache-objects" rel="nofollow noopener" target="_blank">Cache API</a>となります。<br>
それでは、そんなService Workerがどのようにしてキャッシュを扱っているかについて触れていきましょう。</p>

<h3>
<span id="cache-apiとは" class="fragment"></span><a href="#cache-api%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Cache APIとは</h3>

<p>Cache APIとは先に触れた通り、Service Workerに実装されているプログラマブルにキャッシュを扱うためのAPIのことを指します。</p>

<p>Service Workerでは仕様の中でCache Storageというキャッシュの保存先として用いる、ブラウザ上に実装されたキャッシュ用のストレージを所持しており、Cache APIはそのインタフェースとして振舞います。</p>

<p>このCache Storageは、プログラマブルにキャッシュを扱うことによるセキュリティ上の懸念から、indexeddbのようにoriginごとにネームスペースを持っており、そこにキャッシュを保存するようになっています。<br>
これにより他originへの影響や、他originのキャッシュをService Workerが取得することによる悪用を避けることが可能となっています。</p>

<p>ちなみにこのCache Storageはもの自体は独立しているためService Worker外からも利用可能です。</p>

<p>次は、このCache APIを利用してオフラインキャッシュを実現する方法についてです。</p>

<h3>
<span id="cache-apiを用いたオフラインキャッシュの実現" class="fragment"></span><a href="#cache-api%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%AA%E3%83%95%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E5%AE%9F%E7%8F%BE"><i class="fa fa-link"></i></a>Cache APIを用いたオフラインキャッシュの実現</h3>

<p>ここまででService Workerがいかにしてキャッシュを扱うかについて説明してきましたが、問題はどのタイミングでCache APIを叩くかという点です。</p>

<p>これにはService Workerの特徴であるイベント駆動が役に立ちます。</p>

<p>Service Workerは主に以下のようなイベントを持ちます。</p>

<ul>
<li>oninstall</li>
<li>onactivate</li>
<li>onfetch</li>
</ul>

<p>流れとしては、Service Workerのインストールに完了すると <code>oninstall</code> が発火し、その後Service Workerが有効化されるタイミングで <code>onactivate</code> が発火します。<br>
<code>onfetch</code> が発火するタイミングはブラウザがインターネットに向けてファイルをリクエストするときです。</p>

<p>つまり、 <code>oninstall</code> のタイミングでファイルをキャッシュし、 <code>onfetch</code> でそのキャッシュからファイルを返すことで、ブラウザからのファイルのリクエストがインターネットに出る前にレスポンスを返すことが可能です。<br>
これによりリクエストはブラウザ内で完結するためオフラインキャッシュが実現されるといった仕組みです。</p>

<h2>
<span id="service-workerを用いたオフラインキャッシュの実装" class="fragment"></span><a href="#service-worker%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%AA%E3%83%95%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>Service Workerを用いたオフラインキャッシュの実装</h2>

<p>ここまでで前置きは一旦終了です。</p>

<p>ここからは実際にService Workerを用いてオフラインキャッシュを実装していきましょう。</p>

<p>オフラインキャッシュを実装する上でのテクニックを織り交ぜつつ解説していきます。</p>

<h3>
<span id="service-workerの登録" class="fragment"></span><a href="#service-worker%E3%81%AE%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>Service Workerの登録</h3>

<p>まずはService Workerを登録する部分です。<br>
先に述べた通り、Service WorkerはJavascript Workerのひとつなので登録しなければ始まりません。　<br>
任意のページに以下のscriptタグを埋め込みましょう。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span class="nt">&lt;script&gt;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">'/sw.js'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">scope</span><span class="o">:</span> <span class="s1">'.'</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">registraion</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">registraion</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div></div>

<p>ここでは、 <code>sw.js</code> を <code>.</code> をスコープとしたService Workerとして登録しています。<br>
このスコープは重要で、Service Workerが有効化されるリソースの範囲を指定しています。<br>
<code>index.html</code> でこれを実行した場合はすべてのページで有効化されますが、 <code>/foo/bar.html</code> で実行した場合は <code>index.html</code> では有効になりません。<br>
このスコープは <code>/foo/</code> のような指定の仕方も可能で、これにより影響範囲を細かに設定することができます。</p>

<p>ここで早速テクニックのひとつ目です。<br>
register時に <code>registration.update()</code> を実行しています。<br>
通常Service Workerは有効化されたページを開いた際に、 Cache-Controlに従ってService Workerを取得し更新を試みます。(Cache-Controlに極端に長いmax-ageを指定された際の対策として最低24時間に1度更新します)<br>
そこで、ここではregister時に強制的にupdateすることで、ページを開き直さなくてもService Workerが更新されるようにしています。<br>
また、 <code>registration.update()</code> はService Worker内のプログラム上で実行することもできるので、任意のタイミングで更新することも可能です。</p>

<p>次はService Worker本体の部分です。<br>
先ほど登録した <code>sw.js</code> の中身を追っていきましょう。</p>

<h3>
<span id="キャッシュの登録" class="fragment"></span><a href="#%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>キャッシュの登録</h3>

<p>まずは、 <code>oninstall</code> によるキャッシュの登録です。</p>

<p>あらかじめ定義しておいたキャッシュしたいファイルの一覧 <code>STATIC_FILES</code> を<a href="https://fetch.spec.whatwg.org/" rel="nofollow noopener" target="_blank">Fetch API</a>で取得し、 <code>STATIC_CACHE_KEY</code> をキーとしてCache Storageに保存しています。<br>
<code>STATIC_CACHE_KEY</code> はキャッシュしたいファイルが更新された場合に書き換えることでキャッシュのバージョンを管理します。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// sw.js</span>
<span class="kr">const</span> <span class="nx">ORIGIN</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">+</span> <span class="s1">'//'</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">hostname</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">STATIC_CACHE_KEY</span> <span class="o">=</span> <span class="s1">'1'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">STATIC_FILES</span> <span class="o">=</span> <span class="p">[</span>
  <span class="nx">ORIGIN</span> <span class="o">+</span> <span class="s1">'/'</span><span class="p">,</span>
  <span class="nx">ORIGIN</span> <span class="o">+</span> <span class="s1">'/stylesheets/index.css'</span><span class="p">,</span>
  <span class="nx">ORIGIN</span> <span class="o">+</span> <span class="s1">'/javascripts/index.js'</span><span class="p">,</span>
  <span class="s1">'https://file.kaihar4.com/images/icon.png'</span>
<span class="p">];</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'install'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">STATIC_CACHE_KEY</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">cache</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
        <span class="nx">STATIC_FILES</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">url</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="nx">cache</span><span class="o">:</span> <span class="s1">'no-cache'</span><span class="p">,</span> <span class="nx">mode</span><span class="o">:</span> <span class="s1">'no-cors'</span> <span class="p">})).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
          <span class="p">});</span>
        <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

<p>言い忘れていましたが、Service Workerではファイルを取得する際にXHRではなくFetch APIを利用します。<br>
これはFetch APIが返す <code>Response</code> オブジェクトをCache APIが利用するためです。</p>

<p>余談ですが、Fetch APIはXHRと異なりPromiseを返す設計で扱いやすく、今後はService Workerだけに限らず<a href="http://caniuse.com/#feat=fetch" rel="nofollow noopener" target="_blank">ブラウザでも利用することが可能</a>となっていきます。</p>

<p>ここでもテクニックが登場します。<br>
<code>fetch</code> に与える <code>Request</code> オブジェクトの第2引数にオプションとして <code>{ cache: 'no-cache', mode: 'no-cors' }</code> を指定しています。</p>

<p>今回の実装ではキャッシュはService Workerがインストールされた時にしか取得されません。<br>
そのため、タイミングによってはmax-ageが切れる直前のファイルがキャッシュされて古いキャッシュを握ったままになってしまうことがあるため、 <code>no-cache</code> によって <code>Cache-Control: no-cache</code> でリクエストさせています。</p>

<p>また、Fetch APIはcors未対応のWebサーバからデータを取得する <code>no-cors</code> に対応しています。<br>
ここでは、これを利用することによりWebページにありがちな外部リソースへのリクエストもキャッシュ可能にしています。</p>

<p>ちなみに、 <code>no-cors</code> によるレスポンスをそのままプログラムが扱えるのは好ましくないため、 <code>Response</code> オブジェクトでラップすることでプログラムからは読み込めないがキャッシュとしては利用できるということを実現しています。<br>
これもXHRではなくFetch APIが採用されている理由のひとつです。</p>

<h3>
<span id="キャッシュからレスポンスの返却" class="fragment"></span><a href="#%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%8B%E3%82%89%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%81%AE%E8%BF%94%E5%8D%B4"><i class="fa fa-link"></i></a>キャッシュからレスポンスの返却</h3>

<p>次は、今登録したキャッシュから <code>onfetch</code> にてレスポンスを返します。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// sw.js</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'fetch'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">response</span> <span class="o">||</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

<p>ここは単純で、キャッシュがあったらそれを返し、無い場合はFetch APIにて結果を取得します。<br>
<code>event.request</code> は <code>Request</code> オブジェクトなのでそのまま使用することができます。</p>

<p>ここまでで基本的なオフラインキャッシュの実装は終了です。<br>
ここから先ではオプショナルなオフラインキャッシュのテクニックを解説していきます。</p>

<h3>
<span id="古いキャッシュの削除" class="fragment"></span><a href="#%E5%8F%A4%E3%81%84%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E5%89%8A%E9%99%A4"><i class="fa fa-link"></i></a>古いキャッシュの削除</h3>

<p>ここまででキャッシュの取得と返却が完了しましたが、このままでは <code>STATIC_CACHE_KEY</code> の数だけ古いキャッシュがCache Storageに蓄積されてしまいます。</p>

<p>その対策として、Service Workerが有効になった際に発火する <code>onactivate</code> にて古いキャッシュを削除する処理を行います。<br>
テクニックですね。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// sw.js</span>
<span class="kr">const</span> <span class="nx">CACHE_KEYS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="nx">STATIC_CACHE_KEY</span>
<span class="p">];</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'activate'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">keys</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
        <span class="nx">keys</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">key</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="o">!</span><span class="nx">CACHE_KEYS</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
        <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">caches</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
        <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

<p><code>CACHE_KEYS</code> に保持しておきたいキャッシュのキーを入れておくイメージです。</p>

<h3>
<span id="キャッシュのバージョン管理の自動化" class="fragment"></span><a href="#%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86%E3%81%AE%E8%87%AA%E5%8B%95%E5%8C%96"><i class="fa fa-link"></i></a>キャッシュのバージョン管理の自動化</h3>

<p>先に、 <code>STATIC_CACHE_KEY</code> を書き換えることでキャッシュのバージョンを管理すると書きましたが、とても手動で書き換える気にはなりません。</p>

<p>そこで私は、以下のようにしてキャッシュのバージョン管理を自動化しています。<br>
いわゆるテクニックってやつです。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// sw.js</span>
<span class="kr">const</span> <span class="nx">VERSION</span> <span class="o">=</span> <span class="s2">"&lt;%= hash %&gt;"</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">STATIC_CACHE_KEY</span> <span class="o">=</span> <span class="s1">'static-'</span> <span class="o">+</span> <span class="nx">VERSION</span><span class="p">;</span>
</pre></div></div>

<p>何をしているのかというと、 <a href="http://www.embeddedjs.com/" rel="nofollow noopener" target="_blank">ejs</a>にてバージョンを外から受け取れるようにし、gulpでビルド時にバージョンを与えています。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// gulpfile.js</span>
<span class="kd">var</span> <span class="nx">gulp</span>         <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"gulp"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">babelify</span>     <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"babelify"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">browserify</span>   <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"gulp-browserify"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">plumber</span>      <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"gulp-plumber"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">uglify</span>       <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"gulp-uglify"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ejs</span>          <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"gulp-ejs"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">execSync</span>     <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"child_process"</span><span class="p">).</span><span class="nx">execSync</span><span class="p">;</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s2">"sw"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">hash</span> <span class="o">=</span> <span class="nx">execSync</span><span class="p">(</span><span class="s2">"git rev-parse HEAD"</span><span class="p">).</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">EOL</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>

  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s2">"assets/javascripts/sw/sw.js"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">plumber</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">ejs</span><span class="p">({</span>
    <span class="nx">hash</span><span class="o">:</span> <span class="nx">hash</span>
  <span class="p">}))</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">browserify</span><span class="p">({</span>
    <span class="nx">transform</span><span class="o">:</span> <span class="s2">"babelify"</span>
  <span class="p">}))</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">uglify</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s2">"build"</span><span class="p">));</span>
<span class="p">});</span>
</pre></div></div>

<p>ここではバージョン番号としてgitのrevisionを採用しています。<br>
これにより、gitの最新revisionが変更されるたびに <code>STATIC_CACHE_KEY</code> が変更され、キャッシュを最新のファイルで保つことができます。</p>

<p>昨今のフロントエンド開発ではタスクランナーは手放せないため、このようにすることでバージョンの手動管理から脱却しています。</p>

<h3>
<span id="service-worker自体のキャッシュ管理" class="fragment"></span><a href="#service-worker%E8%87%AA%E4%BD%93%E3%81%AE%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>Service Worker自体のキャッシュ管理</h3>

<p>前述のService Workerの更新チェックや <code>registration.update()</code> は、Service Worker自身の <code>Cache-Control</code> に基づきます。</p>

<p>そのため、max-ageを長く設定してしまうと、更新したいタイミングに更新されないといったことが起きてしまいます。<br>
そこで、サーバ側でService Workerのmax-ageを0に設定することをお勧めします。<br>
no-storeにして毎回サーバから取得させてもいいですが、上述のバージョン管理の自動化を行った場合には、適切なタイミングでsw.jsが変更されるため、max-ageを0にした方が不要なリクエストが発生しなくなります。</p>

<p>これにより、適切なタイミングでのみService Workerの更新が走ることになります。<br>
これもまたテクニックです。</p>

<h3>
<span id="受動的オフラインキャッシュ" class="fragment"></span><a href="#%E5%8F%97%E5%8B%95%E7%9A%84%E3%82%AA%E3%83%95%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5"><i class="fa fa-link"></i></a>受動的オフラインキャッシュ</h3>

<p>最後はPush APIと組み合わせた受動的オフラインキャッシュです。<br>
(<strong>これを実現するには<a href="https://developers.google.com/web/updates/2016/03/web-push-encryption" rel="nofollow noopener" target="_blank">payload付きWeb Push</a>である必要があります</strong>)</p>

<p>これはPush APIにてアプリケーション側からブラウザに対してプッシュ通知を行った際に、キャッシュさせたいURLを付与しておくことでそれをService Worker側でプッシュ受け取り時にキャッシュし、ユーザがプッシュ通知をクリックしたときに高速でWebページを開くためのテクニックです。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// sw.js</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'push'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">STATIC_CACHE_KEY</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">cache</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="nx">mode</span><span class="o">:</span> <span class="s1">'no-cors'</span> <span class="p">})).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
      <span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">registration</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'notificationclick'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">notification</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">clients</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">notification</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>
  <span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

<p><code>onpush</code> で受け取ったイベントのjsonからキャッシュしたいURLを取り出しFetch APIで取得後キャッシュに格納し、そのあとでユーザに見せるための通知を表示させています。<br>
これにより、ユーザが通知をクリックする際にはファイルがキャッシュ済みであるため、インターネットへのリクエストなしでユーザはページにアクセスすることが可能となっています。</p>

<p>Service Workerはブラウザのlifetimeとは独立して動作するため、このようなことも可能となっています。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>長くなりましたが、以上でService Workerを用いたオフラインキャッシュとそのテクニックの解説は終了です。</p>

<p>テクニックはいかがでしたでしょうか。</p>

<p>テクニックをまとめると、</p>

<ul>
<li>registration.update() の実行でページを開きなおすことなくService Workerを更新</li>
<li>oninstall時にFetch APIでキャッシュを取得する際は <code>no-cache</code> で常に最新ファイルを取得</li>
<li>キャッシュはバージョン管理して古いキャッシュは削除する</li>
<li>キャッシュのバージョン管理はejsでビルド時に外から与えることで自動化</li>
<li>Service Workerのファイルはmax-age=0にして常に最新を保つ</li>
<li>Push APIを組み合わせることでプッシュ通知と同時にファイルをキャッシュし高速なユーザ体験を実現</li>
</ul>

<p>といったところになります。</p>

<p>最後の受動的オフラインキャッシュなんかは、今後モバイルのブラウザのPush APIの実装が進むことで重要度が上がってくるのではないかと考えています。<br>
特にブログやニュースサイトにおいて新しい記事の通知をするといった用途とは相性がいいでしょう。</p>

<p>最後にここまでのソースコードをまとめて終わりとします。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span class="nt">&lt;script&gt;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">'/sw.js'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">scope</span><span class="o">:</span> <span class="s1">'.'</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">registraion</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">registraion</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div></div>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">// sw.js</span>
<span class="kr">const</span> <span class="nx">VERSION</span> <span class="o">=</span> <span class="s2">"&lt;%= hash %&gt;"</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">ORIGIN</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">+</span> <span class="s1">'//'</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">hostname</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">STATIC_CACHE_KEY</span> <span class="o">=</span> <span class="s1">'static-'</span> <span class="o">+</span> <span class="nx">VERSION</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">STATIC_FILES</span> <span class="o">=</span> <span class="p">[</span>
  <span class="nx">ORIGIN</span> <span class="o">+</span> <span class="s1">'/'</span><span class="p">,</span>
  <span class="nx">ORIGIN</span> <span class="o">+</span> <span class="s1">'/stylesheets/index.css'</span><span class="p">,</span>
  <span class="nx">ORIGIN</span> <span class="o">+</span> <span class="s1">'/javascripts/index.js'</span><span class="p">,</span>
  <span class="s1">'https://file.kaihar4.com/images/icon.png'</span>
<span class="p">];</span>

<span class="kr">const</span> <span class="nx">CACHE_KEYS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="nx">STATIC_CACHE_KEY</span>
<span class="p">];</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'install'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">STATIC_CACHE_KEY</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">cache</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
        <span class="nx">STATIC_FILES</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">url</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="nx">cache</span><span class="o">:</span> <span class="s1">'no-cache'</span><span class="p">,</span> <span class="nx">mode</span><span class="o">:</span> <span class="s1">'no-cors'</span> <span class="p">})).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
          <span class="p">});</span>
        <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'fetch'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">respondWith</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">response</span> <span class="o">||</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'activate'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">keys</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
        <span class="nx">keys</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">key</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="o">!</span><span class="nx">CACHE_KEYS</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
        <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">caches</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
        <span class="p">})</span>
      <span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'push'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">STATIC_CACHE_KEY</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">cache</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="nx">mode</span><span class="o">:</span> <span class="s1">'no-cors'</span> <span class="p">})).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
      <span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">registration</span><span class="p">.</span><span class="nx">showNotification</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">});</span>

<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'notificationclick'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">notification</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
    <span class="nx">clients</span><span class="p">.</span><span class="nx">openWindow</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">notification</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>
  <span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/webpack" title="webpack">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/f3df4212186cd68ecddf40fb06b85643b395e239/large.jpg?1425612954" class="user-icon" title="webpack">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/webpack">
            webpack
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/tyahha/items/b655ee3b6da572efea82" title="webpackのチュートリアル記事の紹介とハマりポイント、その解決法">
            webpackのチュートリアル記事の紹介とハマりポイント、その解決法
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/webpack">
                webpack
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            2
          </li>
          <li>
            <a href="http://qiita.com/tyahha/items/b655ee3b6da572efea82#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-b655ee3b6da572efea82" class="item-body markdownContent bordered">
        <p>webpackについてきちんと理解しようと思っていろいろと調べていたところ次の記事がとてもよかったので紹介します。ただ、少しハマったポイントがあったのでその内容を備忘とともにシェアします。</p>

<h1>
<span id="記事へのリンク" class="fragment"></span><a href="#%E8%A8%98%E4%BA%8B%E3%81%B8%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>記事へのリンク</h1>

<ul>
<li><a href="http://js.studio-kingdom.com/webpack/getting_started/webpack_your_bags" rel="nofollow noopener" target="_blank">Webpack your bags</a></li>
</ul>

<h1>
<span id="ハマった現象---webpackがinstallできない" class="fragment"></span><a href="#%E3%83%8F%E3%83%9E%E3%81%A3%E3%81%9F%E7%8F%BE%E8%B1%A1---webpack%E3%81%8Cinstall%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>ハマった現象① - webpackがinstallできない</h1>

<p>これは自分の単純(?)なミスです。<br>
作業を開始するときに作業ディレクトリは「(home)\work\study\webpack」のようにしていました。この状態で「npm init -y」すると、自動で作成されるpackage.jsonに記載される自分のモジュール名(name)がディレクトリ名「webpack」になります。</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">package.json(抜粋)</span></div>
<div class="highlight"><pre>{
     "name": "webpack",
         ...
</pre></div>
</div>

<p>この状態でwebpackをインストールしようとすると「モジュール名が被っているからインストールできないよ」のようなことでnpmさんに怒られました。<br>
対処法としてはディレクトリを切りなおす方法もあるのですが、面倒くさいですし、「\study\webpack」にしておきたかったのでモジュール名を「webpack-study」に変更して対応しました。</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">package.json(抜粋)</span></div>
<div class="highlight"><pre>{
     "name": "webpack-study",
         ...
</pre></div>
</div>

<p>一見、つまらない問題ですが普段は躓かない「npm install」でのっけからこけたので少し焦りました。そして当然ググっても回答はありません。冷静にエラーメッセージを読めばすぐに解決できました。</p>

<h1>
<span id="ハマった現状---jqueryがbundleされない" class="fragment"></span><a href="#%E3%83%8F%E3%83%9E%E3%81%A3%E3%81%9F%E7%8F%BE%E7%8A%B6---jquery%E3%81%8Cbundle%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>ハマった現状② - JQueryがbundleされない</h1>

<ul>
<li><p>「最初のローダーの設定」のセクション<br>
(ES2015でJSを記述するためにbabel-loaderを導入するところ</p></li>
<li><p>現象<br>
正常にwebpackのプロセス自体は正常に終了。<br>
何も考えずにページを開くとjqueryのあたりでエラー<br>
「--display-modules」を付けてwebpackするとJQueryがbundleされないことが判明。</p></li>
</ul>

<h2>
<span id="原因" class="fragment"></span><a href="#%E5%8E%9F%E5%9B%A0"><i class="fa fa-link"></i></a>原因</h2>

<p>babel-loaderの適用先のディレクトリを次のようにincludeを指定しています(抜粋)。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">webpack.config.js</span></div>
<div class="highlight"><pre>            <span class="p">{</span>
                <span class="nx">test</span><span class="o">:</span>   <span class="sr">/\.js/</span><span class="p">,</span>
                <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
                <span class="nx">include</span><span class="o">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/src'</span><span class="p">,</span>
            <span class="p">}</span>
</pre></div>
</div>

<p>このincludeの指定がうまく効いていない。<br>
その結果、「require」→「import」に変更したけれども、babel-loaderが働かずにJQueryが必要なモジュールとして認識できていなかったっぽい。</p>

<p>試しに「module.export」の上あたりに次のようなコードを埋め込んで見ました。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">__dirname</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">{</span><span class="nx">__dirname</span><span class="p">}]</span><span class="err">`</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="err">/src = [${__dirname}/src]`);</span>
<span class="c1">// --- 出力 ---</span>
<span class="c1">// __dirname = [C:\Users\PC User\work\study\webpack]</span>
<span class="c1">// __dirname + /src = [C:\Users\PC User\work\study\webpack/src]</span>
</pre></div></div>

<p>上記の結果を見るとパスのデリミタが「\」と「/」で混在していることが問題のようです。<br>
- 僕の作業マシンはWindowsなのでデリミタが「/」のOSで開発されている場合は問題は発生しないと思います。<br>
- 「C:\Users\PC User\work\study\webpack」がプロジェクトの作業ディレクトリになります。<br>
- ES2015のテンプレートリテラルを使用しています。webpack.config.jsをES2015で記述するために下記の「ちなみに - webpack.config.jsをES2015で書く」を参照してください。</p>

<h2>
<span id="対応方法１" class="fragment"></span><a href="#%E5%AF%BE%E5%BF%9C%E6%96%B9%E6%B3%95%EF%BC%91"><i class="fa fa-link"></i></a>対応方法１</h2>

<p>そもそも、なぜincludeを指定するか？<br>
紹介した記事にも記載があるのですが、仮にincludeをしない場合、babel-loaderは作業ディレクトリ配下のすべてのjsを参照してしまうので、node_modules配下にあるJQueryの本体とかも見に行ってエラーになってしまうようです。これを回避するために、babel-loaderの対象ディレクトリを指定する必要があります。<br>
「node_modules」をbabel-loaderの対象にしなければ良いわけなので「include」とは逆の、除外指定「exclude」を使用すると問題が解決します。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">webpack.config.js</span></div>
<div class="highlight"><pre>            <span class="p">{</span>
                <span class="nx">test</span><span class="o">:</span>   <span class="sr">/\.js/</span><span class="p">,</span>
                <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
<span class="c1">//                include: __dirname + '/src',</span>
                <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
            <span class="p">}</span>
</pre></div>
</div>

<p>参考：<a href="http://qiita.com/haribote/items/73ede4fcdf9c942f1c4f" id="reference-05b9f4af0df056d12155">webpackでbabel際はnode_modulesをexcludeし忘れるべからず</a></p>

<h2>
<span id="対処方法２" class="fragment"></span><a href="#%E5%AF%BE%E5%87%A6%E6%96%B9%E6%B3%95%EF%BC%92"><i class="fa fa-link"></i></a>対処方法２</h2>

<p>たとえば、babel-loaderを効かせたいJSと効かせたくないJSが混在している場合、対処方法１のようなブラックリスト方式では対応がしにくくなるかなと思いました。たとえば、既存プロジェクトのJSを少しずつモダンな環境へ移行していく場合など。おそらく「<strong>dirname + "/src"」を「</strong>dirname + "\src」にするのが簡単なのですが、それだとmacなどで開発するメンバーがいた場合に困ってしまいます。</p>

<p>そこで使用するのが「path」モジュールです。<br>
「path」モジュールはNode.jsのプリセットモジュールです。<br>
<a href="https://nodejs.org/api/path.html#path_path" class="autolink" rel="nofollow noopener" target="_blank">https://nodejs.org/api/path.html#path_path</a></p>

<p>※ちなみに「_<em>dirname」もNode.jsのグローバルオブジェクトです<br>
<a href="https://nodejs.org/docs/latest/api/globals.html#globals" class="autolink" rel="nofollow noopener" target="_blank">https://nodejs.org/docs/latest/api/globals.html#globals</a></em>dirname</p>

<p>これで開発環境でのpath関連の違いが吸収できます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">webpack.config.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span> <span class="c1">// これを追加しないと使えません</span>
<span class="o">:</span>
            <span class="p">{</span>
                <span class="nx">test</span><span class="o">:</span>   <span class="sr">/\.js/</span><span class="p">,</span>
                <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
                 <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">"/src"</span><span class="p">)</span>
            <span class="p">}</span>
</pre></div>
</div>

<p>確認のログ出力。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">"/src"</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">{</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">"/src"</span><span class="p">)}]</span><span class="err">`</span><span class="p">);</span>
<span class="c1">// --- 出力 ---</span>
<span class="c1">// path.join(__dirname, "/src") = [C:\Users\PC User\work\study\webpack\src]</span>
</pre></div></div>

<p>チームで開発する場合やOSSにするものは常にpathモジュールを使用するべきだと思いました。</p>

<h1>
<span id="ちなみに---webpackconfigjsをes2015で書く" class="fragment"></span><a href="#%E3%81%A1%E3%81%AA%E3%81%BF%E3%81%AB---webpackconfigjs%E3%82%92es2015%E3%81%A7%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>ちなみに - webpack.config.jsをES2015で書く</h1>

<p>webpack.config.jsをリネームしてwebpack.config.babel.jsにするとwebpack.config.jsをES2015で記述できます。そのため上述のwebpack.configは次のように書き換えることができます。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">//var path = require('path');　↓が書き換え版</span>
<span class="kr">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">'path'</span><span class="p">;</span>
<span class="o">:</span>
<span class="c1">// module.exports = { ↓が書き換え版</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</pre></div></div>

<p>途中で出てきたログ出力にテンプレートリテラルが登場させてしまったのですが、書き換えたくなかったし、参考になればと思ってこんな感じで記載しました。わかりにくかったらすみません。</p>

<h1>
<span id="ちなみに---jqueryのインストールの仕方" class="fragment"></span><a href="#%E3%81%A1%E3%81%AA%E3%81%BF%E3%81%AB---jquery%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AE%E4%BB%95%E6%96%B9"><i class="fa fa-link"></i></a>ちなみに② - JQueryのインストールの仕方</h1>

<p>チュートリアルではJQueryとwebpackのインストールするとき、次のようにオプションに違いがあります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>$ npm install jquery --save
$ npm install webpack --save-dev
</pre></div></div>

<p>結論からいうとどちらも「--save-dev」でOKのようです。<br>
そのため次のコマンドでOKです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>$ npm install jquery webpack --save-dev
</pre></div></div>

<p>「--save-dev」は開発時に必要なモジュール(ビルドやLint関連など)をインストールときに使用し、「--save」は実行時に必要なライブラリをインストールときに使用するようです。この実行時というのはNode.jsで動くJSの実行時のことで、今回のようなケースではJQueryはwebpackが利用するだけですからビルド時に参照できれば良いということになります。JQueryはフロントエンドからすると実行時にあればよいライブラリなので少し紛らわしいですね。bundle.jsにJQueryもJQueryを参照するJSもすべて１つになるので実行時には必要ないという「とらえ方」もできます。</p>

<p>また、実際は「--save」でも「--save-dev」でもどちらでもきちんとbundleされるようなので、今のところはどっちでもいいような気がしています。どちらにある「べき」かは今のところ、自分の中では判断がつかないので、ご助言を頂けると助かります。</p>

<p>この辺りについて言及する必要がある場合にはNode.jsをより詳しく調べたほうが良いと考えてますので、これに関して調べて何か気づきや思い付きがあったら、また別の記事を書こうと思います。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track hidden"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/tyahha/items/b655ee3b6da572efea82" title="webpackのチュートリアル記事の紹介とハマりポイント、その解決法">
            webpackのチュートリアル記事の紹介とハマりポイント、その解決法
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/webpack">
                webpack
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            2
          </li>
          <li>
            <a href="http://qiita.com/tyahha/items/b655ee3b6da572efea82#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-b655ee3b6da572efea82" class="item-body markdownContent bordered">
        <p>webpackについてきちんと理解しようと思っていろいろと調べていたところ次の記事がとてもよかったので紹介します。ただ、少しハマったポイントがあったのでその内容を備忘とともにシェアします。</p>

<h1>
<span id="記事へのリンク" class="fragment"></span><a href="#%E8%A8%98%E4%BA%8B%E3%81%B8%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>記事へのリンク</h1>

<ul>
<li><a href="http://js.studio-kingdom.com/webpack/getting_started/webpack_your_bags" rel="nofollow noopener" target="_blank">Webpack your bags</a></li>
</ul>

<h1>
<span id="ハマった現象---webpackがinstallできない" class="fragment"></span><a href="#%E3%83%8F%E3%83%9E%E3%81%A3%E3%81%9F%E7%8F%BE%E8%B1%A1---webpack%E3%81%8Cinstall%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>ハマった現象① - webpackがinstallできない</h1>

<p>これは自分の単純(?)なミスです。<br>
作業を開始するときに作業ディレクトリは「(home)\work\study\webpack」のようにしていました。この状態で「npm init -y」すると、自動で作成されるpackage.jsonに記載される自分のモジュール名(name)がディレクトリ名「webpack」になります。</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">package.json(抜粋)</span></div>
<div class="highlight"><pre>{
     "name": "webpack",
         ...
</pre></div>
</div>

<p>この状態でwebpackをインストールしようとすると「モジュール名が被っているからインストールできないよ」のようなことでnpmさんに怒られました。<br>
対処法としてはディレクトリを切りなおす方法もあるのですが、面倒くさいですし、「\study\webpack」にしておきたかったのでモジュール名を「webpack-study」に変更して対応しました。</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">package.json(抜粋)</span></div>
<div class="highlight"><pre>{
     "name": "webpack-study",
         ...
</pre></div>
</div>

<p>一見、つまらない問題ですが普段は躓かない「npm install」でのっけからこけたので少し焦りました。そして当然ググっても回答はありません。冷静にエラーメッセージを読めばすぐに解決できました。</p>

<h1>
<span id="ハマった現状---jqueryがbundleされない" class="fragment"></span><a href="#%E3%83%8F%E3%83%9E%E3%81%A3%E3%81%9F%E7%8F%BE%E7%8A%B6---jquery%E3%81%8Cbundle%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>ハマった現状② - JQueryがbundleされない</h1>

<ul>
<li><p>「最初のローダーの設定」のセクション<br>
(ES2015でJSを記述するためにbabel-loaderを導入するところ</p></li>
<li><p>現象<br>
正常にwebpackのプロセス自体は正常に終了。<br>
何も考えずにページを開くとjqueryのあたりでエラー<br>
「--display-modules」を付けてwebpackするとJQueryがbundleされないことが判明。</p></li>
</ul>

<h2>
<span id="原因" class="fragment"></span><a href="#%E5%8E%9F%E5%9B%A0"><i class="fa fa-link"></i></a>原因</h2>

<p>babel-loaderの適用先のディレクトリを次のようにincludeを指定しています(抜粋)。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">webpack.config.js</span></div>
<div class="highlight"><pre>            <span class="p">{</span>
                <span class="nx">test</span><span class="o">:</span>   <span class="sr">/\.js/</span><span class="p">,</span>
                <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
                <span class="nx">include</span><span class="o">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/src'</span><span class="p">,</span>
            <span class="p">}</span>
</pre></div>
</div>

<p>このincludeの指定がうまく効いていない。<br>
その結果、「require」→「import」に変更したけれども、babel-loaderが働かずにJQueryが必要なモジュールとして認識できていなかったっぽい。</p>

<p>試しに「module.export」の上あたりに次のようなコードを埋め込んで見ました。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">__dirname</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">{</span><span class="nx">__dirname</span><span class="p">}]</span><span class="err">`</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="err">/src = [${__dirname}/src]`);</span>
<span class="c1">// --- 出力 ---</span>
<span class="c1">// __dirname = [C:\Users\PC User\work\study\webpack]</span>
<span class="c1">// __dirname + /src = [C:\Users\PC User\work\study\webpack/src]</span>
</pre></div></div>

<p>上記の結果を見るとパスのデリミタが「\」と「/」で混在していることが問題のようです。<br>
- 僕の作業マシンはWindowsなのでデリミタが「/」のOSで開発されている場合は問題は発生しないと思います。<br>
- 「C:\Users\PC User\work\study\webpack」がプロジェクトの作業ディレクトリになります。<br>
- ES2015のテンプレートリテラルを使用しています。webpack.config.jsをES2015で記述するために下記の「ちなみに - webpack.config.jsをES2015で書く」を参照してください。</p>

<h2>
<span id="対応方法１" class="fragment"></span><a href="#%E5%AF%BE%E5%BF%9C%E6%96%B9%E6%B3%95%EF%BC%91"><i class="fa fa-link"></i></a>対応方法１</h2>

<p>そもそも、なぜincludeを指定するか？<br>
紹介した記事にも記載があるのですが、仮にincludeをしない場合、babel-loaderは作業ディレクトリ配下のすべてのjsを参照してしまうので、node_modules配下にあるJQueryの本体とかも見に行ってエラーになってしまうようです。これを回避するために、babel-loaderの対象ディレクトリを指定する必要があります。<br>
「node_modules」をbabel-loaderの対象にしなければ良いわけなので「include」とは逆の、除外指定「exclude」を使用すると問題が解決します。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">webpack.config.js</span></div>
<div class="highlight"><pre>            <span class="p">{</span>
                <span class="nx">test</span><span class="o">:</span>   <span class="sr">/\.js/</span><span class="p">,</span>
                <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
<span class="c1">//                include: __dirname + '/src',</span>
                <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
            <span class="p">}</span>
</pre></div>
</div>

<p>参考：<a href="http://qiita.com/haribote/items/73ede4fcdf9c942f1c4f" id="reference-05b9f4af0df056d12155">webpackでbabel際はnode_modulesをexcludeし忘れるべからず</a></p>

<h2>
<span id="対処方法２" class="fragment"></span><a href="#%E5%AF%BE%E5%87%A6%E6%96%B9%E6%B3%95%EF%BC%92"><i class="fa fa-link"></i></a>対処方法２</h2>

<p>たとえば、babel-loaderを効かせたいJSと効かせたくないJSが混在している場合、対処方法１のようなブラックリスト方式では対応がしにくくなるかなと思いました。たとえば、既存プロジェクトのJSを少しずつモダンな環境へ移行していく場合など。おそらく「<strong>dirname + "/src"」を「</strong>dirname + "\src」にするのが簡単なのですが、それだとmacなどで開発するメンバーがいた場合に困ってしまいます。</p>

<p>そこで使用するのが「path」モジュールです。<br>
「path」モジュールはNode.jsのプリセットモジュールです。<br>
<a href="https://nodejs.org/api/path.html#path_path" class="autolink" rel="nofollow noopener" target="_blank">https://nodejs.org/api/path.html#path_path</a></p>

<p>※ちなみに「_<em>dirname」もNode.jsのグローバルオブジェクトです<br>
<a href="https://nodejs.org/docs/latest/api/globals.html#globals" class="autolink" rel="nofollow noopener" target="_blank">https://nodejs.org/docs/latest/api/globals.html#globals</a></em>dirname</p>

<p>これで開発環境でのpath関連の違いが吸収できます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">webpack.config.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span> <span class="c1">// これを追加しないと使えません</span>
<span class="o">:</span>
            <span class="p">{</span>
                <span class="nx">test</span><span class="o">:</span>   <span class="sr">/\.js/</span><span class="p">,</span>
                <span class="nx">loader</span><span class="o">:</span> <span class="s1">'babel'</span><span class="p">,</span>
                 <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">"/src"</span><span class="p">)</span>
            <span class="p">}</span>
</pre></div>
</div>

<p>確認のログ出力。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">"/src"</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">{</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">"/src"</span><span class="p">)}]</span><span class="err">`</span><span class="p">);</span>
<span class="c1">// --- 出力 ---</span>
<span class="c1">// path.join(__dirname, "/src") = [C:\Users\PC User\work\study\webpack\src]</span>
</pre></div></div>

<p>チームで開発する場合やOSSにするものは常にpathモジュールを使用するべきだと思いました。</p>

<h1>
<span id="ちなみに---webpackconfigjsをes2015で書く" class="fragment"></span><a href="#%E3%81%A1%E3%81%AA%E3%81%BF%E3%81%AB---webpackconfigjs%E3%82%92es2015%E3%81%A7%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>ちなみに - webpack.config.jsをES2015で書く</h1>

<p>webpack.config.jsをリネームしてwebpack.config.babel.jsにするとwebpack.config.jsをES2015で記述できます。そのため上述のwebpack.configは次のように書き換えることができます。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span class="c1">//var path = require('path');　↓が書き換え版</span>
<span class="kr">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">'path'</span><span class="p">;</span>
<span class="o">:</span>
<span class="c1">// module.exports = { ↓が書き換え版</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</pre></div></div>

<p>途中で出てきたログ出力にテンプレートリテラルが登場させてしまったのですが、書き換えたくなかったし、参考になればと思ってこんな感じで記載しました。わかりにくかったらすみません。</p>

<h1>
<span id="ちなみに---jqueryのインストールの仕方" class="fragment"></span><a href="#%E3%81%A1%E3%81%AA%E3%81%BF%E3%81%AB---jquery%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AE%E4%BB%95%E6%96%B9"><i class="fa fa-link"></i></a>ちなみに② - JQueryのインストールの仕方</h1>

<p>チュートリアルではJQueryとwebpackのインストールするとき、次のようにオプションに違いがあります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>$ npm install jquery --save
$ npm install webpack --save-dev
</pre></div></div>

<p>結論からいうとどちらも「--save-dev」でOKのようです。<br>
そのため次のコマンドでOKです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>$ npm install jquery webpack --save-dev
</pre></div></div>

<p>「--save-dev」は開発時に必要なモジュール(ビルドやLint関連など)をインストールときに使用し、「--save」は実行時に必要なライブラリをインストールときに使用するようです。この実行時というのはNode.jsで動くJSの実行時のことで、今回のようなケースではJQueryはwebpackが利用するだけですからビルド時に参照できれば良いということになります。JQueryはフロントエンドからすると実行時にあればよいライブラリなので少し紛らわしいですね。bundle.jsにJQueryもJQueryを参照するJSもすべて１つになるので実行時には必要ないという「とらえ方」もできます。</p>

<p>また、実際は「--save」でも「--save-dev」でもどちらでもきちんとbundleされるようなので、今のところはどっちでもいいような気がしています。どちらにある「べき」かは今のところ、自分の中では判断がつかないので、ご助言を頂けると助かります。</p>

<p>この辺りについて言及する必要がある場合にはNode.jsをより詳しく調べたほうが良いと考えてますので、これに関して調べて何か気づきや思い付きがあったら、また別の記事を書こうと思います。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/hogehogeho/items/a8e00e0f49a84e03b257" title="暗黙の型変換">
            暗黙の型変換
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/hogehogeho/items/a8e00e0f49a84e03b257#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-a8e00e0f49a84e03b257" class="item-body markdownContent bordered">
        <p>プリミティブなNumberやString型で、互換性のあるNumberやStringオブジェクトのプロパティを呼ぶときは暗黙的な変換が行われる。<br>
変換されたオブジェクトのことをラッパーオブジェクト（Wrapper Object）という。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/acro5piano/items/a7c41824d88cddbe06f3" title="Vue.jsでTODOリスト（クライアントサイドのみ）">
            Vue.jsでTODOリスト（クライアントサイドのみ）
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/vue.js">
                vue.js
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/acro5piano/items/a7c41824d88cddbe06f3#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-a7c41824d88cddbe06f3" class="item-body markdownContent bordered">
        <p>今話題になりつつあるVue.jsで、クライアントサイドのみのTODOアプリを作りました。</p>

<p>簡単にするため、スタイルシートは未使用です。</p>

<p>デモ <a href="https://acro5piano.github.io/vuejs-todo" class="autolink" rel="nofollow noopener" target="_blank">https://acro5piano.github.io/vuejs-todo</a><br>
ソースコード <a href="https://github.com/acro5piano/learn-vuejs" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/acro5piano/learn-vuejs</a></p>

<h1>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h1>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">index.html</span></div>
<div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head</span> <span class="na">id=</span><span class="s">"head"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Todo list<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Task list<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;table&gt;</span>
        <span class="nt">&lt;tr</span> <span class="na">v-for=</span><span class="s">"(task, index) in tasks"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">v-if=</span><span class="s">"!task.editable"</span><span class="nt">&gt;</span>{{ task.text }}<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">v-if=</span><span class="s">"task.editable"</span>
                   <span class="na">v-model=</span><span class="s">"task.text"</span>
                   <span class="na">v-on:keyup</span><span class="err">.</span><span class="na">enter=</span><span class="s">"editTask(index, task.text)"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">v-on:click=</span><span class="s">"makeTaskEditable(index)"</span><span class="nt">&gt;</span>
              edit
            <span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">v-on:click=</span><span class="s">"deleteTask(index)"</span><span class="nt">&gt;</span>delete<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Add new task<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">v-on:keyup</span><span class="err">.</span><span class="na">enter=</span><span class="s">"addTask"</span> <span class="na">v-model=</span><span class="s">"newTaskName"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/vue/dist/vue.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">app.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s1">'#app'</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">'Learn JavaScript'</span><span class="p">,</span> <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
      <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">'Learn Vue'</span> <span class="p">,</span>  <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
      <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">'Build todo list'</span><span class="p">,</span> <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
    <span class="p">],</span>
    <span class="nx">newTaskName</span><span class="o">:</span> <span class="s1">''</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">addTask</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">newTaskName</span><span class="p">,</span> <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">})</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">newTaskName</span> <span class="o">=</span> <span class="s1">''</span>
    <span class="p">},</span>
    <span class="nx">deleteTask</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">editTask</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">editable</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nx">makeTaskEditable</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">editable</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>

<p><code>editable</code>を動的に設定したいです。<br>
が、要素を動的に追加する方法だと、うまく行かなかったのでいったんこれで。</p>

<h1>
<span id="感想" class="fragment"></span><a href="#%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>感想</h1>

<p><code>vue.js</code>は非常にシンプルで分かりやすいですね。</p>

<p>RubyとPHPを主に触る自分でも理解できました。MVCのView概念がそのまま通用する感じです。</p>

<p><code>&lt;button v-on:click="deleteTask"&gt;</code>などは、平易なのでjQueryの置き換えにも使えそうです。</p>

<p>あとデータバインディング気持ちいい。</p>

<h1>
<span id="ブラウザを自動リロード" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%82%92%E8%87%AA%E5%8B%95%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>ブラウザを自動リロード</h1>

<p>開発しやすくするため、下記のgulpのタスクを作成しました。<br>
<code>browser-sync</code>で、サーバーを立ち上げておけば、保存する度にブラウザが更新されます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">gulpfile.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">gulp</span>        <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">browserSync</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'browser-sync'</span><span class="p">).</span><span class="nx">create</span><span class="p">()</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'serve'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">browserSync</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">server</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">baseDir</span><span class="o">:</span> <span class="s2">"./"</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">"./*"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="nx">browserSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>sudo npm install -g gulp
npm install --save-dev gulp browser-sync
</pre></div></div>

<p>した後に</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>gulp serve
</pre></div></div>

<p>でOKです。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track hidden"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/vue.js" title="vue.js">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/ad7b905b3e30dd18d01d563eeeb6e8988b3e3399/large.jpg?1478446740" class="user-icon" title="vue.js">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/vue.js">
            vue.js
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/acro5piano/items/a7c41824d88cddbe06f3" title="Vue.jsでTODOリスト（クライアントサイドのみ）">
            Vue.jsでTODOリスト（クライアントサイドのみ）
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
            <li>
              <a href="/tags/vue.js">
                vue.js
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/acro5piano/items/a7c41824d88cddbe06f3#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-a7c41824d88cddbe06f3" class="item-body markdownContent bordered">
        <p>今話題になりつつあるVue.jsで、クライアントサイドのみのTODOアプリを作りました。</p>

<p>簡単にするため、スタイルシートは未使用です。</p>

<p>デモ <a href="https://acro5piano.github.io/vuejs-todo" class="autolink" rel="nofollow noopener" target="_blank">https://acro5piano.github.io/vuejs-todo</a><br>
ソースコード <a href="https://github.com/acro5piano/learn-vuejs" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/acro5piano/learn-vuejs</a></p>

<h1>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h1>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">index.html</span></div>
<div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head</span> <span class="na">id=</span><span class="s">"head"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Todo list<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Task list<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;table&gt;</span>
        <span class="nt">&lt;tr</span> <span class="na">v-for=</span><span class="s">"(task, index) in tasks"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">v-if=</span><span class="s">"!task.editable"</span><span class="nt">&gt;</span>{{ task.text }}<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">v-if=</span><span class="s">"task.editable"</span>
                   <span class="na">v-model=</span><span class="s">"task.text"</span>
                   <span class="na">v-on:keyup</span><span class="err">.</span><span class="na">enter=</span><span class="s">"editTask(index, task.text)"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">v-on:click=</span><span class="s">"makeTaskEditable(index)"</span><span class="nt">&gt;</span>
              edit
            <span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">v-on:click=</span><span class="s">"deleteTask(index)"</span><span class="nt">&gt;</span>delete<span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Add new task<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">v-on:keyup</span><span class="err">.</span><span class="na">enter=</span><span class="s">"addTask"</span> <span class="na">v-model=</span><span class="s">"newTaskName"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/vue/dist/vue.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./app.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">app.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">el</span><span class="o">:</span> <span class="s1">'#app'</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">'Learn JavaScript'</span><span class="p">,</span> <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
      <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">'Learn Vue'</span> <span class="p">,</span>  <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
      <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">'Build todo list'</span><span class="p">,</span> <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
    <span class="p">],</span>
    <span class="nx">newTaskName</span><span class="o">:</span> <span class="s1">''</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">addTask</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">newTaskName</span><span class="p">,</span> <span class="nx">editable</span><span class="o">:</span> <span class="kc">false</span><span class="p">})</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">newTaskName</span> <span class="o">=</span> <span class="s1">''</span>
    <span class="p">},</span>
    <span class="nx">deleteTask</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">editTask</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">editable</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nx">makeTaskEditable</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">editable</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>

<p><code>editable</code>を動的に設定したいです。<br>
が、要素を動的に追加する方法だと、うまく行かなかったのでいったんこれで。</p>

<h1>
<span id="感想" class="fragment"></span><a href="#%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>感想</h1>

<p><code>vue.js</code>は非常にシンプルで分かりやすいですね。</p>

<p>RubyとPHPを主に触る自分でも理解できました。MVCのView概念がそのまま通用する感じです。</p>

<p><code>&lt;button v-on:click="deleteTask"&gt;</code>などは、平易なのでjQueryの置き換えにも使えそうです。</p>

<p>あとデータバインディング気持ちいい。</p>

<h1>
<span id="ブラウザを自動リロード" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%82%92%E8%87%AA%E5%8B%95%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>ブラウザを自動リロード</h1>

<p>開発しやすくするため、下記のgulpのタスクを作成しました。<br>
<code>browser-sync</code>で、サーバーを立ち上げておけば、保存する度にブラウザが更新されます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">gulpfile.js</span></div>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">gulp</span>        <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">browserSync</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'browser-sync'</span><span class="p">).</span><span class="nx">create</span><span class="p">()</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'serve'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">browserSync</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="nx">server</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">baseDir</span><span class="o">:</span> <span class="s2">"./"</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">"./*"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="nx">browserSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>sudo npm install -g gulp
npm install --save-dev gulp browser-sync
</pre></div></div>

<p>した後に</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>gulp serve
</pre></div></div>

<p>でOKです。</p>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/JavaScript" title="JavaScript">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/2952a7256e9aae64e615a248a9ca568d2a257109/large.jpg?1421232838" class="user-icon" title="JavaScript">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/JavaScript">
            JavaScript
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/may88seiji/items/cc783abdcbddc4e1da88" title="js ローマ数字変換">
            js ローマ数字変換
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/javascript">
                JavaScript
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like "></i>
            0
          </li>
          <li>
            <a href="http://qiita.com/may88seiji/items/cc783abdcbddc4e1da88#comments">
              <i class="fa fa-comment-o"></i>
              2
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-cc783abdcbddc4e1da88" class="item-body markdownContent bordered">
        
<h2>
<span id="お題" class="fragment"></span><a href="#%E3%81%8A%E9%A1%8C"><i class="fa fa-link"></i></a>お題</h2>

<p>10進法をローマ数字へ変換する。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">convertToRoman</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>


 <span class="k">return</span> <span class="p">;</span>
<span class="p">}</span>
<span class="nx">convertToRoman</span><span class="p">(</span><span class="mi">649</span><span class="p">);</span><span class="c1">//DCXLIX</span>
</pre></div></div>

<h2>
<span id="出力結果例" class="fragment"></span><a href="#%E5%87%BA%E5%8A%9B%E7%B5%90%E6%9E%9C%E4%BE%8B"><i class="fa fa-link"></i></a>出力結果　例</h2>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="nx">convertToRoman</span><span class="p">(</span><span class="mi">68</span><span class="p">)</span> <span class="c1">// "LXVIII"</span>
<span class="nx">convertToRoman</span><span class="p">(</span><span class="mi">891</span><span class="p">)</span> <span class="c1">// "DCCCXCI"</span>
<span class="nx">convertToRoman</span><span class="p">(</span><span class="mi">3999</span><span class="p">)</span> <span class="c1">// "MMMCMXCIX"</span>
</pre></div></div>

<h2>
<span id="使ったもの" class="fragment"></span><a href="#%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>使ったもの</h2>

<p>for文<br>
while文</p>

<h2>
<span id="考え方" class="fragment"></span><a href="#%E8%80%83%E3%81%88%E6%96%B9"><i class="fa fa-link"></i></a>考え方</h2>

<p>前提　ローマ数字と10進法の対応関係　<br>
1000-M, 900-CM, 500-D, 400-CD, 100-C, 90-XC, 50-L, 40-XL, 10-X, 9-IX, 5-V, 4-IV, 1-I</p>

<p>・変換前の数字と対応関係にある数字1000から順番に小さくなるように比較する。<br>
・対応関係にある数字が含まれていれば、対応するアルファベットを新しい配列に格納する。そのあとに変換前の数字から対応関係にある数字を差し引く。<br>
・差し引いた後の数字と対応関係にある次の数が含まれているか比較する。含まれているものがなくなるまで上記の処理を繰り返す。<br>
・比較するものがなくなったら用意した配列を返しておわり。</p>

<p>例　<br>
649の場合、1000,900は含まれてないので次の比較へ移る。<br>
500は含まれているので、Dを配列に格納して500を引く(変換元149)。<br>
100が含まれているのでCを格納して差し引く（49）。<br>
50は飛ばして、40が含まれているのでXLを格納して差し引く(9)。<br>
10は飛ばして、９に対応するIXを格納して比較するものがなくなる。<br>
結果はDCXLIXになる。</p>

<h2>
<span id="コード" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>コード</h2>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">convertToRoman</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">decimal</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">romanNumeral</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'M'</span><span class="p">,</span> <span class="s1">'CM'</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">,</span> <span class="s1">'CD'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">,</span> <span class="s1">'XC'</span><span class="p">,</span> <span class="s1">'L'</span><span class="p">,</span> <span class="s1">'XL'</span><span class="p">,</span> <span class="s1">'X'</span><span class="p">,</span> <span class="s1">'IX'</span><span class="p">,</span> <span class="s1">'V'</span><span class="p">,</span> <span class="s1">'IV'</span><span class="p">,</span> <span class="s1">'I'</span> <span class="p">];</span>

  <span class="kd">var</span> <span class="nx">romanized</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">decimal</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">decimal</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">romanized</span> <span class="o">+=</span> <span class="nx">romanNumeral</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">num</span> <span class="o">-=</span> <span class="nx">decimal</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">romanized</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">convertToRoman</span><span class="p">(</span><span class="mi">649</span><span class="p">);</span><span class="c1">//DCXLIX</span>
</pre></div></div>

<h3>
<span id="es6など他のコードが浮かんだ方コメントお待ちしております" class="fragment"></span><a href="#es6%E3%81%AA%E3%81%A9%E4%BB%96%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8C%E6%B5%AE%E3%81%8B%E3%82%93%E3%81%A0%E6%96%B9%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%8A%E5%BE%85%E3%81%A1%E3%81%97%E3%81%A6%E3%81%8A%E3%82%8A%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>ES6など他のコードが浮かんだ方、コメントお待ちしております。</h3>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div><div class="item-box track"><div class="vertical-close-button close">
  <i class="fa fa-angle-double-right"></i>
</div>
<div class="item-box-container-inner">
  <div class="action-user-icon action">
    
      <div class="action-icon">
        <i class="fa fa-tag"></i>
      </div>
    
    <a href="http://qiita.com/tags/Qiita" title="Qiita">
      <img src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/5805f6e678d7533dc8dc66d72d9702b28cd2022c/large.jpg?1364837545" class="user-icon" title="Qiita">
    </a>
  </div>
  <div class="item-box-area">
    <div class="item-box-header">
      <div class="action">
        <span class="user">
          <a href="http://qiita.com/tags/Qiita">
            Qiita
          </a>
        </span>
        
          に新しい投稿がありました
        
      </div>
      <div class="item-box-title">
        <h1>
          <a href="http://qiita.com/t_nakayama0714/items/776724410b2a119af088" title="Qiitaレジェンド達の偉大さをシェル芸で眺めて2016年を振り返る">
            Qiitaレジェンド達の偉大さをシェル芸で眺めて2016年を振り返る
          </a>
        </h1>
        <ul class="item-box_tagList list-unstyled">
          
            <li>
              <a href="/tags/qiita">
                Qiita
              </a>
            </li>
          
            <li>
              <a href="/tags/%e3%83%9d%e3%82%a8%e3%83%a0">
                ポエム
              </a>
            </li>
          
            <li>
              <a href="/tags/%e3%82%b7%e3%82%a7%e3%83%ab%e8%8a%b8">
                シェル芸
              </a>
            </li>
          
        </ul>
      </div>
      <div class="item-status-box">
        <ul class="unstyled">
          <li>
            <i class="fa fa-like unlike"></i>
            44
          </li>
          <li>
            <a href="http://qiita.com/t_nakayama0714/items/776724410b2a119af088#comments">
              <i class="fa fa-comment-o"></i>
              0
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="item-body-wrapper">
      <div id="item-776724410b2a119af088" class="item-body markdownContent bordered">
        
<h1>
<span id="2016年の振り返り" class="fragment"></span><a href="#2016%E5%B9%B4%E3%81%AE%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A"><i class="fa fa-link"></i></a><strong>2016年の振り返り</strong>
</h1>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/45253/ed1c0dfd-9dc3-0718-cf4a-6728fc9cbe95.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/45253/ed1c0dfd-9dc3-0718-cf4a-6728fc9cbe95.png" alt="eto_saru_kakizome.png"></a></p>

<p>私事ですが、2016年のQiita振り返りをさせていただきます。<br>
2016年に投稿したQiitaの記事は17本、これで18本目になります。</p>

<p>平均すると1カ月に1本以上書いてはいるのですが、時期的にはやはり波がありますね。<br>
ネタのストックがなかったとか <strong><a href="https://www.amazon.co.jp/dp/4798147605" rel="nofollow noopener" target="_blank">DevOps導入指南</a></strong> 執筆のタイミングと被ったとかいうのもあるかもしれませんが、下期は全体的に少なかったです。<br>
1年の中で印象深かったのは、</p>

<ul>
<li><strong><a href="http://qiita.com/t_nakayama0714/items/83ac0b12ced9e7083927" id="reference-8a5b07c2de5b72b8271e">エンジニアなら知っておきたい、絵で見てわかるセキュア通信の基本</a></strong></li>
</ul>

<p>の記事で、ありがたいことにこれだけで2000を超えるいいね<sup id="fnref1"><a href="#fn1" rel="footnote" title="投稿した当時はまだストックによるContribution反映でした。">1</a></sup>をいただくことができ、他の記事とあわせて年初に500程度だった総Contributionは現時点で3700を超えるまでになりました。</p>

<p>個人的にこうした数字で見える成果は好きなので、来年もアウトプットを続けるモチベーションになったと思っています。</p>

<h1>
<span id="contributionの分析" class="fragment"></span><a href="#contribution%E3%81%AE%E5%88%86%E6%9E%90"><i class="fa fa-link"></i></a><strong>Contributionの分析</strong>
</h1>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/45253/c97df5f9-7220-b432-485b-4dc77cffc59d.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/45253/c97df5f9-7220-b432-485b-4dc77cffc59d.png" alt="tantei_boy.png"></a></p>

<p>さて、現時点での総Contributionは上の記事1本によるところが大きいのですが、ちょっとContributionの分析をやってみます。</p>

<ul>
<li>総Contribution</li>
<li>記事数</li>
<li>記事あたりの平均Contribution(平均)</li>
<li>Top記事によるContribution(Top数)</li>
<li>Top記事によるContributionが総Contributionに占める割合(Top占有率)</li>
</ul>

<table>
<thead>
<tr>
<th style="text-align: center">総Contribution</th>
<th style="text-align: center">記事数</th>
<th style="text-align: center">平均</th>
<th style="text-align: center">Top数</th>
<th style="text-align: center">Top占有率</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">3799</td>
<td style="text-align: center">26</td>
<td style="text-align: center">146.115</td>
<td style="text-align: center">2390</td>
<td style="text-align: center">62.91%</td>
</tr>
</tbody>
</table>

<p>という感じでした。<br>
やはりTop記事による占有率が半分以上、運の要素があるとはいえ、ぽっと出感が否めません。<br>
継続的によいアウトプットを出しつつ、よりContributionを高めていきたいと思います( <strong>使命感</strong> )</p>

<h1>
<span id="qiitaレジェンド達はどうか" class="fragment"></span><a href="#qiita%E3%83%AC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%89%E9%81%94%E3%81%AF%E3%81%A9%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a><strong>Qiitaレジェンド達はどうか</strong>
</h1>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/45253/bf3549c1-9402-2622-1f7d-02a7e68b7b11.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/45253/bf3549c1-9402-2622-1f7d-02a7e68b7b11.png" alt="moses_umi.png"></a></p>

<p>それではQiitaで <strong>総ContributionのTOP100をひた走るQiitaレジェンド達</strong> はどうなのでしょうか。</p>

<p>まず、Qiitaレジェンドの一覧を得なければなりません。</p>

<ul>
<li><strong><a href="http://y-temp4.hatenablog.com/entry/qiita-user-ranking" rel="nofollow noopener" target="_blank">QiitaでのContribution数によるユーザーランキングを表示するサイトを作りました</a></strong></li>
</ul>

<p>ありがたいことにランキングサイトを作ってくださった方がいました。たまに見てます^^(病気)。<br>
そういえば現時点で僕は104位でした。もう少しでTOP100入り...！</p>

<ul>
<li><strong><a href="https://qiita-user-ranking.herokuapp.com" rel="nofollow noopener" target="_blank">Qiita User Ranking</a></strong></li>
</ul>

<p>こちらでTOP100<sup id="fnref2"><a href="#fn2" rel="footnote" title="なお、こちらのサイトの仕様上「サイトにある情報は結構タイムラグがあったりします」とのことなので、実際のTOP100ではない可能性があります。">2</a></sup>のユーザを確認することができます。<br>
あとはそれぞれのユーザを確認してちまちま計算すれば大丈夫そうです。</p>

<p>それでは、地道に収集、計算していきたいと思います。<br>
なお、たまたま私は <strong>シェル芸人<sup id="fnref3"><a href="#fn3" rel="footnote" title="シェル芸: マウスも使わず、ソースコードも残さず、GUIツールを立ち上げる間もなく、あらゆる調査・計算・テキスト処理をCLI端末へのコマンド入力一撃で終わらすこと。あるいはそのときのコマンド入力のこと。(シェル芸の定義バージョン1.1)">3</a></sup></strong> を目指しておりますので、地道にワンライナーでの収集、計算にチャレンジします。環境はCentOS 7.2.1511<sup id="fnref4"><a href="#fn4" rel="footnote" title="GNU bash 4.2.46, GNU sed 4.2.2, GNU Awk 4.0.2でした。">4</a></sup>です。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span class="nv">$ </span><span class="k">for</span> PAGE in <span class="k">$(</span>seq <span class="m">1</span> 5<span class="k">)</span> <span class="p">;</span> <span class="k">do</span> <span class="k">for</span> USER in <span class="k">$(</span>curl -s https://qiita-user-ranking.herokuapp.com/?page<span class="o">=</span><span class="k">${</span><span class="nv">PAGE</span><span class="k">}</span> <span class="p">|</span> grep -E <span class="s2">"第[0-9]*位"</span> -A <span class="m">1</span> <span class="p">|</span> grep href <span class="p">|</span> sed -e <span class="s2">"s/^.*href=\".*\"&gt;\(.*\)&lt;\/a&gt;.*$/\1/g"</span><span class="k">)</span> <span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> -en <span class="s2">"@${USER}\t"</span> <span class="p">;</span> curl -s http://qiita.com/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span> <span class="p">|</span> grep Contribution <span class="p">|</span> sed -e <span class="s2">"s/^.*&lt;span class=\"userActivityChart_statCount\"&gt;\([0-9]*\)&lt;\/span&gt;&lt;br \/&gt; &lt;span class=\"userActivityChart_statUnit\"&gt;Contribution&lt;\/span&gt;.*&lt;span class=\"userActivityChart_statCount\"&gt;\([0-9]*\)&lt;\/span&gt;&lt;br \/&gt; &lt;span class=\"userActivityChart_statUnit\"&gt;Items&lt;\/span&gt;.*&lt;span class=\"fa fa-like\"&gt;&lt;\/span&gt; \([0-9]*\)&lt;\/div&gt;.*&lt;a itemprop=\"url\" href=\"\(.*\)\"&gt;\(.*\)&lt;\/a&gt;&lt;ul class=\"list-inline userPopularItems_tags tagList\"&gt;.*\(itemprop.*\)\{,4\}.*$/\1\t\2\t\3\t\[\5\](http:\/\/qiita.com\4)/g"</span> <span class="p">;</span> <span class="k">done</span> <span class="p">;</span> <span class="k">done</span> <span class="p">|</span> awk -F<span class="s2">"\t"</span> <span class="s1">'{if(NF==5) print "|"NR"|"$1"|"$2"|"$3"|"$2/$3"|"$4"|"$4/$2*100"%|"$5}'</span>
</pre></div></div>

<p>出力がそのままMarkdownの表形式になるようにしたので見出しをつけてペタリ。</p>

<table>
<thead>
<tr>
<th style="text-align: center">ランク</th>
<th style="text-align: center">ユーザ名</th>
<th style="text-align: center">総Contribution</th>
<th style="text-align: center">記事数</th>
<th style="text-align: center">平均いいね</th>
<th style="text-align: center">Top数</th>
<th style="text-align: center">Top占有率</th>
<th style="text-align: center">Top記事</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">1</td>
<td style="text-align: center"><a href="/hirokidaichi" class="user-mention js-hovercard" title="hirokidaichi" data-hovercard-target-type="user" data-hovercard-target-name="hirokidaichi">@hirokidaichi</a></td>
<td style="text-align: center">30990</td>
<td style="text-align: center">33</td>
<td style="text-align: center">939.091</td>
<td style="text-align: center">4641</td>
<td style="text-align: center">14.9758%</td>
<td style="text-align: center"><a href="http://qiita.com/hirokidaichi/items/27c757d92b6915e8ecf7" id="reference-5dc273c5eb10f012fa4e">ペアプログラミングして気がついた新人プログラマの成長を阻害する悪習</a></td>
</tr>
<tr>
<td style="text-align: center">2</td>
<td style="text-align: center"><a href="/jnchito" class="user-mention js-hovercard" title="jnchito" data-hovercard-target-type="user" data-hovercard-target-name="jnchito">@jnchito</a></td>
<td style="text-align: center">26953</td>
<td style="text-align: center">135</td>
<td style="text-align: center">199.652</td>
<td style="text-align: center">2478</td>
<td style="text-align: center">9.19378%</td>
<td style="text-align: center"><a href="http://qiita.com/jnchito/items/459d58ba652bf4763820" id="reference-cb80742f73147671df3c">モデルやメソッドに名前を付けるときは英語の品詞に気をつけよう</a></td>
</tr>
<tr>
<td style="text-align: center">3</td>
<td style="text-align: center"><a href="/suin" class="user-mention js-hovercard" title="suin" data-hovercard-target-type="user" data-hovercard-target-name="suin">@suin</a></td>
<td style="text-align: center">20120</td>
<td style="text-align: center">652</td>
<td style="text-align: center">30.8589</td>
<td style="text-align: center">4034</td>
<td style="text-align: center">20.0497%</td>
<td style="text-align: center"><a href="http://qiita.com/suin/items/f570f057a0ff927b47dc" id="reference-3fcdeb9ae2e281185dfa">【まとめ】これ知らないプログラマって損してんなって思う汎用的なツール 100超</a></td>
</tr>
<tr>
<td style="text-align: center">4</td>
<td style="text-align: center"><a href="/icoxfog417" class="user-mention js-hovercard" title="icoxfog417" data-hovercard-target-type="user" data-hovercard-target-name="icoxfog417">@icoxfog417</a></td>
<td style="text-align: center">18927</td>
<td style="text-align: center">124</td>
<td style="text-align: center">152.637</td>
<td style="text-align: center">2057</td>
<td style="text-align: center">10.8681%</td>
<td style="text-align: center"><a href="http://qiita.com/icoxfog417/items/e8f97a6acad07903b5b0" id="reference-2e0a4644f12a718fbcb4">Pythonを書き始める前に見るべきTips</a></td>
</tr>
<tr>
<td style="text-align: center">5</td>
<td style="text-align: center"><a href="/shu223" class="user-mention js-hovercard" title="shu223" data-hovercard-target-type="user" data-hovercard-target-name="shu223">@shu223</a></td>
<td style="text-align: center">17091</td>
<td style="text-align: center">156</td>
<td style="text-align: center">109.558</td>
<td style="text-align: center">1239</td>
<td style="text-align: center">7.24943%</td>
<td style="text-align: center"><a href="http://qiita.com/shu223/items/a4fc17eb3356a6068553" id="reference-4f0900cec0116e30718e">ディープラーニングの有名ライブラリ5種を最短距離で試す半日コース（TensorFlow, Chainer, Caffe, DeepDream, 画風変換）</a></td>
</tr>
<tr>
<td style="text-align: center">6</td>
<td style="text-align: center"><a href="/KeithYokoma" class="user-mention js-hovercard" title="KeithYokoma" data-hovercard-target-type="user" data-hovercard-target-name="KeithYokoma">@KeithYokoma</a></td>
<td style="text-align: center">16737</td>
<td style="text-align: center">138</td>
<td style="text-align: center">121.283</td>
<td style="text-align: center">3919</td>
<td style="text-align: center">23.4152%</td>
<td style="text-align: center"><a href="http://qiita.com/KeithYokoma/items/2193cf79ba76563e3db6" id="reference-f94f0d87772496affd5a">うまくメソッド名を付けるための参考情報</a></td>
</tr>
<tr>
<td style="text-align: center">7</td>
<td style="text-align: center"><a href="/yuku_t" class="user-mention js-hovercard" title="yuku_t" data-hovercard-target-type="user" data-hovercard-target-name="yuku_t">@yuku_t</a></td>
<td style="text-align: center">16134</td>
<td style="text-align: center">182</td>
<td style="text-align: center">88.6484</td>
<td style="text-align: center">1352</td>
<td style="text-align: center">8.37982%</td>
<td style="text-align: center"><a href="http://qiita.com/yuku_t/items/961194a5443b618a4cac" id="reference-68c1544a31c0b804def7">中規模Web開発のためのMVC分割とレイヤアーキテクチャ</a></td>
</tr>
<tr>
<td style="text-align: center">8</td>
<td style="text-align: center"><a href="/kenju" class="user-mention js-hovercard" title="kenju" data-hovercard-target-type="user" data-hovercard-target-name="kenju">@kenju</a></td>
<td style="text-align: center">15443</td>
<td style="text-align: center">120</td>
<td style="text-align: center">128.692</td>
<td style="text-align: center">2173</td>
<td style="text-align: center">14.0711%</td>
<td style="text-align: center"><a href="http://qiita.com/kenju/items/c7fad62a12cc2809b507" id="reference-ae09477b2a0fbad956bc">中上級者になるためのJavaScript【知識編】</a></td>
</tr>
<tr>
<td style="text-align: center">9</td>
<td style="text-align: center"><a href="/KENJU" class="user-mention js-hovercard" title="KENJU" data-hovercard-target-type="user" data-hovercard-target-name="KENJU">@KENJU</a></td>
<td style="text-align: center">15443</td>
<td style="text-align: center">120</td>
<td style="text-align: center">128.692</td>
<td style="text-align: center">2173</td>
<td style="text-align: center">14.0711%</td>
<td style="text-align: center"><a href="http://qiita.com/kenju/items/c7fad62a12cc2809b507">中上級者になるためのJavaScript【知識編】</a></td>
</tr>
<tr>
<td style="text-align: center">10</td>
<td style="text-align: center"><a href="/mizchi" class="user-mention js-hovercard" title="mizchi" data-hovercard-target-type="user" data-hovercard-target-name="mizchi">@mizchi</a></td>
<td style="text-align: center">15101</td>
<td style="text-align: center">162</td>
<td style="text-align: center">93.216</td>
<td style="text-align: center">1795</td>
<td style="text-align: center">11.8866%</td>
<td style="text-align: center"><a href="http://qiita.com/mizchi/items/3bbb3f466a3b5011b509" id="reference-c1910b3787980ea9094d">春からはじめるモダンJavaScript / ES2015</a></td>
</tr>
<tr>
<td style="text-align: center">11</td>
<td style="text-align: center"><a href="/awakia" class="user-mention js-hovercard" title="awakia" data-hovercard-target-type="user" data-hovercard-target-name="awakia">@awakia</a></td>
<td style="text-align: center">14642</td>
<td style="text-align: center">150</td>
<td style="text-align: center">97.6133</td>
<td style="text-align: center">1547</td>
<td style="text-align: center">10.5655%</td>
<td style="text-align: center"><a href="http://qiita.com/awakia/items/c571e93e96a1ec28044f" id="reference-c7ace4566d94ecfaeb59">開発フロー研修 @ Wantedly</a></td>
</tr>
<tr>
<td style="text-align: center">12</td>
<td style="text-align: center"><a href="/opengl-8080" class="user-mention js-hovercard" title="opengl-8080" data-hovercard-target-type="user" data-hovercard-target-name="opengl-8080">@opengl-8080</a></td>
<td style="text-align: center">14161</td>
<td style="text-align: center">211</td>
<td style="text-align: center">67.1137</td>
<td style="text-align: center">1205</td>
<td style="text-align: center">8.50929%</td>
<td style="text-align: center"><a href="http://qiita.com/opengl-8080/items/2fe0a20c314b1c824cc5" id="reference-562be1b9c78d68750d63">AngularJS使い方メモ</a></td>
</tr>
<tr>
<td style="text-align: center">13</td>
<td style="text-align: center"><a href="/mpyw" class="user-mention js-hovercard" title="mpyw" data-hovercard-target-type="user" data-hovercard-target-name="mpyw">@mpyw</a></td>
<td style="text-align: center">13960</td>
<td style="text-align: center">235</td>
<td style="text-align: center">59.4043</td>
<td style="text-align: center">1732</td>
<td style="text-align: center">12.4069%</td>
<td style="text-align: center"><a href="http://qiita.com/mpyw/items/b00b72c5c95aac573b71" id="reference-bbd502d8da294f919510">PHPでデータベースに接続するときのまとめ</a></td>
</tr>
<tr>
<td style="text-align: center">14</td>
<td style="text-align: center"><a href="/mono0926" class="user-mention js-hovercard" title="mono0926" data-hovercard-target-type="user" data-hovercard-target-name="mono0926">@mono0926</a></td>
<td style="text-align: center">13289</td>
<td style="text-align: center">89</td>
<td style="text-align: center">149.315</td>
<td style="text-align: center">1315</td>
<td style="text-align: center">9.8954%</td>
<td style="text-align: center"><a href="http://qiita.com/mono0926/items/ead7c576170277a5e83d" id="reference-ea556b8be2baa50f7460">ローディング時のズルい進捗表示</a></td>
</tr>
<tr>
<td style="text-align: center">15</td>
<td style="text-align: center"><a href="/muran001" class="user-mention js-hovercard" title="muran001" data-hovercard-target-type="user" data-hovercard-target-name="muran001">@muran001</a></td>
<td style="text-align: center">12312</td>
<td style="text-align: center">34</td>
<td style="text-align: center">362.118</td>
<td style="text-align: center">4191</td>
<td style="text-align: center">34.04%</td>
<td style="text-align: center"><a href="http://qiita.com/muran001/items/dea2bbbaea1260098051" id="reference-1defa074e5c6f42a16a9">Gitでやらかした時に使える19個の奥義</a></td>
</tr>
<tr>
<td style="text-align: center">16</td>
<td style="text-align: center"><a href="/haminiku" class="user-mention js-hovercard" title="haminiku" data-hovercard-target-type="user" data-hovercard-target-name="haminiku">@haminiku</a></td>
<td style="text-align: center">12144</td>
<td style="text-align: center">70</td>
<td style="text-align: center">173.486</td>
<td style="text-align: center">2800</td>
<td style="text-align: center">23.0567%</td>
<td style="text-align: center"><a href="http://qiita.com/haminiku/items/711cbdb894d1d6839e3e" id="reference-8d52950135535ad6dbf3">2016年 独りで新規WEBサービスを開発・運用した際の知見</a></td>
</tr>
<tr>
<td style="text-align: center">17</td>
<td style="text-align: center"><a href="/b4b4r07" class="user-mention js-hovercard" title="b4b4r07" data-hovercard-target-type="user" data-hovercard-target-name="b4b4r07">@b4b4r07</a></td>
<td style="text-align: center">11652</td>
<td style="text-align: center">56</td>
<td style="text-align: center">208.071</td>
<td style="text-align: center">1430</td>
<td style="text-align: center">12.2726%</td>
<td style="text-align: center"><a href="http://qiita.com/b4b4r07/items/09815eda8ef72e0b472e" id="reference-24a24c814758f04ed834">さいつよのターミナル環境を構築しよう</a></td>
</tr>
<tr>
<td style="text-align: center">18</td>
<td style="text-align: center"><a href="/appwatcher" class="user-mention js-hovercard" title="appwatcher" data-hovercard-target-type="user" data-hovercard-target-name="appwatcher">@appwatcher</a></td>
<td style="text-align: center">11583</td>
<td style="text-align: center">59</td>
<td style="text-align: center">196.322</td>
<td style="text-align: center">2004</td>
<td style="text-align: center">17.3012%</td>
<td style="text-align: center"><a href="http://qiita.com/appwatcher/items/b02255026a3ee6d95142" id="reference-c033592904dae2646c59">iOSでこんなアプリ,こんな機能を作りたかったらこれを見ろ！作りたいアプリに対応するクラス、フレームワーク、ライブラリのまとめ！</a></td>
</tr>
<tr>
<td style="text-align: center">19</td>
<td style="text-align: center"><a href="/edo_m18" class="user-mention js-hovercard" title="edo_m18" data-hovercard-target-type="user" data-hovercard-target-name="edo_m18">@edo_m18</a></td>
<td style="text-align: center">11550</td>
<td style="text-align: center">363</td>
<td style="text-align: center">31.8182</td>
<td style="text-align: center">1017</td>
<td style="text-align: center">8.80519%</td>
<td style="text-align: center"><a href="http://qiita.com/edo_m18/items/ba7d8a95818e9c0552d9" id="reference-b8c44a44d7ad3b3aaac3">WebのUIテスト自動化 - Seleniumを使ってみる</a></td>
</tr>
<tr>
<td style="text-align: center">20</td>
<td style="text-align: center"><a href="/cognitom" class="user-mention js-hovercard" title="cognitom" data-hovercard-target-type="user" data-hovercard-target-name="cognitom">@cognitom</a></td>
<td style="text-align: center">11489</td>
<td style="text-align: center">89</td>
<td style="text-align: center">129.09</td>
<td style="text-align: center">1678</td>
<td style="text-align: center">14.6053%</td>
<td style="text-align: center"><a href="http://qiita.com/cognitom/items/d39d5f19054c8c8fd592" id="reference-f7c03c819076517eb2ac">そろそろ真面目に、HTMLで帳票を描く話をしようか</a></td>
</tr>
<tr>
<td style="text-align: center">21</td>
<td style="text-align: center"><a href="/susieyy" class="user-mention js-hovercard" title="susieyy" data-hovercard-target-type="user" data-hovercard-target-name="susieyy">@susieyy</a></td>
<td style="text-align: center">10847</td>
<td style="text-align: center">47</td>
<td style="text-align: center">230.787</td>
<td style="text-align: center">1877</td>
<td style="text-align: center">17.3043%</td>
<td style="text-align: center"><a href="http://qiita.com/susieyy/items/1f28531a1c58d9158896" id="reference-bbcb685df4fdb68d5b63">Swiftで作られたイケてるUIライブラリたち</a></td>
</tr>
<tr>
<td style="text-align: center">22</td>
<td style="text-align: center"><a href="/kazunori279" class="user-mention js-hovercard" title="kazunori279" data-hovercard-target-type="user" data-hovercard-target-name="kazunori279">@kazunori279</a></td>
<td style="text-align: center">10262</td>
<td style="text-align: center">36</td>
<td style="text-align: center">285.056</td>
<td style="text-align: center">1259</td>
<td style="text-align: center">12.2686%</td>
<td style="text-align: center"><a href="http://qiita.com/kazunori279/items/768c7fdf96cdf45a9d16" id="reference-5aa28adea5d9f3cb3023">Cloud Vision APIの凄さを伝えるべくRasPi botとビデオを作った話</a></td>
</tr>
<tr>
<td style="text-align: center">23</td>
<td style="text-align: center"><a href="/yimajo" class="user-mention js-hovercard" title="yimajo" data-hovercard-target-type="user" data-hovercard-target-name="yimajo">@yimajo</a></td>
<td style="text-align: center">10247</td>
<td style="text-align: center">127</td>
<td style="text-align: center">80.685</td>
<td style="text-align: center">688</td>
<td style="text-align: center">6.71416%</td>
<td style="text-align: center"><a href="http://qiita.com/yimajo/items/c67cb711851f747c35e5" id="reference-605ebfcbe488e05bd864">iOS実機のSSL通信をプロキシによって傍受したり改ざんする方法</a></td>
</tr>
<tr>
<td style="text-align: center">24</td>
<td style="text-align: center"><a href="/hkusu" class="user-mention js-hovercard" title="hkusu" data-hovercard-target-type="user" data-hovercard-target-name="hkusu">@hkusu</a></td>
<td style="text-align: center">9243</td>
<td style="text-align: center">201</td>
<td style="text-align: center">45.9851</td>
<td style="text-align: center">963</td>
<td style="text-align: center">10.4187%</td>
<td style="text-align: center"><a href="http://qiita.com/hkusu/items/6d0f8ca873a867aafce9" id="reference-6ba534325a85408ecd53">[WEB開発] 私的な最近のおすすめサービス/ツール 14選 ～2014年版～</a></td>
</tr>
<tr>
<td style="text-align: center">25</td>
<td style="text-align: center"><a href="/zaru" class="user-mention js-hovercard" title="zaru" data-hovercard-target-type="user" data-hovercard-target-name="zaru">@zaru</a></td>
<td style="text-align: center">9393</td>
<td style="text-align: center">96</td>
<td style="text-align: center">97.8438</td>
<td style="text-align: center">1525</td>
<td style="text-align: center">16.2355%</td>
<td style="text-align: center"><a href="http://qiita.com/zaru/items/51ee8a5be22b75a42927" id="reference-d951ba8864211c7be4f8">Webフロントエンド表示速度、最速化手法まとめ</a></td>
</tr>
<tr>
<td style="text-align: center">26</td>
<td style="text-align: center"><a href="/uasi" class="user-mention js-hovercard" title="uasi" data-hovercard-target-type="user" data-hovercard-target-name="uasi">@uasi</a></td>
<td style="text-align: center">9000</td>
<td style="text-align: center">116</td>
<td style="text-align: center">77.5862</td>
<td style="text-align: center">1977</td>
<td style="text-align: center">21.9667%</td>
<td style="text-align: center"><a href="http://qiita.com/uasi/items/86c3a09d17792ab62dfe" id="reference-d929b02ac8b1fb4251f7">英語のコメントや issue で頻出する略語の意味 (FYI, AFAIK, ...)</a></td>
</tr>
<tr>
<td style="text-align: center">27</td>
<td style="text-align: center"><a href="/kidach1" class="user-mention js-hovercard" title="kidach1" data-hovercard-target-type="user" data-hovercard-target-name="kidach1">@kidach1</a></td>
<td style="text-align: center">8990</td>
<td style="text-align: center">83</td>
<td style="text-align: center">108.313</td>
<td style="text-align: center">1261</td>
<td style="text-align: center">14.0267%</td>
<td style="text-align: center"><a href="http://qiita.com/kidach1/items/985efebba639713c562e" id="reference-62460b21572b0f661536">Nginx導入時、サクッと対応しておくと良いかもしれない</a></td>
</tr>
<tr>
<td style="text-align: center">28</td>
<td style="text-align: center"><a href="/ynakayama" class="user-mention js-hovercard" title="ynakayama" data-hovercard-target-type="user" data-hovercard-target-name="ynakayama">@ynakayama</a></td>
<td style="text-align: center">8937</td>
<td style="text-align: center">186</td>
<td style="text-align: center">48.0484</td>
<td style="text-align: center">632</td>
<td style="text-align: center">7.07172%</td>
<td style="text-align: center"><a href="http://qiita.com/ynakayama/items/92f1390b3674439756b4" id="reference-954a2c185421ebcbbe11">機械学習や統計に関する情報収集</a></td>
</tr>
<tr>
<td style="text-align: center">29</td>
<td style="text-align: center"><a href="/HirofumiYashima" class="user-mention js-hovercard" title="HirofumiYashima" data-hovercard-target-type="user" data-hovercard-target-name="HirofumiYashima">@HirofumiYashima</a></td>
<td style="text-align: center">8947</td>
<td style="text-align: center">633</td>
<td style="text-align: center">14.1343</td>
<td style="text-align: center">482</td>
<td style="text-align: center">5.38728%</td>
<td style="text-align: center"><a href="http://qiita.com/HirofumiYashima/items/ed17c83f26de3d510b93" id="reference-920a013436aece5f1217">クロージャってどんなときに使うの？ ～ 利用場面を ３つ 挙げてみる</a></td>
</tr>
<tr>
<td style="text-align: center">30</td>
<td style="text-align: center"><a href="/joker1007" class="user-mention js-hovercard" title="joker1007" data-hovercard-target-type="user" data-hovercard-target-name="joker1007">@joker1007</a></td>
<td style="text-align: center">8766</td>
<td style="text-align: center">96</td>
<td style="text-align: center">91.3125</td>
<td style="text-align: center">999</td>
<td style="text-align: center">11.3963%</td>
<td style="text-align: center"><a href="http://qiita.com/joker1007/items/2a03500017766bdb0234" id="reference-4616f4d5eca39f6848c3">てめえらのRailsはオブジェクト指向じゃねえ！まずはCallbackクラス、Validatorクラスを活用しろ！</a></td>
</tr>
<tr>
<td style="text-align: center">31</td>
<td style="text-align: center"><a href="/koher" class="user-mention js-hovercard" title="koher" data-hovercard-target-type="user" data-hovercard-target-name="koher">@koher</a></td>
<td style="text-align: center">8540</td>
<td style="text-align: center">50</td>
<td style="text-align: center">170.8</td>
<td style="text-align: center">1247</td>
<td style="text-align: center">14.6019%</td>
<td style="text-align: center"><a href="http://qiita.com/koher/items/e4835bd429b88809ab33" id="reference-4ccff97091fd0623c427">null安全でない言語は、もはやレガシー言語だ</a></td>
</tr>
<tr>
<td style="text-align: center">32</td>
<td style="text-align: center"><a href="/tukiyo3" class="user-mention js-hovercard" title="tukiyo3" data-hovercard-target-type="user" data-hovercard-target-name="tukiyo3">@tukiyo3</a></td>
<td style="text-align: center">8527</td>
<td style="text-align: center">1421</td>
<td style="text-align: center">6.0007</td>
<td style="text-align: center">356</td>
<td style="text-align: center">4.17497%</td>
<td style="text-align: center"><a href="http://qiita.com/tukiyo3/items/58b8b3f51e9dc8e96886" id="reference-810e523a0972cf60ed31">たくさんあるオープンソースライセンスのそれぞれの特徴のまとめ</a></td>
</tr>
<tr>
<td style="text-align: center">33</td>
<td style="text-align: center"><a href="/kenmatsu4" class="user-mention js-hovercard" title="kenmatsu4" data-hovercard-target-type="user" data-hovercard-target-name="kenmatsu4">@kenmatsu4</a></td>
<td style="text-align: center">8515</td>
<td style="text-align: center">60</td>
<td style="text-align: center">141.917</td>
<td style="text-align: center">1557</td>
<td style="text-align: center">18.2854%</td>
<td style="text-align: center"><a href="http://qiita.com/kenmatsu4/items/7b8d24d4c5144a686412" id="reference-b4b59bc3550a68b9e905">【機械学習】ディープラーニング フレームワークChainerを試しながら解説してみる。</a></td>
</tr>
<tr>
<td style="text-align: center">34</td>
<td style="text-align: center"><a href="/takeharu" class="user-mention js-hovercard" title="takeharu" data-hovercard-target-type="user" data-hovercard-target-name="takeharu">@takeharu</a></td>
<td style="text-align: center">8302</td>
<td style="text-align: center">18</td>
<td style="text-align: center">461.222</td>
<td style="text-align: center">1304</td>
<td style="text-align: center">15.7071%</td>
<td style="text-align: center"><a href="http://qiita.com/takeharu/items/9935ce476a17d6258e27" id="reference-428bb8f137423a672807">JavaScriptの「this」は「4種類」？？</a></td>
</tr>
<tr>
<td style="text-align: center">35</td>
<td style="text-align: center"><a href="/hshimo" class="user-mention js-hovercard" title="hshimo" data-hovercard-target-type="user" data-hovercard-target-name="hshimo">@hshimo</a></td>
<td style="text-align: center">8075</td>
<td style="text-align: center">276</td>
<td style="text-align: center">29.2572</td>
<td style="text-align: center">2051</td>
<td style="text-align: center">25.3994%</td>
<td style="text-align: center"><a href="http://qiita.com/hshimo/items/776e3ca62be51c3bdc89" id="reference-5a015cf592295fbedf81">プログラマが独立・起業する時によくするミスと対策 まとめ</a></td>
</tr>
<tr>
<td style="text-align: center">36</td>
<td style="text-align: center"><a href="/tadsan" class="user-mention js-hovercard" title="tadsan" data-hovercard-target-type="user" data-hovercard-target-name="tadsan">@tadsan</a></td>
<td style="text-align: center">7795</td>
<td style="text-align: center">145</td>
<td style="text-align: center">53.7586</td>
<td style="text-align: center">1856</td>
<td style="text-align: center">23.8101%</td>
<td style="text-align: center"><a href="http://qiita.com/tadsan/items/99d816e78ca429093b75" id="reference-67df4c26e431ccd1b179">ライセンスの選択を恐れる必要はありません</a></td>
</tr>
<tr>
<td style="text-align: center">37</td>
<td style="text-align: center"><a href="/kawasima" class="user-mention js-hovercard" title="kawasima" data-hovercard-target-type="user" data-hovercard-target-name="kawasima">@kawasima</a></td>
<td style="text-align: center">7707</td>
<td style="text-align: center">73</td>
<td style="text-align: center">105.575</td>
<td style="text-align: center">634</td>
<td style="text-align: center">8.22629%</td>
<td style="text-align: center"><a href="http://qiita.com/kawasima/items/ee863f23b4588b9792fb" id="reference-7285bae1a5d642752137">多い日も安心設計</a></td>
</tr>
<tr>
<td style="text-align: center">38</td>
<td style="text-align: center"><a href="/usagimaru" class="user-mention js-hovercard" title="usagimaru" data-hovercard-target-type="user" data-hovercard-target-name="usagimaru">@usagimaru</a></td>
<td style="text-align: center">7578</td>
<td style="text-align: center">155</td>
<td style="text-align: center">48.8903</td>
<td style="text-align: center">879</td>
<td style="text-align: center">11.5994%</td>
<td style="text-align: center"><a href="http://qiita.com/usagimaru/items/9b55daa4d88b0bb98f38" id="reference-e6cfbcbf0f92196ffaa5">iOS ヒューマンインターフェースの原則</a></td>
</tr>
<tr>
<td style="text-align: center">39</td>
<td style="text-align: center"><a href="/kawaz" class="user-mention js-hovercard" title="kawaz" data-hovercard-target-type="user" data-hovercard-target-name="kawaz">@kawaz</a></td>
<td style="text-align: center">7563</td>
<td style="text-align: center">138</td>
<td style="text-align: center">54.8043</td>
<td style="text-align: center">1941</td>
<td style="text-align: center">25.6644%</td>
<td style="text-align: center"><a href="http://qiita.com/kawaz/items/a0151d3aa2b6f9c4b3b8" id="reference-42c2030cd4d8967e2deb">最強のSSH踏み台設定</a></td>
</tr>
<tr>
<td style="text-align: center">40</td>
<td style="text-align: center"><a href="/sion_cojp" class="user-mention js-hovercard" title="sion_cojp" data-hovercard-target-type="user" data-hovercard-target-name="sion_cojp">@sion_cojp</a></td>
<td style="text-align: center">7343</td>
<td style="text-align: center">33</td>
<td style="text-align: center">222.515</td>
<td style="text-align: center">3473</td>
<td style="text-align: center">47.2967%</td>
<td style="text-align: center"><a href="http://qiita.com/sion_cojp/items/04a2aa76a1021fe77079" id="reference-a789a04adf5ad3e64efe">インフラエンジニアとしてよく使うコマンド集</a></td>
</tr>
<tr>
<td style="text-align: center">41</td>
<td style="text-align: center"><a href="/syui" class="user-mention js-hovercard" title="syui" data-hovercard-target-type="user" data-hovercard-target-name="syui">@syui</a></td>
<td style="text-align: center">7318</td>
<td style="text-align: center">211</td>
<td style="text-align: center">34.6825</td>
<td style="text-align: center">1344</td>
<td style="text-align: center">18.3657%</td>
<td style="text-align: center"><a href="http://qiita.com/syui/items/73a822970742b317aede" id="reference-b3dda3cb53fdd7403489">MacBookAirで使っている便利ツール</a></td>
</tr>
<tr>
<td style="text-align: center">42</td>
<td style="text-align: center"><a href="/okappy" class="user-mention js-hovercard" title="okappy" data-hovercard-target-type="user" data-hovercard-target-name="okappy">@okappy</a></td>
<td style="text-align: center">7218</td>
<td style="text-align: center">28</td>
<td style="text-align: center">257.786</td>
<td style="text-align: center">4918</td>
<td style="text-align: center">68.1352%</td>
<td style="text-align: center"><a href="http://qiita.com/okappy/items/119e31cae9aa9bd9da6d" id="reference-1f70416325d10500a693">非デザイナーエンジニアが一人でWebサービスを作るときに便利なツール32選</a></td>
</tr>
<tr>
<td style="text-align: center">43</td>
<td style="text-align: center"><a href="/gaogao_9" class="user-mention js-hovercard" title="gaogao_9" data-hovercard-target-type="user" data-hovercard-target-name="gaogao_9">@gaogao_9</a></td>
<td style="text-align: center">7084</td>
<td style="text-align: center">13</td>
<td style="text-align: center">544.923</td>
<td style="text-align: center">3963</td>
<td style="text-align: center">55.943%</td>
<td style="text-align: center"><a href="http://qiita.com/gaogao_9/items/ec2b867d6941173fd0b1" id="reference-d1fa4d23c60d98046e53">旧石器時代のJavaScriptを書いてる各位に告ぐ、現代的なJavaScript超入門 Section1 ～すぐにでも現代っぽく出来るワンポイントまとめ～</a></td>
</tr>
<tr>
<td style="text-align: center">44</td>
<td style="text-align: center"><a href="/zembutsu" class="user-mention js-hovercard" title="zembutsu" data-hovercard-target-type="user" data-hovercard-target-name="zembutsu">@zembutsu</a></td>
<td style="text-align: center">6870</td>
<td style="text-align: center">76</td>
<td style="text-align: center">90.3947</td>
<td style="text-align: center">1262</td>
<td style="text-align: center">18.3697%</td>
<td style="text-align: center"><a href="http://qiita.com/zembutsu/items/891c7ffd2c36097400b1" id="reference-acec4669820d600e0409">Docker 入門ハンズオン資料</a></td>
</tr>
<tr>
<td style="text-align: center">45</td>
<td style="text-align: center"><a href="/kaiinui" class="user-mention js-hovercard" title="kaiinui" data-hovercard-target-type="user" data-hovercard-target-name="kaiinui">@kaiinui</a></td>
<td style="text-align: center">6809</td>
<td style="text-align: center">46</td>
<td style="text-align: center">148.022</td>
<td style="text-align: center">2474</td>
<td style="text-align: center">36.3343%</td>
<td style="text-align: center"><a href="http://qiita.com/kaiinui/items/22a75d2adc56a40da7b7" id="reference-ff9a1ddf974e19620ca7">最近の行儀のよい JavaScript の書き方</a></td>
</tr>
<tr>
<td style="text-align: center">47</td>
<td style="text-align: center"><a href="/vvakame" class="user-mention js-hovercard" title="vvakame" data-hovercard-target-type="user" data-hovercard-target-name="vvakame">@vvakame</a></td>
<td style="text-align: center">6648</td>
<td style="text-align: center">39</td>
<td style="text-align: center">170.462</td>
<td style="text-align: center">1201</td>
<td style="text-align: center">18.0656%</td>
<td style="text-align: center"><a href="http://qiita.com/vvakame/items/83366fbfa47562fafbf4" id="reference-df7de8448fde46cca6d6">Gradle入門</a></td>
</tr>
<tr>
<td style="text-align: center">48</td>
<td style="text-align: center"><a href="/Jxck_" class="user-mention js-hovercard" title="Jxck_" data-hovercard-target-type="user" data-hovercard-target-name="Jxck_">@Jxck_</a></td>
<td style="text-align: center">6580</td>
<td style="text-align: center">62</td>
<td style="text-align: center">106.129</td>
<td style="text-align: center">1055</td>
<td style="text-align: center">16.0334%</td>
<td style="text-align: center"><a href="http://qiita.com/Jxck_/items/156d0a231c6968f2a474" id="reference-6b3c19934dbc584fa910">DELETE_FLAG を付ける前に確認したいこと。</a></td>
</tr>
<tr>
<td style="text-align: center">49</td>
<td style="text-align: center"><a href="/tbpgr" class="user-mention js-hovercard" title="tbpgr" data-hovercard-target-type="user" data-hovercard-target-name="tbpgr">@tbpgr</a></td>
<td style="text-align: center">6386</td>
<td style="text-align: center">681</td>
<td style="text-align: center">9.37739</td>
<td style="text-align: center">667</td>
<td style="text-align: center">10.4447%</td>
<td style="text-align: center"><a href="http://qiita.com/tbpgr/items/989c6badefff69377da7" id="reference-c754402ff47d97480161">Markdown記法 サンプル集</a></td>
</tr>
<tr>
<td style="text-align: center">50</td>
<td style="text-align: center"><a href="/armorik83" class="user-mention js-hovercard" title="armorik83" data-hovercard-target-type="user" data-hovercard-target-name="armorik83">@armorik83</a></td>
<td style="text-align: center">6366</td>
<td style="text-align: center">107</td>
<td style="text-align: center">59.4953</td>
<td style="text-align: center">1321</td>
<td style="text-align: center">20.7509%</td>
<td style="text-align: center"><a href="http://qiita.com/armorik83/items/5542daed0c408cb9f605" id="reference-0e3be0cc5f0abba59072">AngularJSモダンプラクティス</a></td>
</tr>
<tr>
<td style="text-align: center">51</td>
<td style="text-align: center"><a href="/Quramy" class="user-mention js-hovercard" title="Quramy" data-hovercard-target-type="user" data-hovercard-target-name="Quramy">@Quramy</a></td>
<td style="text-align: center">6351</td>
<td style="text-align: center">75</td>
<td style="text-align: center">84.68</td>
<td style="text-align: center">1767</td>
<td style="text-align: center">27.8224%</td>
<td style="text-align: center"><a href="http://qiita.com/Quramy/items/a4be32769366cfe55778" id="reference-719658476b5c54c52f7c">Electronでアプリケーションを作ってみよう</a></td>
</tr>
<tr>
<td style="text-align: center">52</td>
<td style="text-align: center"><a href="/yuya_presto" class="user-mention js-hovercard" title="yuya_presto" data-hovercard-target-type="user" data-hovercard-target-name="yuya_presto">@yuya_presto</a></td>
<td style="text-align: center">6324</td>
<td style="text-align: center">38</td>
<td style="text-align: center">166.421</td>
<td style="text-align: center">754</td>
<td style="text-align: center">11.9228%</td>
<td style="text-align: center"><a href="http://qiita.com/yuya_presto/items/5d99499cf96c0ebb09f8" id="reference-3d6d413b8cefb5978ee1">Gitコンフリクト解消ガイド（git mergetoolの使い方）</a></td>
</tr>
<tr>
<td style="text-align: center">53</td>
<td style="text-align: center"><a href="/gogotanaka" class="user-mention js-hovercard" title="gogotanaka" data-hovercard-target-type="user" data-hovercard-target-name="gogotanaka">@gogotanaka</a></td>
<td style="text-align: center">6129</td>
<td style="text-align: center">56</td>
<td style="text-align: center">109.446</td>
<td style="text-align: center">3237</td>
<td style="text-align: center">52.8145%</td>
<td style="text-align: center"><a href="http://qiita.com/gogotanaka/items/b65e1b081fa976e5d754" id="reference-c9fa56ba735b9e4de642">ネイティブと働いて分かった英語コミットメッセージの頻出動詞10つ</a></td>
</tr>
<tr>
<td style="text-align: center">54</td>
<td style="text-align: center"><a href="/yaotti" class="user-mention js-hovercard" title="yaotti" data-hovercard-target-type="user" data-hovercard-target-name="yaotti">@yaotti</a></td>
<td style="text-align: center">5895</td>
<td style="text-align: center">151</td>
<td style="text-align: center">39.0397</td>
<td style="text-align: center">1251</td>
<td style="text-align: center">21.2214%</td>
<td style="text-align: center"><a href="http://qiita.com/yaotti/items/0d5364eae36ad1bb8e01" id="reference-77ddb569252defe956a6">gitでありがちな問題の解決方法まとめ</a></td>
</tr>
<tr>
<td style="text-align: center">55</td>
<td style="text-align: center"><a href="/n0bisuke" class="user-mention js-hovercard" title="n0bisuke" data-hovercard-target-type="user" data-hovercard-target-name="n0bisuke">@n0bisuke</a></td>
<td style="text-align: center">5802</td>
<td style="text-align: center">222</td>
<td style="text-align: center">26.1351</td>
<td style="text-align: center">690</td>
<td style="text-align: center">11.8925%</td>
<td style="text-align: center"><a href="http://qiita.com/n0bisuke/items/868b43411078bc2018fb" id="reference-c2a5d952bb81a6da9090">3行のソースコードを入れるだけで機械学習できると噂のindicoをNode.jsで使って機械学習入門してみる</a></td>
</tr>
<tr>
<td style="text-align: center">56</td>
<td style="text-align: center"><a href="/tonkotsuboy_com" class="user-mention js-hovercard" title="tonkotsuboy_com" data-hovercard-target-type="user" data-hovercard-target-name="tonkotsuboy_com">@tonkotsuboy_com</a></td>
<td style="text-align: center">5788</td>
<td style="text-align: center">83</td>
<td style="text-align: center">69.7349</td>
<td style="text-align: center">798</td>
<td style="text-align: center">13.7871%</td>
<td style="text-align: center"><a href="http://qiita.com/tonkotsuboy_com/items/f98667b89228b98bc096" id="reference-9bf1535caeae96a3d486">2016年新機能! GitHubのmasterブランチをWebページとして公開する手順</a></td>
</tr>
<tr>
<td style="text-align: center">57</td>
<td style="text-align: center"><a href="/r7kamura" class="user-mention js-hovercard" title="r7kamura" data-hovercard-target-type="user" data-hovercard-target-name="r7kamura">@r7kamura</a></td>
<td style="text-align: center">5581</td>
<td style="text-align: center">56</td>
<td style="text-align: center">99.6607</td>
<td style="text-align: center">655</td>
<td style="text-align: center">11.7362%</td>
<td style="text-align: center"><a href="http://qiita.com/r7kamura/items/2e88adbdd1782277b2e7" id="reference-9db585464f9c731e4f14">RailsでAPIをつくるときのエラー処理</a></td>
</tr>
<tr>
<td style="text-align: center">58</td>
<td style="text-align: center"><a href="/tatesuke" class="user-mention js-hovercard" title="tatesuke" data-hovercard-target-type="user" data-hovercard-target-name="tatesuke">@tatesuke</a></td>
<td style="text-align: center">5271</td>
<td style="text-align: center">34</td>
<td style="text-align: center">155.029</td>
<td style="text-align: center">2056</td>
<td style="text-align: center">39.0059%</td>
<td style="text-align: center"><a href="http://qiita.com/tatesuke/items/b9548dd484b01b139b74" id="reference-95ee91fd5f7ade71ae5e">You Don't Need jQuery</a></td>
</tr>
<tr>
<td style="text-align: center">59</td>
<td style="text-align: center"><a href="/jacksuzuki" class="user-mention js-hovercard" title="jacksuzuki" data-hovercard-target-type="user" data-hovercard-target-name="jacksuzuki">@jacksuzuki</a></td>
<td style="text-align: center">5268</td>
<td style="text-align: center">5</td>
<td style="text-align: center">1053.6</td>
<td style="text-align: center">5258</td>
<td style="text-align: center">99.8102%</td>
<td style="text-align: center"><a href="http://qiita.com/jacksuzuki/items/b2fa6b44962e73a53d08" id="reference-8af2718da7f418023514">ロシアの天才ハッカーによる【新人エンジニアサバイバルガイド】</a></td>
</tr>
<tr>
<td style="text-align: center">60</td>
<td style="text-align: center"><a href="/tag1216" class="user-mention js-hovercard" title="tag1216" data-hovercard-target-type="user" data-hovercard-target-name="tag1216">@tag1216</a></td>
<td style="text-align: center">5270</td>
<td style="text-align: center">64</td>
<td style="text-align: center">82.3438</td>
<td style="text-align: center">2475</td>
<td style="text-align: center">46.9639%</td>
<td style="text-align: center"><a href="http://qiita.com/tag1216/items/5d06bad7468f731f590e" id="reference-7a1f24c15156004e3218">インフラエンジニアじゃなくても押さえておきたいSSHの基礎知識</a></td>
</tr>
<tr>
<td style="text-align: center">61</td>
<td style="text-align: center"><a href="/voluntas" class="user-mention js-hovercard" title="voluntas" data-hovercard-target-type="user" data-hovercard-target-name="voluntas">@voluntas</a></td>
<td style="text-align: center">5100</td>
<td style="text-align: center">107</td>
<td style="text-align: center">47.6636</td>
<td style="text-align: center">843</td>
<td style="text-align: center">16.5294%</td>
<td style="text-align: center"><a href="http://qiita.com/voluntas/items/68c1fd04dd3d507d4083" id="reference-8f841edccd8a559e8e9d">docker コマンド チートシート</a></td>
</tr>
<tr>
<td style="text-align: center">62</td>
<td style="text-align: center"><a href="/amay077" class="user-mention js-hovercard" title="amay077" data-hovercard-target-type="user" data-hovercard-target-name="amay077">@amay077</a></td>
<td style="text-align: center">5087</td>
<td style="text-align: center">212</td>
<td style="text-align: center">23.9953</td>
<td style="text-align: center">257</td>
<td style="text-align: center">5.05209%</td>
<td style="text-align: center"><a href="http://qiita.com/amay077/items/b7235aefab8d2e3b72f1" id="reference-9efe4ef13b5d2a536038">NHK紅白の Android/iPhone アプリが .NET/Xamarin 製だったということ</a></td>
</tr>
<tr>
<td style="text-align: center">63</td>
<td style="text-align: center"><a href="/hnakamur" class="user-mention js-hovercard" title="hnakamur" data-hovercard-target-type="user" data-hovercard-target-name="hnakamur">@hnakamur</a></td>
<td style="text-align: center">5053</td>
<td style="text-align: center">187</td>
<td style="text-align: center">27.0214</td>
<td style="text-align: center">497</td>
<td style="text-align: center">9.83574%</td>
<td style="text-align: center"><a href="http://qiita.com/hnakamur/items/ad1346bc9cfb0288ff60" id="reference-5dd2a5de48f21e428d53">ちょっとしたHTMLはGitHub Gistに置いてbl.ocks.orgで表示するのがお手軽です</a></td>
</tr>
<tr>
<td style="text-align: center">64</td>
<td style="text-align: center"><a href="/daxanya1" class="user-mention js-hovercard" title="daxanya1" data-hovercard-target-type="user" data-hovercard-target-name="daxanya1">@daxanya1</a></td>
<td style="text-align: center">5042</td>
<td style="text-align: center">28</td>
<td style="text-align: center">180.071</td>
<td style="text-align: center">4018</td>
<td style="text-align: center">79.6906%</td>
<td style="text-align: center"><a href="http://qiita.com/daxanya1/items/218f2e3b922142550ef9" id="reference-7ab61bd036c36305e747">数学を避けてきた社会人プログラマが機械学習の勉強を始める際の最短経路</a></td>
</tr>
<tr>
<td style="text-align: center">65</td>
<td style="text-align: center"><a href="/y_hokkey" class="user-mention js-hovercard" title="y_hokkey" data-hovercard-target-type="user" data-hovercard-target-name="y_hokkey">@y_hokkey</a></td>
<td style="text-align: center">5008</td>
<td style="text-align: center">52</td>
<td style="text-align: center">96.3077</td>
<td style="text-align: center">1473</td>
<td style="text-align: center">29.4129%</td>
<td style="text-align: center"><a href="http://qiita.com/y_hokkey/items/406b5a8c4bc15354d069" id="reference-2c0b8fcdec40b495cb6a">Dockerで即実行できる、社内・自宅向けオープンソースWebアプリ</a></td>
</tr>
<tr>
<td style="text-align: center">66</td>
<td style="text-align: center"><a href="/koba04" class="user-mention js-hovercard" title="koba04" data-hovercard-target-type="user" data-hovercard-target-name="koba04">@koba04</a></td>
<td style="text-align: center">4970</td>
<td style="text-align: center">38</td>
<td style="text-align: center">130.789</td>
<td style="text-align: center">739</td>
<td style="text-align: center">14.8692%</td>
<td style="text-align: center"><a href="http://qiita.com/koba04/items/ba2381776d394633de72" id="reference-fe174978807b77b6e8a3">私のJavaScript情報の集め方</a></td>
</tr>
<tr>
<td style="text-align: center">67</td>
<td style="text-align: center"><a href="/shibukawa" class="user-mention js-hovercard" title="shibukawa" data-hovercard-target-type="user" data-hovercard-target-name="shibukawa">@shibukawa</a></td>
<td style="text-align: center">4927</td>
<td style="text-align: center">81</td>
<td style="text-align: center">60.8272</td>
<td style="text-align: center">815</td>
<td style="text-align: center">16.5415%</td>
<td style="text-align: center"><a href="http://qiita.com/shibukawa/items/2698b980933367ad93b4" id="reference-cf49c75e9db7aa097391">オブジェクト指向と20年戦ってわかったこと</a></td>
</tr>
<tr>
<td style="text-align: center">68</td>
<td style="text-align: center"><a href="/magicant" class="user-mention js-hovercard" title="magicant" data-hovercard-target-type="user" data-hovercard-target-name="magicant">@magicant</a></td>
<td style="text-align: center">4871</td>
<td style="text-align: center">33</td>
<td style="text-align: center">147.606</td>
<td style="text-align: center">1994</td>
<td style="text-align: center">40.9362%</td>
<td style="text-align: center"><a href="http://qiita.com/magicant/items/8134edf969f9629fa66e" id="reference-c6028ef0b4f4e89f69fc">クラスの命名のアンチパターン</a></td>
</tr>
<tr>
<td style="text-align: center">69</td>
<td style="text-align: center"><a href="/koogawa" class="user-mention js-hovercard" title="koogawa" data-hovercard-target-type="user" data-hovercard-target-name="koogawa">@koogawa</a></td>
<td style="text-align: center">4858</td>
<td style="text-align: center">55</td>
<td style="text-align: center">88.3273</td>
<td style="text-align: center">1117</td>
<td style="text-align: center">22.993%</td>
<td style="text-align: center"><a href="http://qiita.com/koogawa/items/5e2ff5a0312cb1f657f8" id="reference-0dd203cddfee85be2c38">iPhoneアプリ申請やAppleの審査に関するメモ</a></td>
</tr>
<tr>
<td style="text-align: center">70</td>
<td style="text-align: center"><a href="/puriketu99" class="user-mention js-hovercard" title="puriketu99" data-hovercard-target-type="user" data-hovercard-target-name="puriketu99">@puriketu99</a></td>
<td style="text-align: center">4791</td>
<td style="text-align: center">183</td>
<td style="text-align: center">26.1803</td>
<td style="text-align: center">791</td>
<td style="text-align: center">16.5101%</td>
<td style="text-align: center"><a href="http://qiita.com/puriketu99/items/c519a95c0b16ea63c1ac" id="reference-5fab0a97c70728ffa821">機械学習クソ素人の俺がプロダクトをリリースするまでの2ヶ月で覚えたこと</a></td>
</tr>
<tr>
<td style="text-align: center">71</td>
<td style="text-align: center"><a href="/hidekuro" class="user-mention js-hovercard" title="hidekuro" data-hovercard-target-type="user" data-hovercard-target-name="hidekuro">@hidekuro</a></td>
<td style="text-align: center">4731</td>
<td style="text-align: center">79</td>
<td style="text-align: center">59.8861</td>
<td style="text-align: center">1764</td>
<td style="text-align: center">37.286%</td>
<td style="text-align: center"><a href="http://qiita.com/hidekuro/items/fc12344d36d996198e96" id="reference-65ae5a65d428c81dbb32">VagrantとDockerについて名前しか知らなかったので試した</a></td>
</tr>
<tr>
<td style="text-align: center">72</td>
<td style="text-align: center"><a href="/nekoneko-wanwan" class="user-mention js-hovercard" title="nekoneko-wanwan" data-hovercard-target-type="user" data-hovercard-target-name="nekoneko-wanwan">@nekoneko-wanwan</a></td>
<td style="text-align: center">4684</td>
<td style="text-align: center">56</td>
<td style="text-align: center">83.6429</td>
<td style="text-align: center">1365</td>
<td style="text-align: center">29.1418%</td>
<td style="text-align: center"><a href="http://qiita.com/nekoneko-wanwan/items/bedc0e826c0842ca0b11" id="reference-f0a11d364ccd5c0e060d">はじめてajaxを使うときに知りたかったこと</a></td>
</tr>
<tr>
<td style="text-align: center">73</td>
<td style="text-align: center"><a href="/okmttdhr" class="user-mention js-hovercard" title="okmttdhr" data-hovercard-target-type="user" data-hovercard-target-name="okmttdhr">@okmttdhr</a></td>
<td style="text-align: center">4664</td>
<td style="text-align: center">63</td>
<td style="text-align: center">74.0317</td>
<td style="text-align: center">1918</td>
<td style="text-align: center">41.1235%</td>
<td style="text-align: center"><a href="http://qiita.com/okmttdhr/items/1caff5a36c8468779a64" id="reference-ce096c9124abf7a5add0">ここ数年前から2015/5までのモダンフロントエンドを総まとめしてみた</a></td>
</tr>
<tr>
<td style="text-align: center">74</td>
<td style="text-align: center"><a href="/mochizukikotaro" class="user-mention js-hovercard" title="mochizukikotaro" data-hovercard-target-type="user" data-hovercard-target-name="mochizukikotaro">@mochizukikotaro</a></td>
<td style="text-align: center">4581</td>
<td style="text-align: center">178</td>
<td style="text-align: center">25.736</td>
<td style="text-align: center">855</td>
<td style="text-align: center">18.664%</td>
<td style="text-align: center"><a href="http://qiita.com/mochizukikotaro/items/a0e98ff0063a77e7b694" id="reference-6b69fa12ccb1d3d7a0ae">初心者がAWSでミスって不正利用されて$6,000請求、泣きそうになったお話。</a></td>
</tr>
<tr>
<td style="text-align: center">75</td>
<td style="text-align: center"><a href="/chuck0523" class="user-mention js-hovercard" title="chuck0523" data-hovercard-target-type="user" data-hovercard-target-name="chuck0523">@chuck0523</a></td>
<td style="text-align: center">4567</td>
<td style="text-align: center">62</td>
<td style="text-align: center">73.6613</td>
<td style="text-align: center">1367</td>
<td style="text-align: center">29.9321%</td>
<td style="text-align: center"><a href="http://qiita.com/chuck0523/items/ff26ee3779214c3b0764" id="reference-4870aea7a2a07d5fbddd">フロントエンドエンジニアが暇なときにやると良いかもしれないこと</a></td>
</tr>
<tr>
<td style="text-align: center">76</td>
<td style="text-align: center"><a href="/satomyumi" class="user-mention js-hovercard" title="satomyumi" data-hovercard-target-type="user" data-hovercard-target-name="satomyumi">@satomyumi</a></td>
<td style="text-align: center">4521</td>
<td style="text-align: center">243</td>
<td style="text-align: center">18.6049</td>
<td style="text-align: center">487</td>
<td style="text-align: center">10.772%</td>
<td style="text-align: center"><a href="http://qiita.com/satomyumi/items/755cfbb0e97d48280775" id="reference-9cc0b76c5d48daac22c1">覚えておきたい Vim コマンド 備忘録</a></td>
</tr>
<tr>
<td style="text-align: center">77</td>
<td style="text-align: center"><a href="/m-yamashita" class="user-mention js-hovercard" title="m-yamashita" data-hovercard-target-type="user" data-hovercard-target-name="m-yamashita">@m-yamashita</a></td>
<td style="text-align: center">4508</td>
<td style="text-align: center">12</td>
<td style="text-align: center">375.667</td>
<td style="text-align: center">3361</td>
<td style="text-align: center">74.5563%</td>
<td style="text-align: center"><a href="http://qiita.com/m-yamashita/items/889c116b92dc0bf4ea7d" id="reference-0e6801222e9bed7b0700">初心者向け、「上手い」シェルスクリプトの書き方メモ</a></td>
</tr>
<tr>
<td style="text-align: center">78</td>
<td style="text-align: center"><a href="/kuni-nakaji" class="user-mention js-hovercard" title="kuni-nakaji" data-hovercard-target-type="user" data-hovercard-target-name="kuni-nakaji">@kuni-nakaji</a></td>
<td style="text-align: center">4484</td>
<td style="text-align: center">17</td>
<td style="text-align: center">263.765</td>
<td style="text-align: center">2197</td>
<td style="text-align: center">48.9964%</td>
<td style="text-align: center"><a href="http://qiita.com/kuni-nakaji/items/5118b23bf2ea44fed96e" id="reference-4f1b660d9d3a08692b44">httpsだからというだけで安全？調べたら怖くなってきたSSLの話!？</a></td>
</tr>
<tr>
<td style="text-align: center">79</td>
<td style="text-align: center"><a href="/kazukichi" class="user-mention js-hovercard" title="kazukichi" data-hovercard-target-type="user" data-hovercard-target-name="kazukichi">@kazukichi</a></td>
<td style="text-align: center">4484</td>
<td style="text-align: center">30</td>
<td style="text-align: center">149.467</td>
<td style="text-align: center">1396</td>
<td style="text-align: center">31.1329%</td>
<td style="text-align: center"><a href="http://qiita.com/kazukichi/items/7379b75fba2f90d3cf45" id="reference-9ed890028a0b22b84f7d">エンジニアで稼ぐために大切な１５のコト</a></td>
</tr>
<tr>
<td style="text-align: center">80</td>
<td style="text-align: center"><a href="/disc99" class="user-mention js-hovercard" title="disc99" data-hovercard-target-type="user" data-hovercard-target-name="disc99">@disc99</a></td>
<td style="text-align: center">4471</td>
<td style="text-align: center">22</td>
<td style="text-align: center">203.227</td>
<td style="text-align: center">1817</td>
<td style="text-align: center">40.6397%</td>
<td style="text-align: center"><a href="http://qiita.com/disc99/items/727b51dbe737602a5c91" id="reference-a3729fb5e9d1bdc4aef8">Javaを使うなら知っておきたい技術、フレームワーク、ライブラリ、ツールまとめ</a></td>
</tr>
<tr>
<td style="text-align: center">81</td>
<td style="text-align: center"><a href="/hachi8833" class="user-mention js-hovercard" title="hachi8833" data-hovercard-target-type="user" data-hovercard-target-name="hachi8833">@hachi8833</a></td>
<td style="text-align: center">4437</td>
<td style="text-align: center">45</td>
<td style="text-align: center">98.6</td>
<td style="text-align: center">2569</td>
<td style="text-align: center">57.8995%</td>
<td style="text-align: center"><a href="http://qiita.com/hachi8833/items/7beeee825c11f7437f54" id="reference-ba203ba196e2c32a5a2f">Vim幼稚園からVim小学校へ</a></td>
</tr>
<tr>
<td style="text-align: center">82</td>
<td style="text-align: center"><a href="/makoto_kw" class="user-mention js-hovercard" title="makoto_kw" data-hovercard-target-type="user" data-hovercard-target-name="makoto_kw">@makoto_kw</a></td>
<td style="text-align: center">4402</td>
<td style="text-align: center">59</td>
<td style="text-align: center">74.6102</td>
<td style="text-align: center">641</td>
<td style="text-align: center">14.5616%</td>
<td style="text-align: center"><a href="http://qiita.com/makoto_kw/items/b23350aed11ea87cd92b" id="reference-3b882651f9705968d669">趣味でつくるiOSアプリこそJenkinsでリリースを自動化</a></td>
</tr>
<tr>
<td style="text-align: center">83</td>
<td style="text-align: center"><a href="/Hiraku" class="user-mention js-hovercard" title="Hiraku" data-hovercard-target-type="user" data-hovercard-target-name="Hiraku">@Hiraku</a></td>
<td style="text-align: center">4370</td>
<td style="text-align: center">111</td>
<td style="text-align: center">39.3694</td>
<td style="text-align: center">1162</td>
<td style="text-align: center">26.5904%</td>
<td style="text-align: center"><a href="http://qiita.com/Hiraku/items/dfda2f8a5353b0742271" id="reference-d245b5eea2f7b4f2752a">WebAPIリクエスト仕様書としてcurlコマンドのご提案</a></td>
</tr>
<tr>
<td style="text-align: center">84</td>
<td style="text-align: center"><a href="/howdy39" class="user-mention js-hovercard" title="howdy39" data-hovercard-target-type="user" data-hovercard-target-name="howdy39">@howdy39</a></td>
<td style="text-align: center">4376</td>
<td style="text-align: center">19</td>
<td style="text-align: center">230.316</td>
<td style="text-align: center">1166</td>
<td style="text-align: center">26.6453%</td>
<td style="text-align: center"><a href="http://qiita.com/howdy39/items/cdd5b252096f5a2fa438" id="reference-0c714a8f0821d8670f22">フロントエンドにテストを導入</a></td>
</tr>
<tr>
<td style="text-align: center">85</td>
<td style="text-align: center"><a href="/mima_ita" class="user-mention js-hovercard" title="mima_ita" data-hovercard-target-type="user" data-hovercard-target-name="mima_ita">@mima_ita</a></td>
<td style="text-align: center">4339</td>
<td style="text-align: center">99</td>
<td style="text-align: center">43.8283</td>
<td style="text-align: center">587</td>
<td style="text-align: center">13.5285%</td>
<td style="text-align: center"><a href="http://qiita.com/mima_ita/items/c3490ad1ccc12ad853f1" id="reference-6bc8e641126994ec1b25">あなたのおっしゃるレビューってどのことかしら？</a></td>
</tr>
<tr>
<td style="text-align: center">86</td>
<td style="text-align: center"><a href="/ukiuni@github" class="user-mention js-hovercard" title="ukiuni@github" data-hovercard-target-type="user" data-hovercard-target-name="ukiuni@github">@ukiuni@github</a></td>
<td style="text-align: center">4286</td>
<td style="text-align: center">56</td>
<td style="text-align: center">76.5357</td>
<td style="text-align: center">1633</td>
<td style="text-align: center">38.1008%</td>
<td style="text-align: center"><a href="http://qiita.com/ukiuni@github/items/5f3d8620187905aea3d4" id="reference-f2eb96b5d74a785c541e">JavaScriptを読んでて「なにこれ！？」と思うけれど調べられない記法8選。</a></td>
</tr>
<tr>
<td style="text-align: center">87</td>
<td style="text-align: center"><a href="/hik0107" class="user-mention js-hovercard" title="hik0107" data-hovercard-target-type="user" data-hovercard-target-name="hik0107">@hik0107</a></td>
<td style="text-align: center">4305</td>
<td style="text-align: center">21</td>
<td style="text-align: center">205</td>
<td style="text-align: center">758</td>
<td style="text-align: center">17.6074%</td>
<td style="text-align: center"><a href="http://qiita.com/hik0107/items/19dd2f6a4ab61ec21905" id="reference-a906fc1b42d046bc5774">Pythonでデータ分析するのに必要なツールのまとめ</a></td>
</tr>
<tr>
<td style="text-align: center">88</td>
<td style="text-align: center"><a href="/pugiemonn" class="user-mention js-hovercard" title="pugiemonn" data-hovercard-target-type="user" data-hovercard-target-name="pugiemonn">@pugiemonn</a></td>
<td style="text-align: center">4234</td>
<td style="text-align: center">249</td>
<td style="text-align: center">17.004</td>
<td style="text-align: center">814</td>
<td style="text-align: center">19.2253%</td>
<td style="text-align: center"><a href="http://qiita.com/pugiemonn/items/964203782e1fcb3d02c3" id="reference-8fedf35b71bc7891a263">こんなHTMLとCSSのコーディング規約で書きたい</a></td>
</tr>
<tr>
<td style="text-align: center">89</td>
<td style="text-align: center"><a href="/ryounagaoka" class="user-mention js-hovercard" title="ryounagaoka" data-hovercard-target-type="user" data-hovercard-target-name="ryounagaoka">@ryounagaoka</a></td>
<td style="text-align: center">4230</td>
<td style="text-align: center">47</td>
<td style="text-align: center">90</td>
<td style="text-align: center">1752</td>
<td style="text-align: center">41.4184%</td>
<td style="text-align: center"><a href="http://qiita.com/ryounagaoka/items/045b2808a5ed43f96607" id="reference-21152d9077284878b3ae">もう逃げない。HTMLのviewportをちゃんと理解する</a></td>
</tr>
<tr>
<td style="text-align: center">90</td>
<td style="text-align: center"><a href="/tenntenn" class="user-mention js-hovercard" title="tenntenn" data-hovercard-target-type="user" data-hovercard-target-name="tenntenn">@tenntenn</a></td>
<td style="text-align: center">4230</td>
<td style="text-align: center">61</td>
<td style="text-align: center">69.3443</td>
<td style="text-align: center">1597</td>
<td style="text-align: center">37.7541%</td>
<td style="text-align: center"><a href="http://qiita.com/tenntenn/items/0e33a4959250d1a55045" id="reference-660e67781897cf49e22a">Go言語の初心者が見ると幸せになれる場所　#golang</a></td>
</tr>
<tr>
<td style="text-align: center">91</td>
<td style="text-align: center"><a href="/futoase" class="user-mention js-hovercard" title="futoase" data-hovercard-target-type="user" data-hovercard-target-name="futoase">@futoase</a></td>
<td style="text-align: center">4156</td>
<td style="text-align: center">100</td>
<td style="text-align: center">41.56</td>
<td style="text-align: center">595</td>
<td style="text-align: center">14.3167%</td>
<td style="text-align: center"><a href="http://qiita.com/futoase/items/0ca6b61cb88194c90367" id="reference-793991c728f8577a805b">【個人メモ】CentOS環境に登録するyumリポジトリ</a></td>
</tr>
<tr>
<td style="text-align: center">92</td>
<td style="text-align: center"><a href="/reikubonaga" class="user-mention js-hovercard" title="reikubonaga" data-hovercard-target-type="user" data-hovercard-target-name="reikubonaga">@reikubonaga</a></td>
<td style="text-align: center">4115</td>
<td style="text-align: center">61</td>
<td style="text-align: center">67.459</td>
<td style="text-align: center">680</td>
<td style="text-align: center">16.5249%</td>
<td style="text-align: center"><a href="http://qiita.com/reikubonaga/items/44b459db5d6f130a4fc6" id="reference-f22e15d5c68647f041fc">iOS開発する上で絶対に押さえておく8つの項目</a></td>
</tr>
<tr>
<td style="text-align: center">93</td>
<td style="text-align: center"><a href="/konifar" class="user-mention js-hovercard" title="konifar" data-hovercard-target-type="user" data-hovercard-target-name="konifar">@konifar</a></td>
<td style="text-align: center">4053</td>
<td style="text-align: center">92</td>
<td style="text-align: center">44.0543</td>
<td style="text-align: center">231</td>
<td style="text-align: center">5.69948%</td>
<td style="text-align: center"><a href="http://qiita.com/konifar/items/d0392b6428a47262ab0b" id="reference-a90661d0612645343401">Android Studioのgradleビルドを高速化する</a></td>
</tr>
<tr>
<td style="text-align: center">94</td>
<td style="text-align: center"><a href="/harukasan" class="user-mention js-hovercard" title="harukasan" data-hovercard-target-type="user" data-hovercard-target-name="harukasan">@harukasan</a></td>
<td style="text-align: center">4030</td>
<td style="text-align: center">52</td>
<td style="text-align: center">77.5</td>
<td style="text-align: center">976</td>
<td style="text-align: center">24.2184%</td>
<td style="text-align: center"><a href="http://qiita.com/harukasan/items/fe37f3bab8a5ca3f4f92" id="reference-32aa34cf1cdc08d8f34a">我々はどのようにして安全なHTTPS通信を提供すれば良いか</a></td>
</tr>
<tr>
<td style="text-align: center">95</td>
<td style="text-align: center"><a href="/k-shogo" class="user-mention js-hovercard" title="k-shogo" data-hovercard-target-type="user" data-hovercard-target-name="k-shogo">@k-shogo</a></td>
<td style="text-align: center">4026</td>
<td style="text-align: center">18</td>
<td style="text-align: center">223.667</td>
<td style="text-align: center">1450</td>
<td style="text-align: center">36.0159%</td>
<td style="text-align: center"><a href="http://qiita.com/k-shogo/items/870b6d3939dd08da2de4" id="reference-c56b63b05b91a6da5aa7">無料のSSL証明書StartSSLを活用する</a></td>
</tr>
<tr>
<td style="text-align: center">96</td>
<td style="text-align: center"><a href="/nori0620" class="user-mention js-hovercard" title="nori0620" data-hovercard-target-type="user" data-hovercard-target-name="nori0620">@nori0620</a></td>
<td style="text-align: center">4018</td>
<td style="text-align: center">11</td>
<td style="text-align: center">365.273</td>
<td style="text-align: center">1743</td>
<td style="text-align: center">43.3798%</td>
<td style="text-align: center"><a href="http://qiita.com/nori0620/items/cf956fea84e82ec2aee5" id="reference-4d2a6885409ec75124ad">[iOS] 新言語SwiftがObjective-Cよりも良いところ</a></td>
</tr>
<tr>
<td style="text-align: center">97</td>
<td style="text-align: center"><a href="/k0kubun" class="user-mention js-hovercard" title="k0kubun" data-hovercard-target-type="user" data-hovercard-target-name="k0kubun">@k0kubun</a></td>
<td style="text-align: center">4015</td>
<td style="text-align: center">41</td>
<td style="text-align: center">97.9268</td>
<td style="text-align: center">858</td>
<td style="text-align: center">21.3699%</td>
<td style="text-align: center"><a href="http://qiita.com/k0kubun/items/80c5a5494f53bb88dc58" id="reference-22d687f70c7c8922b442">ActiveRecordのjoinsとpreloadとincludesとeager_loadの違い</a></td>
</tr>
<tr>
<td style="text-align: center">98</td>
<td style="text-align: center"><a href="/Hironsan" class="user-mention js-hovercard" title="Hironsan" data-hovercard-target-type="user" data-hovercard-target-name="Hironsan">@Hironsan</a></td>
<td style="text-align: center">4008</td>
<td style="text-align: center">36</td>
<td style="text-align: center">111.333</td>
<td style="text-align: center">889</td>
<td style="text-align: center">22.1806%</td>
<td style="text-align: center"><a href="http://qiita.com/Hironsan/items/6425787ccbee75dfae36" id="reference-b1249095a2c051205449">機械学習を使って作る対話システム</a></td>
</tr>
<tr>
<td style="text-align: center">99</td>
<td style="text-align: center"><a href="/merrill" class="user-mention js-hovercard" title="merrill" data-hovercard-target-type="user" data-hovercard-target-name="merrill">@merrill</a></td>
<td style="text-align: center">3991</td>
<td style="text-align: center">37</td>
<td style="text-align: center">107.865</td>
<td style="text-align: center">996</td>
<td style="text-align: center">24.9562%</td>
<td style="text-align: center"><a href="http://qiita.com/merrill/items/079999aa064f0df9baf7" id="reference-740e33f0fd22d5fa3ad7">Swift でアプリ開発を1ヶ月やってみて感じた Xcode の効率的な使い方と、Web と連動するときのプラクティス</a></td>
</tr>
<tr>
<td style="text-align: center">100</td>
<td style="text-align: center"><a href="/horimislime" class="user-mention js-hovercard" title="horimislime" data-hovercard-target-type="user" data-hovercard-target-name="horimislime">@horimislime</a></td>
<td style="text-align: center">3975</td>
<td style="text-align: center">35</td>
<td style="text-align: center">113.571</td>
<td style="text-align: center">1065</td>
<td style="text-align: center">26.7925%</td>
<td style="text-align: center"><a href="http://qiita.com/horimislime/items/32acf0f1be33a269a309" id="reference-7198d61ae8a45d5820a9">APIドキュメントを書くのが楽になるツールまとめ</a></td>
</tr>
</tbody>
</table>

<p>やはり上位のQiitaレジェンドは何か1つの記事で稼いだという感じでもなく、Top記事が1000いいねを超えていても占有率は高々20%という感じが大半のようです。</p>

<p>例外的なのは <a href="/jacksuzuki" class="user-mention js-hovercard" title="jacksuzuki" data-hovercard-target-type="user" data-hovercard-target-name="jacksuzuki">@jacksuzuki</a> さんですかね...。<br>
僕もいいねせずにはいられませんでしたが、 <strong><a href="http://qiita.com/jacksuzuki/items/b2fa6b44962e73a53d08">ロシアの天才ハッカーによる【新人エンジニアサバイバルガイド】</a></strong> が1記事で5000を超えるいいねを集め、 <strong>占有率99.8102%</strong> というまた違ったレジェンドっぷりを輝かせております。</p>

<p>他に目立つものといえば、全体でもトップの <a href="/hirokidaichi" class="user-mention js-hovercard" title="hirokidaichi" data-hovercard-target-type="user" data-hovercard-target-name="hirokidaichi">@hirokidaichi</a> さんは平均いいねが1000近く、ある程度数を重ねられている方でこの数値では圧倒的。<br>
他には、 <a href="/tukiyo3" class="user-mention js-hovercard" title="tukiyo3" data-hovercard-target-type="user" data-hovercard-target-name="tukiyo3">@tukiyo3</a> さんの <strong>記事数1421</strong> なんてのもすごい数字です。 <a href="/tbpgr" class="user-mention js-hovercard" title="tbpgr" data-hovercard-target-type="user" data-hovercard-target-name="tbpgr">@tbpgr</a> さんの681でもすごい数字なのにその2倍近いとは恐れ入ります。。。</p>

<h1>
<span id="シェル芸の解説" class="fragment"></span><a href="#%E3%82%B7%E3%82%A7%E3%83%AB%E8%8A%B8%E3%81%AE%E8%A7%A3%E8%AA%AC"><i class="fa fa-link"></i></a><strong>シェル芸の解説</strong>
</h1>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/45253/54a6172b-3932-153d-9d99-0d6888b21782.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/45253/54a6172b-3932-153d-9d99-0d6888b21782.png" alt="school_sensei_kokuban.png"></a></p>

<p>せっかくなので収集、計算に使ったシェル芸の簡単な解説をしておきます。</p>

<ol>
<li>Qiita User RankingからTOP100ユーザ名を抜き出す</li>
<li>各ユーザのQiitaトップページを取得する</li>
<li>Qiitaトップページから「総Contribution」「記事数」「Top数」「Top記事」を抜き出す</li>
<li>それぞれの値から「平均いいね」「Top占有率」を計算し、出力する</li>
</ol>

<h2>
<span id="1-qiita-user-rankingからtop100ユーザ名を抜き出す" class="fragment"></span><a href="#1-qiita-user-ranking%E3%81%8B%E3%82%89top100%E3%83%A6%E3%83%BC%E3%82%B6%E5%90%8D%E3%82%92%E6%8A%9C%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a><strong>1. Qiita User RankingからTOP100ユーザ名を抜き出す</strong>
</h2>

<p>ランキングページの中身を見ると、</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span class="nt">&lt;h2&gt;</span>ランキング一覧<span class="nt">&lt;/h2&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    第1位
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://qiita.com/hirokidaichi"</span><span class="nt">&gt;</span>hirokidaichi<span class="nt">&lt;/a&gt;</span>,
    30974
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    第2位
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://qiita.com/jnchito"</span><span class="nt">&gt;</span>jnchito<span class="nt">&lt;/a&gt;</span>,
    26930
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    第3位
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://qiita.com/suin"</span><span class="nt">&gt;</span>suin<span class="nt">&lt;/a&gt;</span>,
    20108
  <span class="nt">&lt;/p&gt;</span>
</pre></div></div>

<p>というような感じになっています。そこで、特徴的な「第○位」に着目し、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span class="nv">$ </span>grep -E <span class="s2">"第[0-9]*位"</span> -A <span class="m">1</span> <span class="p">|</span> grep href <span class="p">|</span> sed -e <span class="s2">"s/^.*href=\".*\"&gt;\(.*\)&lt;\/a&gt;.*$/\1/g"</span>
</pre></div></div>

<p>の要領でユーザ名を抜き出しています。<br>
欲しいユーザ名は「第○位」の1行下にあるため、 <code>grep -A 1</code> で出すことにしています。あとはみんな大好き正規表現で抽出しているだけですね。</p>

<p>ランキングページ自体は20件ずつの表示になっているため、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span class="nv">$ </span><span class="k">for</span> PAGE in <span class="k">$(</span>seq <span class="m">1</span> 5<span class="k">)</span> <span class="p">;</span> <span class="k">do</span> curl -s https://qiita-user-ranking.herokuapp.com/?page<span class="o">=</span><span class="k">${</span><span class="nv">PAGE</span><span class="k">}</span> <span class="p">;</span> <span class="k">done</span>
</pre></div></div>

<p>で合計100件分をまわしています。<br>
<code>curl -s</code> オプションで邪魔なステータスを出ないようにしています。</p>

<h2>
<span id="2-各ユーザのqiitaトップページを取得する" class="fragment"></span><a href="#2-%E5%90%84%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%AEqiita%E3%83%88%E3%83%83%E3%83%97%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>2. 各ユーザのQiitaトップページを取得する</strong>
</h2>

<p>こちらも簡単です。先ほど取得したユーザ名一覧を使って、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span class="nv">$ </span><span class="k">for</span> USER in <span class="k">$(</span><span class="o">[</span>ユーザ名一覧<span class="o">]</span><span class="k">)</span> <span class="p">;</span> <span class="k">do</span> curl -s http://qiita.com/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span> <span class="p">;</span> <span class="k">done</span>
</pre></div></div>

<p>とするだけです。</p>

<h2>
<span id="3-qiitaトップページから総contribution記事数top数top記事を抜き出す" class="fragment"></span><a href="#3-qiita%E3%83%88%E3%83%83%E3%83%97%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%8B%E3%82%89%E7%B7%8Fcontribution%E8%A8%98%E4%BA%8B%E6%95%B0top%E6%95%B0top%E8%A8%98%E4%BA%8B%E3%82%92%E6%8A%9C%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a><strong>3. Qiitaトップページから「総Contribution」「記事数」「Top数」「Top記事」を抜き出す</strong>
</h2>

<p>おわかりかと思いますが、ここが一番面倒です。<br>
Qiitaユーザトップのソースを見てもらえばお分かりになるかと思いますが、実はこのページから <strong>得たい情報の全てが1行のソースに存在</strong> しています。</p>

<p>もちろんコードによって生成されていますので、法則性があり正規表現で捕まえられるのですが、ピンポイントで捕まえるのには結構苦労しました。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre>sed -e <span class="s2">"s/^.*&lt;span class=\"userActivityChart_statCount\"&gt;\([0-9]*\)&lt;\/span&gt;&lt;br \/&gt; &lt;span class=\"userActivityChart_statUnit\"&gt;Contribution&lt;\/span&gt;.*&lt;span class=\"userActivityChart_statCount\"&gt;\([0-9]*\)&lt;\/span&gt;&lt;br \/&gt; &lt;span class=\"userActivityChart_statUnit\"&gt;Items&lt;\/span&gt;.*&lt;span class=\"fa fa-like\"&gt;&lt;\/span&gt; \([0-9]*\)&lt;\/div&gt;.*&lt;a itemprop=\"url\" href=\"\(.*\)\"&gt;\(.*\)&lt;\/a&gt;&lt;ul class=\"list-inline userPopularItems_tags tagList\"&gt;.*\(itemprop.*\)\{4\}.*$/\1\t\2\t\3\t\[\5\](http:\/\/qiita.com\4)/g"</span>
</pre></div></div>

<p>どこまで行っても正規表現なので、興味がある方はページのソースと正規表現でにらめっこしてみてください。<br>
1つだけ説明を加えておくと、「Top数」「Top記事」を取るのが大変でした。<br>
1行が長いため、色々な部分で <code>.*</code> のワイルドカード的な表現を使っているのですが、 <strong>最長一致</strong> などの都合でなかなか思うように抜き出しができませんでした。<br>
最終的には、Top5記事に対するitempropを手掛かりに、最初の1つにパターンマッチをかけ、残り4つには <code>\(itemprop.*\)\{4\}</code> を引っ掛けることでTop記事に関する情報だけを抜き出しました。</p>

<h2>
<span id="4-それぞれの値から平均いいねtop占有率を計算し出力する" class="fragment"></span><a href="#4-%E3%81%9D%E3%82%8C%E3%81%9E%E3%82%8C%E3%81%AE%E5%80%A4%E3%81%8B%E3%82%89%E5%B9%B3%E5%9D%87%E3%81%84%E3%81%84%E3%81%ADtop%E5%8D%A0%E6%9C%89%E7%8E%87%E3%82%92%E8%A8%88%E7%AE%97%E3%81%97%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>4. それぞれの値から「平均いいね」「Top占有率」を計算し、出力する</strong>
</h2>

<p>あとは <code>awk</code> を使った簡単な計算です。<br>
<code>sed</code> の出力をタブでさせていたので、デリミタをタブにしつつ各行の値を計算して出力しています。<br>
ここでランクが出力されますが、ストリームのレコード番号を格納する <code>NR</code> で出しています。結構便利。<br>
ちまちま挟んであるパイプはMarkdownでの表にするためですね。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre>awk -F<span class="s2">"\t"</span> <span class="s1">'{if(NF==5) print "|"NR"|"$1"|"$2"|"$3"|"$2/$3"|"$4"|"$4/$2*100"%|"$5"|"}'</span>
</pre></div></div>

<p>条件で <code>NF==5</code> を指定していますが、それはこのあと出てきます。</p>

<h1>
<span id="46位がいない件" class="fragment"></span><a href="#46%E4%BD%8D%E3%81%8C%E3%81%84%E3%81%AA%E3%81%84%E4%BB%B6"><i class="fa fa-link"></i></a><strong>46位がいない件</strong>
</h1>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/45253/79775d08-a5be-749c-f7b9-b1bcaae539f1.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/45253/79775d08-a5be-749c-f7b9-b1bcaae539f1.png" alt="business_karoushi.png"></a></p>

<p>お気づきの方もいらっしゃるでしょうか、実は上の表では <strong>46位が欠けています</strong> 。<br>
46位にランクされているのは <a href="/Qiita" class="user-mention js-hovercard" title="Qiita" data-hovercard-target-type="user" data-hovercard-target-name="Qiita">@Qiita</a> さんなのですが、投稿記事数が4でTOP100ユーザの中で唯一「 <strong>投稿記事数が5未満</strong> 」となっています。<br>
どうして上の表に出てこないかというと、処理説明3のところで、</p>

<blockquote>
<p>Top5記事に対するitempropを手掛かりに、最初の1つにパターンマッチをかけ、残り4つには <code>\(itemprop.*\)\{4\}</code> を引っ掛ける</p>
</blockquote>

<p>と書いていたのですが、投稿記事数が4つしかない <a href="/Qiita" class="user-mention js-hovercard" title="Qiita" data-hovercard-target-type="user" data-hovercard-target-name="Qiita">@Qiita</a> さんは上記の正規表現で上手く値が取れませんでした。<br>
そのため、 <code>sed</code> の結果としてフィールド数が足りない状態であるため、最後の <code>awk</code> で <code>NF==5</code> の条件をつけることで結果から弾いています。</p>

<p>そもそももっと頭のいい正規表現を書ければ今の方針でもなんとかなったのかと思いますが、15分考えてもいいものが浮かばなかったので諦めました<sup id="fnref5"><a href="#fn5" rel="footnote" title="組織アカウントだし、まぁいいかな、なんて...(逃げ)">5</a></sup>。<br>
<strong>何かいい方法をお持ちの方はぜひご指導をお願いいたしますm(_ _)m</strong></p>

<p>ちなみに <a href="/Qiita" class="user-mention js-hovercard" title="Qiita" data-hovercard-target-type="user" data-hovercard-target-name="Qiita">@Qiita</a> さんのContributionまわりは下記の感じです。</p>

<table>
<thead>
<tr>
<th style="text-align: center">ランク</th>
<th style="text-align: center">ユーザ名</th>
<th style="text-align: center">総Contribution</th>
<th style="text-align: center">記事数</th>
<th style="text-align: center">平均いいね</th>
<th style="text-align: center">Top数</th>
<th style="text-align: center">Top占有率</th>
<th style="text-align: center">Top記事</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">46</td>
<td style="text-align: center"><a href="/Qiita" class="user-mention js-hovercard" title="Qiita" data-hovercard-target-type="user" data-hovercard-target-name="Qiita">@Qiita</a></td>
<td style="text-align: center">6743</td>
<td style="text-align: center">4</td>
<td style="text-align: center">1685.75</td>
<td style="text-align: center">5417</td>
<td style="text-align: center">80.3351%</td>
<td style="text-align: center"><a href="http://qiita.com/Qiita/items/c686397e4a0f4f11683d" id="reference-f99967bfcd6723646c1f">Markdown記法 チートシート</a></td>
</tr>
</tbody>
</table>

<p>チートシートは僕もたいへんお世話になりました。</p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a><strong>おわりに</strong>
</h1>

<p>シェル芸たのしい^^</p>

<p>来年は <code>sed</code> <code>awk</code> とかメジャーなものだけじゃなく、もっと黒魔術っぽいシェル芸を身に着けたいです。がんばろう。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/45253/21fe7493-7e8c-11aa-0b44-9ab4e95cd0cf.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/45253/21fe7493-7e8c-11aa-0b44-9ab4e95cd0cf.png" alt="pose_ganbarou_man.png"></a></p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>投稿した当時はまだストックによるContribution反映でした。&nbsp;<a href="#fnref1">↩</a></p>
</li>

<li id="fn2">
<p>なお、こちらのサイトの仕様上「サイトにある情報は結構タイムラグがあったりします」とのことなので、実際のTOP100ではない可能性があります。&nbsp;<a href="#fnref2">↩</a></p>
</li>

<li id="fn3">
<p>シェル芸: マウスも使わず、ソースコードも残さず、GUIツールを立ち上げる間もなく、あらゆる調査・計算・テキスト処理をCLI端末へのコマンド入力一撃で終わらすこと。あるいはそのときのコマンド入力のこと。(<a href="https://blog.ueda.asia/?page_id=1434" rel="nofollow noopener" target="_blank">シェル芸の定義バージョン1.1</a>)&nbsp;<a href="#fnref3">↩</a></p>
</li>

<li id="fn4">
<p>GNU bash 4.2.46, GNU sed 4.2.2, GNU Awk 4.0.2でした。&nbsp;<a href="#fnref4">↩</a></p>
</li>

<li id="fn5">
<p>組織アカウントだし、まぁいいかな、なんて...(逃げ)&nbsp;<a href="#fnref5">↩</a></p>
</li>

</ol>
</div>

      </div>
    </div>
  </div>
  <div class="loading"></div>
</div>
<fieldset class="toggle-button-field">
  <legend class="toggle-button">
    <span class="expand"><i class="fa fa-angle-double-down"></i></span>
    <span class="close"><i class="fa fa-angle-double-up"></i></span>
  </legend>
</fieldset>
</div></div>
<div class="tail"><div class="more-button btn btn-default btn-block" tabindex="0">もっと見る</div>
</div>
</div></div><div class="public-stream"><div><div class="circle-loading">
  <p>読み込み中</p>
  <div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
</div></div><div class="stock-stream">
<form action="/search" class="stream_searchForm" method="GET">
  <div>
    <input placeholder="ストック検索" class="stream_searchForm_textField js-stream_searchForm_textField">
    <button type="submit" class="btn stream_searchForm_searchButton">
      <i class="fa fa-search"></i>
    </button>
  </div>
  <input type="hidden" name="q" class="js-stream_searchForm_searchQuery" value="">
  
    <input type="hidden" name="stocked" value="1">
  
</form>
<div><div class="circle-loading">
  <p>読み込み中</p>
  <div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
</div></div><div class="mine-stream">
<form action="/search" class="stream_searchForm" method="GET">
  <div>
    <input placeholder="自分の投稿の中から検索" class="stream_searchForm_textField js-stream_searchForm_textField">
    <button type="submit" class="btn stream_searchForm_searchButton">
      <i class="fa fa-search"></i>
    </button>
  </div>
  <input type="hidden" name="q" class="js-stream_searchForm_searchQuery" value="user:howdy39">
  
</form>
<div><div class="circle-loading">
  <p>読み込み中</p>
  <div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
</div></div></div></div></div><div class="col-sm-3"><div class="userInfo"><div class="userInfo_left"><a href="/howdy39"><img alt="" class="userInfo_avatar" src="https://qiita-image-store.s3.amazonaws.com/0/35595/profile-images/1473686778"></a></div><div class="userInfo_right"><div class="userInfo_names"><div class="userInfo_name"><a href="/howdy39">Tatsuya Nakano</a></div><div class="userInfo_urlName">@howdy39</div></div><div class="userInfo_stats"><div class="userInfo_postsCount">19<span class="userInfo_stats_unit">投稿</span></div><div class="userInfo_contribution"><span class="userInfo_contribution_value">4376</span><span class="userInfo_stats_unit">Contribution</span></div></div></div></div><nav class="categoryNavigation_menu"><a class="categoryNavigation_menu-item categoryNavigation_menu-item-selected" href="/"><i class="fa fa-fw fa-list-ul"></i> フィード</a><a class="categoryNavigation_menu-item " href="/organizations"><i class="fa fa-fw fa-building-o"></i> Organization一覧</a><a class="categoryNavigation_menu-item " href="/popular-items"><i class="fa fa-fw fa-line-chart"></i> 人気の投稿 <span class="label label-info">beta</span></a><a class="categoryNavigation_menu-item" href="/advent-calendar/2016"><i class="fa fa-fw fa-calendar"></i> Advent Calendar</a></nav><div class="newUserPageProfile_info"><div class="newUserPageProfile_info_heading"><i class="fa fa-fw fa-user-plus"></i> 知り合いかも</div><div class="newUserPageProfile_info_body"><ul class="list-inline newUserPageProfile_followees"><li><div class="js-hovercard" data-hovercard-target-name="yaotti"><a href="/yaotti?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="yaotti" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/1/profile-images/1473681698" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="htomine"><a href="/htomine?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="htomine" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/123/profile-images/1473681399" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="yuku_t"><a href="/yuku_t?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="yuku_t" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/153/profile-images/1473681719" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="gfx"><a href="/gfx?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="gfx" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/207/profile-images/1473682563" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="yusuke"><a href="/yusuke?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="yusuke" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/1842/profile-images/1473683899" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="ymotongpoo"><a href="/ymotongpoo?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="ymotongpoo" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/2216/profile-images/1473681234" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="hnakamur"><a href="/hnakamur?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="hnakamur" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/3227/profile-images/1473682812" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="shuhei"><a href="/shuhei?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="shuhei" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/3732/profile-images/1473683476" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="atusi"><a href="/atusi?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="atusi" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/4036/profile-images/1473683754" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="r7kamura"><a href="/r7kamura?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="r7kamura" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/4365/profile-images/1473683928" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="masuidrive"><a href="/masuidrive?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="masuidrive" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/4471/profile-images/1473684050" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="koba04"><a href="/koba04?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="koba04" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/4677/profile-images/1473680735" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="Jxck_"><a href="/Jxck_?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="Jxck_" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/6452/profile-images/1473682890" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="sue445"><a href="/sue445?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="sue445" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/8059/profile-images/1473680867" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="Quramy"><a href="/Quramy?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="Quramy" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/8808/profile-images/1473681159" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="vvakame"><a href="/vvakame?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="vvakame" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="tenntenn"><a href="/tenntenn?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="tenntenn" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/14952/profile-images/1476846346" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="armorik83"><a href="/armorik83?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="armorik83" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/17959/profile-images/1479484285" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="nakajmg"><a href="/nakajmg?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="nakajmg" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/17969/profile-images/1473682305" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="yone098@github"><a href="/yone098@github?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="yone098@github" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/19734/profile-images/1473682801" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="watilde"><a href="/watilde?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="watilde" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/29869/profile-images/1473685405" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="kazunori279"><a href="/kazunori279?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="kazunori279" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/38290/profile-images/1473687710" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="wf9a5m75"><a href="/wf9a5m75?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="wf9a5m75" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/39529/profile-images/1473688142" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="ikawaha"><a href="/ikawaha?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="ikawaha" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/44487/profile-images/1473689919" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="kenju"><a href="/kenju?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="kenju" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/48264/profile-images/1473691288" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="ruiu"><a href="/ruiu?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="ruiu" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/53157/profile-images/1473692972" width="20" height="20"></a></div></li><li><div class="js-hovercard" data-hovercard-target-name="tonkotsuboy_com"><a href="/tonkotsuboy_com?utm_campaign=you_may_know&amp;utm_content=home_sidebar&amp;utm_medium=referral&amp;utm_source=you_may_know"><img alt="tonkotsuboy_com" class="newUserPageProfile_followees_icon" src="https://qiita-image-store.s3.amazonaws.com/0/67884/profile-images/1473697671" width="20" height="20"></a></div></li></ul></div></div></div></div></div></div><footer class="footer"><div class="footer_inner"><div class="footer_container"><ul class="footer_links-left"><li class="footer_link"><a class="footer_copyright" href="http://increments.co.jp">© 2016 Increments Inc.</a></li><li class="footer_link"><a href="http://qiita.com/terms">利用規約</a></li><li class="footer_link"><a href="http://qiita.com/privacy">プライバシー</a></li><li class="footer_link"><a href="http://help.qiita.com">ヘルプ</a></li><li class="footer_link"><a href="https://increments.zendesk.com/anonymous_requests/new">お問い合わせ</a></li></ul><ul class="footer_links-right"><li class="footer_link"><a href="http://qiita.com/about">Qiitaとは</a></li><li class="footer_link"><a href="http://blog.qiita.com">ブログ</a></li><li class="footer_link"><a href="http://qiita.com/api/v2/docs">API</a></li><li class="footer_link"><a href="https://teams.qiita.com/">Team</a></li><li class="footer_link"><a href="http://kobito.qiita.com">Kobito</a></li><li class="footer_link"><a class="js-public-form-feedback-link" data-target=".js-feedback-form" data-toggle="modal" href=""><i class="fa fa-heart"></i> ご意見 <i class="fa fa-caret-down"></i></a></li></ul></div></div></footer><div class="js-feedback-form modal fade feedbackForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">×</button><h4 class="modal-title">ご意見</h4></div><div class="modal-body"><form class="js-feedback-form-form" action="/feedbacks" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="OfuNX8OCS7kkADNF2DfJS+dwM4N93z/xvKQZNqs/SjL/G7jeaSMTrKBZaZ3dmq5D4Df3/uukbu0BjtsvgZ6Giw=="><input type="hidden" name="redirect_path" id="redirect_path" value="/"><div class="form-group"><textarea name="feedback[message]" id="feedback_message" class="form-control js-feedback-form-text-area" placeholder="Qiitaについてのご意見をお聞かせください。" required="required" rows="5"></textarea></div><div class="feedbackForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary feedbackForm_submitButton"><i class="fa fa-send"></i> 送信</button><p class="feedbackForm_note">いただいたご意見への返信は行っておりません。<br>返信の必要な内容については、<a href="https://increments.zendesk.com/anonymous_requests/new">こちら</a> からお問い合わせください。</p></div><div style="position:fixed;top:-99999px;opacity:0.0001;"><input name="feedback[name]" type="text"></div></form></div></div></div></div><script>// if (window.mixpanel instanceof Element) {
//   window.mixpanel = [];
// }
// (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
// for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);</script><script src="http://cdn.qiita.com/assets/public-fdf24df61a083ca5f74c8b717c9c4ff9.min.js"></script><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="http://staticxx.facebook.com/connect/xd_arbiter/r/iPrOY23SGAp.js?version=42#channel=f21741defdf3aa&amp;origin=http%3A%2F%2Fqiita.com" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="https://staticxx.facebook.com/connect/xd_arbiter/r/iPrOY23SGAp.js?version=42#channel=f21741defdf3aa&amp;origin=http%3A%2F%2Fqiita.com" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div><script>
  (function () {
    var script = document.getElementsByTagName('script')[0];
    var load = function (src, id) {
      var el = document.createElement('script');
      el.async = true;
      el.src = src;
      el.id = id;
      script.parentNode.insertBefore(el, script);
    };
      // Optimizely
      load('//cdn.optimizely.com/js/52738645.js', 'optimizely-jssdk');
      // Google Analytics
      window._gaq = window._gaq || [];
      var isCareer = location.hostname.split('.')[0] == 'career';
      if (isCareer) {
        window._gaq.push(['_setAccount', 'UA-24675221-11']);
        window._gaq.push(['_setDomainName', 'qiita.com']);
      } else {
        window._gaq.push(['_setAccount', 'UA-24675221-1']);
      }
      window._gaq.push(['_setCustomVar', 1, 'logged_in', 'true', 2]);
      window._gaq.push(['_trackPageview']);
      var src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      load(src, 'google-analytics-jssdk');
    // Google Analytics - Universal Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-24675221-12', {
          clientId: '35595'
        });
        ga('set', {
          'dimension1': 'true',
          'dimension2': 'true',
          'metric1': 19,
          'metric2': 0,
          'metric3': 0
        });
      ga('require', 'displayfeatures');
      ga('set', 'forceSSL', true);
      ga('send', 'pageview');
    // Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TBQWPN');
  })();
</script>
<iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe"></iframe></body></html>